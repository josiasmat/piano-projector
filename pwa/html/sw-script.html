<!--
Piano Projector
A versatile and easy-to-use on-screen piano keyboard for music education. 
Control it with a MIDI device, your computer keyboard, mouse or touch.

Copyright (C) 2026 Josias Matschulat

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as
published by the Free Software Foundation, either version 3 of the
License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program.  If not, see <https://www.gnu.org/licenses/>.
-->
<script>
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('sw.js')
            .catch(err => console.error('Service worker registration failed:\n', err));
        });
        navigator.serviceWorker.addEventListener('message', (e) => {
            if ( e.data?.type === 'RELOAD' ) {
                if ( e.data.reason === 'UPDATE' )
                    history.replaceState({ updated: true }, '');
                location.reload();
            }
        });
    }
</script>
