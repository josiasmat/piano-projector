var Uu=Object.create;var js=Object.defineProperty;var Ku=Object.getOwnPropertyDescriptor;var ju=Object.getOwnPropertyNames;var Wu=Object.getPrototypeOf,qu=Object.prototype.hasOwnProperty;var Zu=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Xu=(t,e,o,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of ju(e))!qu.call(t,i)&&i!==o&&js(t,i,{get:()=>e[i],enumerable:!(r=Ku(e,i))||r.enumerable});return t};var Yu=(t,e,o)=>(o=t!=null?Uu(Wu(t)):{},Xu(e||!t||!t.__esModule?js(o,"default",{value:t,enumerable:!0}):o,t));var Oc=Zu((an,Ts)=>{(function(t,e){typeof an=="object"&&typeof Ts=="object"?Ts.exports=e():typeof define=="function"&&define.amd?define("SoundFont2",[],e):typeof an=="object"?an.SoundFont2=e():t.SoundFont2=e()})(window,(function(){return(function(t){var e={};function o(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=t,o.c=e,o.d=function(r,i,n){o.o(r,i)||Object.defineProperty(r,i,{enumerable:!0,get:n})},o.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},o.t=function(r,i){if(1&i&&(r=o(r)),8&i||4&i&&typeof r=="object"&&r&&r.__esModule)return r;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:r}),2&i&&typeof r!="string")for(var a in r)o.d(n,a,function(s){return r[s]}.bind(null,a));return n},o.n=function(r){var i=r&&r.__esModule?function(){return r.default}:function(){return r};return o.d(i,"a",i),i},o.o=function(r,i){return Object.prototype.hasOwnProperty.call(r,i)},o.p="",o(o.s="./src/index.ts")})({"./src/chunk.ts":function(t,e,o){"use strict";o.r(e),o.d(e,"SF2Chunk",(function(){return c}));var r=o("./src/riff/index.ts"),i=o("./src/constants.ts"),n=o("./src/chunks/index.ts");function a(f){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(f)}function s(f,h){for(var g=0;g<h.length;g++){var b=h[g];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(f,b.key,b)}}function l(f){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(h){return h.__proto__||Object.getPrototypeOf(h)})(f)}function u(f,h){return(u=Object.setPrototypeOf||function(g,b){return g.__proto__=b,g})(f,h)}function m(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}var c=(function(f){function h(_){var x,E,$,O,K,G;return(function(J,I){if(!(J instanceof I))throw new TypeError("Cannot call a class as a function")})(this,h),E=this,x=!($=l(h).call(this,_.id,_.length,_.buffer,_.subChunks))||a($)!=="object"&&typeof $!="function"?m(E):$,O=m(m(x)),G=void 0,(K="subChunks")in O?Object.defineProperty(O,K,{value:G,enumerable:!0,configurable:!0,writable:!0}):O[K]=G,x.subChunks=_.subChunks.map((function(J){return new h(J)})),x}var g,b,w;return(function(_,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(x&&x.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),x&&u(_,x)})(h,f),g=h,(b=[{key:"getMetaData",value:function(){if(this.id!=="LIST")throw new r.ParseError("Unexpected chunk ID","'LIST'","'".concat(this.id,"'"));var _=this.subChunks.reduce((function(x,E){if(E.id==="ifil"||E.id==="iver"){if(E.length!==i.SF_VERSION_LENGTH)throw new r.ParseError("Invalid size for the '".concat(E.id,"' sub-chunk"));x[E.id]="".concat(E.getInt16(),".").concat(E.getInt16(2))}else x[E.id]=E.getString();return x}),{});if(!_.ifil)throw new r.ParseError("Missing required 'ifil' sub-chunk");if(!_.INAM)throw new r.ParseError("Missing required 'INAM' sub-chunk");return{version:_.ifil,soundEngine:_.isng||"EMU8000",name:_.INAM,rom:_.irom,romVersion:_.iver,creationDate:_.ICRD,author:_.IENG,product:_.IPRD,copyright:_.ICOP,comments:_.ICMT,createdBy:_.ISFT}}},{key:"getSampleData",value:function(){if(this.id!=="LIST")throw new r.ParseError("Unexpected chunk ID","'LIST'","'".concat(this.id,"'"));var _=this.subChunks[0];if(_.id!=="smpl")throw new r.ParseError("Invalid chunk signature","'smpl'","'".concat(_.id,"'"));return _.buffer}},{key:"getPresetData",value:function(){if(this.id!=="LIST")throw new r.ParseError("Unexpected chunk ID","'LIST'","'".concat(this.id,"'"));return{presetHeaders:Object(n.getPresetHeaders)(this.subChunks[0]),presetZones:Object(n.getZones)(this.subChunks[1],"pbag"),presetModulators:Object(n.getModulators)(this.subChunks[2],"pmod"),presetGenerators:Object(n.getGenerators)(this.subChunks[3],"pgen"),instrumentHeaders:Object(n.getInstrumentHeaders)(this.subChunks[4]),instrumentZones:Object(n.getZones)(this.subChunks[5],"ibag"),instrumentModulators:Object(n.getModulators)(this.subChunks[6],"imod"),instrumentGenerators:Object(n.getGenerators)(this.subChunks[7],"igen"),sampleHeaders:Object(n.getSampleHeaders)(this.subChunks[8])}}}])&&s(g.prototype,b),w&&s(g,w),h})(r.RIFFChunk)},"./src/chunks/generators.ts":function(t,e,o){"use strict";o.r(e),o.d(e,"getGenerators",(function(){return u}));var r=o("./src/riff/index.ts"),i=o("./src/types/index.ts"),n=o("./src/constants.ts"),a=[i.GeneratorType.StartAddrsOffset,i.GeneratorType.EndAddrsOffset,i.GeneratorType.StartLoopAddrsOffset,i.GeneratorType.EndLoopAddrsOffset,i.GeneratorType.StartAddrsCoarseOffset,i.GeneratorType.EndAddrsCoarseOffset,i.GeneratorType.StartLoopAddrsCoarseOffset,i.GeneratorType.KeyNum,i.GeneratorType.Velocity,i.GeneratorType.EndLoopAddrsCoarseOffset,i.GeneratorType.SampleModes,i.GeneratorType.ExclusiveClass,i.GeneratorType.OverridingRootKey],s=[i.GeneratorType.Unused1,i.GeneratorType.Unused2,i.GeneratorType.Unused3,i.GeneratorType.Unused4,i.GeneratorType.Reserved1,i.GeneratorType.Reserved2,i.GeneratorType.Reserved3],l=[i.GeneratorType.KeyRange,i.GeneratorType.VelRange],u=function(m,c){if(m.id!==c)throw new r.ParseError("Unexpected chunk ID","'".concat(c,"'"),"'".concat(m.id,"'"));if(m.length%n.SF_GENERATOR_SIZE)throw new r.ParseError("Invalid size for the '".concat(c,"' sub-chunk"));return m.iterate((function(f){var h=f.getInt16();return i.GeneratorType[h]?c==="pgen"&&a.includes(h)||c==="igen"&&s.includes(h)?null:l.includes(h)?{id:h,range:{lo:f.getByte(),hi:f.getByte()}}:{id:h,value:f.getInt16BE()}:null}))}},"./src/chunks/index.ts":function(t,e,o){"use strict";o.r(e);var r=o("./src/chunks/instruments/index.ts");o.d(e,"getInstrumentHeaders",(function(){return r.getInstrumentHeaders}));var i=o("./src/chunks/presets/index.ts");o.d(e,"getPresetHeaders",(function(){return i.getPresetHeaders}));var n=o("./src/chunks/samples/index.ts");o.d(e,"getSampleHeaders",(function(){return n.getSampleHeaders}));var a=o("./src/chunks/generators.ts");o.d(e,"getGenerators",(function(){return a.getGenerators}));var s=o("./src/chunks/modulators.ts");o.d(e,"getModulators",(function(){return s.getModulators}));var l=o("./src/chunks/zones.ts");o.d(e,"getZones",(function(){return l.getZones})),o.d(e,"getItemsInZone",(function(){return l.getItemsInZone}))},"./src/chunks/instruments/headers.ts":function(t,e,o){"use strict";o.r(e),o.d(e,"getInstrumentHeaders",(function(){return n}));var r=o("./src/riff/index.ts"),i=o("./src/constants.ts"),n=function(a){if(a.id!=="inst")throw new r.ParseError("Unexpected chunk ID","'inst'","'".concat(a.id,"'"));if(a.length%i.SF_INSTRUMENT_HEADER_SIZE)throw new r.ParseError("Invalid size for the 'inst' sub-chunk");return a.iterate((function(s){return{name:s.getString(),bagIndex:s.getInt16()}}))}},"./src/chunks/instruments/index.ts":function(t,e,o){"use strict";o.r(e);var r=o("./src/chunks/instruments/headers.ts");o.d(e,"getInstrumentHeaders",(function(){return r.getInstrumentHeaders}))},"./src/chunks/modulators.ts":function(t,e,o){"use strict";o.r(e),o.d(e,"getModulators",(function(){return a}));var r=o("./src/riff/index.ts"),i=o("./src/constants.ts"),n=function(s){return{type:s>>10&63,polarity:s>>9&1,direction:s>>8&1,palette:s>>7&1,index:127&s}},a=function(s,l){if(s.id!==l)throw new r.ParseError("Unexpected chunk ID","'".concat(l,"'"),"'".concat(s.id,"'"));if(s.length%i.SF_MODULATOR_SIZE)throw new r.ParseError("Invalid size for the '".concat(l,"' sub-chunk"));return s.iterate((function(u){return{source:n(u.getInt16BE()),id:u.getInt16BE(),value:u.getInt16BE(),valueSource:n(u.getInt16BE()),transform:u.getInt16BE()}}))}},"./src/chunks/presets/headers.ts":function(t,e,o){"use strict";o.r(e),o.d(e,"getPresetHeaders",(function(){return n}));var r=o("./src/riff/index.ts"),i=o("./src/constants.ts"),n=function(a){if(a.id!=="phdr")throw new r.ParseError("Invalid chunk ID","'phdr'","'".concat(a.id,"'"));if(a.length%i.SF_PRESET_HEADER_SIZE)throw new r.ParseError("Invalid size for the 'phdr' sub-chunk");return a.iterate((function(s){return{name:s.getString(),preset:s.getInt16(),bank:s.getInt16(),bagIndex:s.getInt16(),library:s.getUInt32(),genre:s.getUInt32(),morphology:s.getUInt32()}}))}},"./src/chunks/presets/index.ts":function(t,e,o){"use strict";o.r(e);var r=o("./src/chunks/presets/headers.ts");o.d(e,"getPresetHeaders",(function(){return r.getPresetHeaders}))},"./src/chunks/samples/headers.ts":function(t,e,o){"use strict";o.r(e),o.d(e,"getSampleHeaders",(function(){return n}));var r=o("./src/riff/index.ts"),i=o("./src/constants.ts"),n=function(a){if(a.id!=="shdr")throw new r.ParseError("Unexpected chunk ID","'shdr'","'".concat(a.id,"'"));if(a.length%i.SF_SAMPLE_HEADER_SIZE)throw new r.ParseError("Invalid size for the 'shdr' sub-chunk");return a.iterate((function(s){return{name:s.getString(),start:s.getUInt32(),end:s.getUInt32(),startLoop:s.getUInt32(),endLoop:s.getUInt32(),sampleRate:s.getUInt32(),originalPitch:s.getByte(),pitchCorrection:s.getChar(),link:s.getInt16(),type:s.getInt16()}}))}},"./src/chunks/samples/index.ts":function(t,e,o){"use strict";o.r(e);var r=o("./src/chunks/samples/headers.ts");o.d(e,"getSampleHeaders",(function(){return r.getSampleHeaders}))},"./src/chunks/zones.ts":function(t,e,o){"use strict";o.r(e),o.d(e,"getZones",(function(){return a})),o.d(e,"getItemsInZone",(function(){return s}));var r=o("./src/riff/index.ts"),i=o("./src/constants.ts"),n=o("./src/types/index.ts"),a=function(c,f){if(c.id!==f)throw new r.ParseError("Unexpected chunk ID","'".concat(f,"'"),"'".concat(c.id,"'"));if(c.length%i.SF_BAG_SIZE)throw new r.ParseError("Invalid size for the '".concat(f,"' sub-chunk"));return c.iterate((function(h){return{generatorIndex:h.getInt16(),modulatorIndex:h.getInt16()}}))},s=function(c,f,h,g,b,w){for(var _=[],x=0;x<c.length;x++){for(var E=c[x],$=c[x+1],O=E.bagIndex,K=$?$.bagIndex:f.length,G=[],J=void 0,I=O;I<K;I++){var H=l(I,f,h),k=u(I,f,g),it=k[n.GeneratorType.KeyRange]&&k[n.GeneratorType.KeyRange].range,pt=k[w];if(pt){var tt=b[pt.value];tt&&G.push({keyRange:it,modulators:H,generators:k,reference:tt})}else I-O==0&&(J={keyRange:it,modulators:H,generators:k})}_.push({header:E,globalZone:J,zones:G})}return _},l=function(c,f,h){var g=f[c],b=f[c+1],w=g.modulatorIndex,_=b?b.modulatorIndex:f.length;return m(w,_,h)},u=function(c,f,h){var g=f[c],b=f[c+1],w=g.generatorIndex,_=b?b.generatorIndex:f.length;return m(w,_,h)},m=function(c,f,h){for(var g={},b=c;b<f;b++){var w=h[b];w&&(g[w.id]=w)}return g}},"./src/constants.ts":function(t,e,o){"use strict";o.r(e),o.d(e,"SF_VERSION_LENGTH",(function(){return r})),o.d(e,"SF_PRESET_HEADER_SIZE",(function(){return i})),o.d(e,"SF_BAG_SIZE",(function(){return n})),o.d(e,"SF_MODULATOR_SIZE",(function(){return a})),o.d(e,"SF_GENERATOR_SIZE",(function(){return s})),o.d(e,"SF_INSTRUMENT_HEADER_SIZE",(function(){return l})),o.d(e,"SF_SAMPLE_HEADER_SIZE",(function(){return u})),o.d(e,"DEFAULT_SAMPLE_RATE",(function(){return m}));var r=4,i=38,n=4,a=10,s=4,l=22,u=46,m=22050},"./src/index.ts":function(t,e,o){"use strict";o.r(e);var r=o("./src/types/index.ts");for(var i in r)["default"].indexOf(i)<0&&(function(l){o.d(e,l,(function(){return r[l]}))})(i);var n=o("./src/chunk.ts");o.d(e,"SF2Chunk",(function(){return n.SF2Chunk}));var a=o("./src/constants.ts");o.d(e,"SF_VERSION_LENGTH",(function(){return a.SF_VERSION_LENGTH})),o.d(e,"SF_PRESET_HEADER_SIZE",(function(){return a.SF_PRESET_HEADER_SIZE})),o.d(e,"SF_BAG_SIZE",(function(){return a.SF_BAG_SIZE})),o.d(e,"SF_MODULATOR_SIZE",(function(){return a.SF_MODULATOR_SIZE})),o.d(e,"SF_GENERATOR_SIZE",(function(){return a.SF_GENERATOR_SIZE})),o.d(e,"SF_INSTRUMENT_HEADER_SIZE",(function(){return a.SF_INSTRUMENT_HEADER_SIZE})),o.d(e,"SF_SAMPLE_HEADER_SIZE",(function(){return a.SF_SAMPLE_HEADER_SIZE})),o.d(e,"DEFAULT_SAMPLE_RATE",(function(){return a.DEFAULT_SAMPLE_RATE}));var s=o("./src/soundFont2.ts");o.d(e,"SoundFont2",(function(){return s.SoundFont2}))},"./src/riff/chunkIterator.ts":function(t,e,o){"use strict";o.r(e),o.d(e,"ChunkIterator",(function(){return s}));var r=o("./src/utils/index.ts");function i(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}function n(l,u){for(var m=0;m<u.length;m++){var c=u[m];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(l,c.key,c)}}function a(l,u,m){return u in l?Object.defineProperty(l,u,{value:m,enumerable:!0,configurable:!0,writable:!0}):l[u]=m,l}var s=(function(){function l(f){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;i(this,l),a(this,"target",[]),a(this,"chunk",void 0),a(this,"position",0),this.chunk=f,this.position=h}var u,m,c;return u=l,(m=[{key:"iterate",value:function(f){for(;this.position<this.chunk.length;){var h=f(this);h&&this.target.push(h)}}},{key:"getString",value:function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,h=Object(r.getStringFromBuffer)(this.getBuffer(this.position,f));return this.position+=f,h}},{key:"getInt16",value:function(){return this.chunk.buffer[this.position++]|this.chunk.buffer[this.position++]<<8}},{key:"getInt16BE",value:function(){return this.getInt16()<<16>>16}},{key:"getUInt32",value:function(){return(this.chunk.buffer[this.position++]|this.chunk.buffer[this.position++]<<8|this.chunk.buffer[this.position++]<<16|this.chunk.buffer[this.position++]<<24)>>>0}},{key:"getByte",value:function(){return this.chunk.buffer[this.position++]}},{key:"getChar",value:function(){return this.chunk.buffer[this.position++]<<24>>24}},{key:"skip",value:function(f){this.position+=f}},{key:"getBuffer",value:function(f,h){return this.chunk.buffer.subarray(f,f+h)}},{key:"currentPosition",get:function(){return this.position}}])&&n(u.prototype,m),c&&n(u,c),l})()},"./src/riff/index.ts":function(t,e,o){"use strict";o.r(e);var r=o("./src/riff/chunkIterator.ts");o.d(e,"ChunkIterator",(function(){return r.ChunkIterator}));var i=o("./src/riff/parseError.ts");o.d(e,"ParseError",(function(){return i.ParseError}));var n=o("./src/riff/parser.ts");o.d(e,"parseBuffer",(function(){return n.parseBuffer})),o.d(e,"getChunk",(function(){return n.getChunk})),o.d(e,"getChunkLength",(function(){return n.getChunkLength})),o.d(e,"getSubChunks",(function(){return n.getSubChunks})),o.d(e,"getChunkId",(function(){return n.getChunkId}));var a=o("./src/riff/riffChunk.ts");o.d(e,"RIFFChunk",(function(){return a.RIFFChunk}))},"./src/riff/parseError.ts":function(t,e,o){"use strict";function r(c){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(c)}function i(c,f){return!f||r(f)!=="object"&&typeof f!="function"?(function(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h})(c):f}function n(c){var f=typeof Map=="function"?new Map:void 0;return(n=function(h){if(h===null||(g=h,Function.toString.call(g).indexOf("[native code]")===-1))return h;var g;if(typeof h!="function")throw new TypeError("Super expression must either be null or a function");if(f!==void 0){if(f.has(h))return f.get(h);f.set(h,b)}function b(){return s(h,arguments,u(this).constructor)}return b.prototype=Object.create(h.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),l(b,h)})(c)}function a(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch{return!1}}function s(c,f,h){return(s=a()?Reflect.construct:function(g,b,w){var _=[null];_.push.apply(_,b);var x=new(Function.bind.apply(g,_));return w&&l(x,w.prototype),x}).apply(null,arguments)}function l(c,f){return(l=Object.setPrototypeOf||function(h,g){return h.__proto__=g,h})(c,f)}function u(c){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)})(c)}o.r(e),o.d(e,"ParseError",(function(){return m}));var m=(function(c){function f(h,g,b){return(function(w,_){if(!(w instanceof _))throw new TypeError("Cannot call a class as a function")})(this,f),i(this,u(f).call(this,"".concat(h).concat(g&&b?", expected ".concat(g,", received ").concat(b):"")))}return(function(h,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(g&&g.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),g&&l(h,g)})(f,c),f})(n(Error))},"./src/riff/parser.ts":function(t,e,o){"use strict";o.r(e),o.d(e,"parseBuffer",(function(){return a})),o.d(e,"getChunk",(function(){return s})),o.d(e,"getChunkLength",(function(){return l})),o.d(e,"getSubChunks",(function(){return u})),o.d(e,"getChunkId",(function(){return m}));var r=o("./src/riff/parseError.ts"),i=o("./src/utils/buffer.ts"),n=o("./src/riff/riffChunk.ts"),a=function(c){var f=m(c);if(f!=="RIFF")throw new r.ParseError("Invalid file format","RIFF",f);var h=m(c,8);if(h!=="sfbk")throw new r.ParseError("Invalid signature","sfbk",h);var g=c.subarray(8),b=u(g.subarray(4));return new n.RIFFChunk(f,g.length,g,b)},s=function(c,f){var h=m(c,f),g=l(c,f+4),b=[];return h!=="RIFF"&&h!=="LIST"||(b=u(c.subarray(f+12))),new n.RIFFChunk(h,g,c.subarray(f+8),b)},l=function(c,f){return((c=c.subarray(f,f+4))[0]|c[1]<<8|c[2]<<16|c[3]<<24)>>>0},u=function(c){for(var f=[],h=0;h<=c.length-8;){var g=s(c,h);f.push(g),h=(h+=8+g.length)%2?h+1:h}return f},m=function(c){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Object(i.getStringFromBuffer)(c.subarray(f,f+4))}},"./src/riff/riffChunk.ts":function(t,e,o){"use strict";o.r(e),o.d(e,"RIFFChunk",(function(){return s}));var r=o("./src/riff/chunkIterator.ts"),i=o("./src/utils/index.ts");function n(l,u){for(var m=0;m<u.length;m++){var c=u[m];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(l,c.key,c)}}function a(l,u,m){return u in l?Object.defineProperty(l,u,{value:m,enumerable:!0,configurable:!0,writable:!0}):l[u]=m,l}var s=(function(){function l(f,h,g,b){(function(w,_){if(!(w instanceof _))throw new TypeError("Cannot call a class as a function")})(this,l),a(this,"id",void 0),a(this,"length",void 0),a(this,"buffer",void 0),a(this,"subChunks",void 0),this.id=f,this.length=h,this.buffer=g,this.subChunks=b}var u,m,c;return u=l,(m=[{key:"getString",value:function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,h=arguments.length>1?arguments[1]:void 0;return Object(i.getStringFromBuffer)(this.getBuffer(f,h||this.length-f))}},{key:"getInt16",value:function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.buffer[f++]|this.buffer[f]<<8}},{key:"getUInt32",value:function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return(this.buffer[f++]|this.buffer[f++]<<8|this.buffer[f++]<<16|this.buffer[f]<<24)>>>0}},{key:"getByte",value:function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.buffer[f]}},{key:"getChar",value:function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.buffer[f]<<24>>24}},{key:"iterator",value:function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new r.ChunkIterator(this,f)}},{key:"iterate",value:function(f){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,g=new r.ChunkIterator(this,h);return g.iterate(f),g.target}},{key:"getBuffer",value:function(f,h){return this.buffer.subarray(f,f+h)}}])&&n(u.prototype,m),c&&n(u,c),l})()},"./src/soundFont2.ts":function(t,e,o){"use strict";o.r(e),o.d(e,"SoundFont2",(function(){return f}));var r=o("./src/types/index.ts"),i=o("./src/chunk.ts"),n=o("./src/riff/index.ts"),a=o("./src/chunks/index.ts"),s=o("./src/utils/index.ts");function l(h){for(var g=1;g<arguments.length;g++){var b=arguments[g]!=null?arguments[g]:{},w=Object.keys(b);typeof Object.getOwnPropertySymbols=="function"&&(w=w.concat(Object.getOwnPropertySymbols(b).filter((function(_){return Object.getOwnPropertyDescriptor(b,_).enumerable})))),w.forEach((function(_){c(h,_,b[_])}))}return h}function u(h,g){for(var b=0;b<g.length;b++){var w=g[b];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(h,w.key,w)}}function m(h,g,b){return g&&u(h.prototype,g),b&&u(h,b),h}function c(h,g,b){return g in h?Object.defineProperty(h,g,{value:b,enumerable:!0,configurable:!0,writable:!0}):h[g]=b,h}var f=(function(){function h(g){if((function(w,_){if(!(w instanceof _))throw new TypeError("Cannot call a class as a function")})(this,h),c(this,"chunk",void 0),c(this,"metaData",void 0),c(this,"sampleData",void 0),c(this,"samples",void 0),c(this,"presetData",void 0),c(this,"instruments",void 0),c(this,"presets",void 0),c(this,"banks",void 0),!(g instanceof i.SF2Chunk)){var b=Object(n.parseBuffer)(g);g=new i.SF2Chunk(b)}if(g.subChunks.length!==3)throw new n.ParseError("Invalid sfbk structure","3 chunks","".concat(g.subChunks.length," chunks"));this.chunk=g,this.metaData=g.subChunks[0].getMetaData(),this.sampleData=g.subChunks[1].getSampleData(),this.presetData=g.subChunks[2].getPresetData(),this.samples=this.getSamples(),this.instruments=this.getInstruments(),this.presets=this.getPresets(),this.banks=this.getBanks()}return m(h,null,[{key:"from",value:function(g){return new h(g)}}]),m(h,[{key:"getKeyData",value:function(g){var b=this,w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return Object(s.memoize)((function(x,E,$){var O=b.banks[E];if(O){var K=O.presets[$];if(K){var G=K.zones.filter((function(wt){return b.isKeyInRange(wt,x)}));if(G.length>0){var J=!0,I=!1,H=void 0;try{for(var k,it=G[Symbol.iterator]();!(J=(k=it.next()).done);J=!0){var pt=k.value,tt=pt.instrument,Lt=tt.zones.filter((function(wt){return b.isKeyInRange(wt,x)}));if(Lt.length>0){var xt=!0,Q=!1,$t=void 0;try{for(var Rt,Vt=Lt[Symbol.iterator]();!(xt=(Rt=Vt.next()).done);xt=!0){var et=Rt.value,Ct=et.sample,ft=l({},pt.generators,et.generators),St=l({},pt.modulators,et.modulators);return{keyNumber:x,preset:K,instrument:tt,sample:Ct,generators:ft,modulators:St}}}catch(wt){Q=!0,$t=wt}finally{try{xt||Vt.return==null||Vt.return()}finally{if(Q)throw $t}}}}}catch(wt){I=!0,H=wt}finally{try{J||it.return==null||it.return()}finally{if(I)throw H}}}}}return null}))(g,w,_)}},{key:"isKeyInRange",value:function(g,b){return g.keyRange===void 0||g.keyRange.lo<=b&&g.keyRange.hi>=b}},{key:"getBanks",value:function(){return this.presets.reduce((function(g,b){var w=b.header.bank;return g[w]||(g[w]={presets:[]}),g[w].presets[b.header.preset]=b,g}),[])}},{key:"getPresets",value:function(){var g=this.presetData,b=g.presetHeaders,w=g.presetZones,_=g.presetGenerators,x=g.presetModulators;return Object(a.getItemsInZone)(b,w,x,_,this.instruments,r.GeneratorType.Instrument).filter((function(E){return E.header.name!=="EOP"})).map((function(E){return{header:E.header,globalZone:E.globalZone,zones:E.zones.map((function($){return{keyRange:$.keyRange,generators:$.generators,modulators:$.modulators,instrument:$.reference}}))}}))}},{key:"getInstruments",value:function(){var g=this.presetData,b=g.instrumentHeaders,w=g.instrumentZones,_=g.instrumentModulators,x=g.instrumentGenerators;return Object(a.getItemsInZone)(b,w,_,x,this.samples,r.GeneratorType.SampleId).filter((function(E){return E.header.name!=="EOI"})).map((function(E){return{header:E.header,globalZone:E.globalZone,zones:E.zones.map((function($){return{keyRange:$.keyRange,generators:$.generators,modulators:$.modulators,sample:$.reference}}))}}))}},{key:"getSamples",value:function(){var g=this;return this.presetData.sampleHeaders.filter((function(b){return b.name!=="EOS"})).map((function(b){if(b.name!=="EOS"&&b.sampleRate<=0)throw new Error("Illegal sample rate of ".concat(b.sampleRate," hz in sample '").concat(b.name,"'"));return b.originalPitch>=128&&b.originalPitch<=254&&(b.originalPitch=60),b.startLoop-=b.start,b.endLoop-=b.start,{header:b,data:new Int16Array(new Uint8Array(g.sampleData.subarray(2*b.start,2*b.end)).buffer)}}))}}]),h})()},"./src/types/bank.ts":function(t,e){},"./src/types/generator.ts":function(t,e,o){"use strict";var r,i;function n(s,l,u){return l in s?Object.defineProperty(s,l,{value:u,enumerable:!0,configurable:!0,writable:!0}):s[l]=u,s}o.r(e),o.d(e,"GeneratorType",(function(){return i})),o.d(e,"DEFAULT_GENERATOR_VALUES",(function(){return a})),(function(s){s[s.StartAddrsOffset=0]="StartAddrsOffset",s[s.EndAddrsOffset=1]="EndAddrsOffset",s[s.StartLoopAddrsOffset=2]="StartLoopAddrsOffset",s[s.EndLoopAddrsOffset=3]="EndLoopAddrsOffset",s[s.StartAddrsCoarseOffset=4]="StartAddrsCoarseOffset",s[s.ModLFOToPitch=5]="ModLFOToPitch",s[s.VibLFOToPitch=6]="VibLFOToPitch",s[s.ModEnvToPitch=7]="ModEnvToPitch",s[s.InitialFilterFc=8]="InitialFilterFc",s[s.InitialFilterQ=9]="InitialFilterQ",s[s.ModLFOToFilterFc=10]="ModLFOToFilterFc",s[s.ModEnvToFilterFc=11]="ModEnvToFilterFc",s[s.EndAddrsCoarseOffset=12]="EndAddrsCoarseOffset",s[s.ModLFOToVolume=13]="ModLFOToVolume",s[s.Unused1=14]="Unused1",s[s.ChorusEffectsSend=15]="ChorusEffectsSend",s[s.ReverbEffectsSend=16]="ReverbEffectsSend",s[s.Pan=17]="Pan",s[s.Unused2=18]="Unused2",s[s.Unused3=19]="Unused3",s[s.Unused4=20]="Unused4",s[s.DelayModLFO=21]="DelayModLFO",s[s.FreqModLFO=22]="FreqModLFO",s[s.DelayVibLFO=23]="DelayVibLFO",s[s.FreqVibLFO=24]="FreqVibLFO",s[s.DelayModEnv=25]="DelayModEnv",s[s.AttackModEnv=26]="AttackModEnv",s[s.HoldModEnv=27]="HoldModEnv",s[s.DecayModEnv=28]="DecayModEnv",s[s.SustainModEnv=29]="SustainModEnv",s[s.ReleaseModEnv=30]="ReleaseModEnv",s[s.KeyNumToModEnvHold=31]="KeyNumToModEnvHold",s[s.KeyNumToModEnvDecay=32]="KeyNumToModEnvDecay",s[s.DelayVolEnv=33]="DelayVolEnv",s[s.AttackVolEnv=34]="AttackVolEnv",s[s.HoldVolEnv=35]="HoldVolEnv",s[s.DecayVolEnv=36]="DecayVolEnv",s[s.SustainVolEnv=37]="SustainVolEnv",s[s.ReleaseVolEnv=38]="ReleaseVolEnv",s[s.KeyNumToVolEnvHold=39]="KeyNumToVolEnvHold",s[s.KeyNumToVolEnvDecay=40]="KeyNumToVolEnvDecay",s[s.Instrument=41]="Instrument",s[s.Reserved1=42]="Reserved1",s[s.KeyRange=43]="KeyRange",s[s.VelRange=44]="VelRange",s[s.StartLoopAddrsCoarseOffset=45]="StartLoopAddrsCoarseOffset",s[s.KeyNum=46]="KeyNum",s[s.Velocity=47]="Velocity",s[s.InitialAttenuation=48]="InitialAttenuation",s[s.Reserved2=49]="Reserved2",s[s.EndLoopAddrsCoarseOffset=50]="EndLoopAddrsCoarseOffset",s[s.CoarseTune=51]="CoarseTune",s[s.FineTune=52]="FineTune",s[s.SampleId=53]="SampleId",s[s.SampleModes=54]="SampleModes",s[s.Reserved3=55]="Reserved3",s[s.ScaleTuning=56]="ScaleTuning",s[s.ExclusiveClass=57]="ExclusiveClass",s[s.OverridingRootKey=58]="OverridingRootKey",s[s.Unused5=59]="Unused5",s[s.EndOper=60]="EndOper"})(i||(i={}));var a=(n(r={},i.StartAddrsOffset,0),n(r,i.EndAddrsOffset,0),n(r,i.StartLoopAddrsOffset,0),n(r,i.EndLoopAddrsOffset,0),n(r,i.StartAddrsCoarseOffset,0),n(r,i.ModLFOToPitch,0),n(r,i.VibLFOToPitch,0),n(r,i.ModEnvToPitch,0),n(r,i.InitialFilterFc,13500),n(r,i.InitialFilterQ,0),n(r,i.ModLFOToFilterFc,0),n(r,i.ModEnvToFilterFc,0),n(r,i.EndAddrsCoarseOffset,0),n(r,i.ModLFOToVolume,0),n(r,i.ChorusEffectsSend,0),n(r,i.ReverbEffectsSend,0),n(r,i.Pan,0),n(r,i.DelayModLFO,-12e3),n(r,i.FreqModLFO,0),n(r,i.DelayVibLFO,-12e3),n(r,i.FreqVibLFO,0),n(r,i.DelayModEnv,-12e3),n(r,i.AttackModEnv,-12e3),n(r,i.HoldModEnv,-12e3),n(r,i.DecayModEnv,-12e3),n(r,i.SustainModEnv,0),n(r,i.ReleaseModEnv,-12e3),n(r,i.KeyNumToModEnvHold,0),n(r,i.KeyNumToModEnvDecay,0),n(r,i.DelayVolEnv,-12e3),n(r,i.AttackVolEnv,-12e3),n(r,i.HoldVolEnv,-12e3),n(r,i.DecayVolEnv,-12e3),n(r,i.SustainVolEnv,0),n(r,i.ReleaseVolEnv,-12e3),n(r,i.KeyNumToVolEnvHold,0),n(r,i.KeyNumToVolEnvDecay,0),n(r,i.StartLoopAddrsCoarseOffset,0),n(r,i.KeyNum,-1),n(r,i.Velocity,-1),n(r,i.InitialAttenuation,0),n(r,i.EndLoopAddrsCoarseOffset,0),n(r,i.CoarseTune,0),n(r,i.FineTune,0),n(r,i.SampleModes,0),n(r,i.ScaleTuning,100),n(r,i.ExclusiveClass,0),n(r,i.OverridingRootKey,-1),r)},"./src/types/index.ts":function(t,e,o){"use strict";o.r(e);var r=o("./src/types/bank.ts");for(var i in r)["default"].indexOf(i)<0&&(function(g){o.d(e,g,(function(){return r[g]}))})(i);var n=o("./src/types/generator.ts");o.d(e,"GeneratorType",(function(){return n.GeneratorType})),o.d(e,"DEFAULT_GENERATOR_VALUES",(function(){return n.DEFAULT_GENERATOR_VALUES}));var a=o("./src/types/instrument.ts");for(var i in a)["default","GeneratorType","DEFAULT_GENERATOR_VALUES"].indexOf(i)<0&&(function(b){o.d(e,b,(function(){return a[b]}))})(i);var s=o("./src/types/key.ts");for(var i in s)["default","GeneratorType","DEFAULT_GENERATOR_VALUES"].indexOf(i)<0&&(function(b){o.d(e,b,(function(){return s[b]}))})(i);var l=o("./src/types/metaData.ts");for(var i in l)["default","GeneratorType","DEFAULT_GENERATOR_VALUES"].indexOf(i)<0&&(function(b){o.d(e,b,(function(){return l[b]}))})(i);var u=o("./src/types/modulator.ts");o.d(e,"ControllerType",(function(){return u.ControllerType})),o.d(e,"ControllerPolarity",(function(){return u.ControllerPolarity})),o.d(e,"ControllerDirection",(function(){return u.ControllerDirection})),o.d(e,"ControllerPalette",(function(){return u.ControllerPalette})),o.d(e,"Controller",(function(){return u.Controller})),o.d(e,"TransformType",(function(){return u.TransformType})),o.d(e,"DEFAULT_INSTRUMENT_MODULATORS",(function(){return u.DEFAULT_INSTRUMENT_MODULATORS}));var m=o("./src/types/preset.ts");for(var i in m)["default","GeneratorType","DEFAULT_GENERATOR_VALUES","ControllerType","ControllerPolarity","ControllerDirection","ControllerPalette","Controller","TransformType","DEFAULT_INSTRUMENT_MODULATORS"].indexOf(i)<0&&(function(b){o.d(e,b,(function(){return m[b]}))})(i);var c=o("./src/types/presetData.ts");for(var i in c)["default","GeneratorType","DEFAULT_GENERATOR_VALUES","ControllerType","ControllerPolarity","ControllerDirection","ControllerPalette","Controller","TransformType","DEFAULT_INSTRUMENT_MODULATORS"].indexOf(i)<0&&(function(b){o.d(e,b,(function(){return c[b]}))})(i);var f=o("./src/types/sample.ts");o.d(e,"SampleType",(function(){return f.SampleType}));var h=o("./src/types/zone.ts");for(var i in h)["default","GeneratorType","DEFAULT_GENERATOR_VALUES","ControllerType","ControllerPolarity","ControllerDirection","ControllerPalette","Controller","TransformType","DEFAULT_INSTRUMENT_MODULATORS","SampleType"].indexOf(i)<0&&(function(b){o.d(e,b,(function(){return h[b]}))})(i)},"./src/types/instrument.ts":function(t,e){},"./src/types/key.ts":function(t,e){},"./src/types/metaData.ts":function(t,e){},"./src/types/modulator.ts":function(t,e,o){"use strict";o.r(e),o.d(e,"ControllerType",(function(){return r})),o.d(e,"ControllerPolarity",(function(){return i})),o.d(e,"ControllerDirection",(function(){return n})),o.d(e,"ControllerPalette",(function(){return a})),o.d(e,"Controller",(function(){return s})),o.d(e,"TransformType",(function(){return l})),o.d(e,"DEFAULT_INSTRUMENT_MODULATORS",(function(){return m}));var r,i,n,a,s,l,u=o("./src/types/generator.ts");(function(c){c[c.Linear=0]="Linear",c[c.Concave=1]="Concave",c[c.Convex=2]="Convex",c[c.Switch=3]="Switch"})(r||(r={})),(function(c){c[c.Unipolar=0]="Unipolar",c[c.Bipolar=1]="Bipolar"})(i||(i={})),(function(c){c[c.Increasing=0]="Increasing",c[c.Decreasing=1]="Decreasing"})(n||(n={})),(function(c){c[c.GeneralController=0]="GeneralController",c[c.MidiController=1]="MidiController"})(a||(a={})),(function(c){c[c.NoController=0]="NoController",c[c.NoteOnVelocity=2]="NoteOnVelocity",c[c.NoteOnKeyNumber=3]="NoteOnKeyNumber",c[c.PolyPressure=10]="PolyPressure",c[c.ChannelPressure=13]="ChannelPressure",c[c.PitchWheel=14]="PitchWheel",c[c.PitchWheelSensitivity=16]="PitchWheelSensitivity",c[c.Link=127]="Link"})(s||(s={})),(function(c){c[c.Linear=0]="Linear",c[c.Absolute=2]="Absolute"})(l||(l={}));var m=[{id:u.GeneratorType.InitialAttenuation,source:{type:r.Concave,polarity:i.Unipolar,direction:n.Decreasing,palette:a.GeneralController,index:s.NoteOnVelocity},value:960,valueSource:{type:r.Linear,polarity:i.Unipolar,direction:n.Increasing,palette:a.GeneralController,index:s.NoController},transform:l.Linear},{id:u.GeneratorType.InitialFilterFc,source:{type:r.Linear,polarity:i.Unipolar,direction:n.Decreasing,palette:a.GeneralController,index:s.NoteOnVelocity},value:-2400,valueSource:{type:r.Linear,polarity:i.Unipolar,direction:n.Increasing,palette:a.GeneralController,index:s.NoController},transform:l.Linear},{id:u.GeneratorType.VibLFOToPitch,source:{type:r.Linear,polarity:i.Unipolar,direction:n.Increasing,palette:a.GeneralController,index:s.ChannelPressure},value:50,valueSource:{type:r.Linear,polarity:i.Unipolar,direction:n.Increasing,palette:a.GeneralController,index:s.NoController},transform:l.Linear},{id:u.GeneratorType.VibLFOToPitch,source:{type:r.Linear,polarity:i.Unipolar,direction:n.Increasing,palette:a.MidiController,index:1},value:50,valueSource:{type:r.Linear,polarity:i.Unipolar,direction:n.Increasing,palette:a.GeneralController,index:s.NoController},transform:l.Linear},{id:u.GeneratorType.InitialAttenuation,source:{type:r.Concave,polarity:i.Unipolar,direction:n.Decreasing,palette:a.MidiController,index:7},value:960,valueSource:{type:r.Linear,polarity:i.Unipolar,direction:n.Increasing,palette:a.GeneralController,index:s.NoController},transform:l.Linear},{id:u.GeneratorType.InitialAttenuation,source:{type:r.Linear,polarity:i.Bipolar,direction:n.Increasing,palette:a.MidiController,index:10},value:1e3,valueSource:{type:r.Linear,polarity:i.Unipolar,direction:n.Increasing,palette:a.GeneralController,index:s.NoController},transform:l.Linear},{id:u.GeneratorType.InitialAttenuation,source:{type:r.Concave,polarity:i.Unipolar,direction:n.Decreasing,palette:a.MidiController,index:11},value:960,valueSource:{type:r.Linear,polarity:i.Unipolar,direction:n.Increasing,palette:a.GeneralController,index:s.NoController},transform:l.Linear},{id:u.GeneratorType.ReverbEffectsSend,source:{type:r.Linear,polarity:i.Unipolar,direction:n.Increasing,palette:a.MidiController,index:91},value:200,valueSource:{type:r.Linear,polarity:i.Unipolar,direction:n.Increasing,palette:a.GeneralController,index:s.NoController},transform:l.Linear},{id:u.GeneratorType.ChorusEffectsSend,source:{type:r.Linear,polarity:i.Unipolar,direction:n.Increasing,palette:a.MidiController,index:93},value:200,valueSource:{type:r.Linear,polarity:i.Unipolar,direction:n.Increasing,palette:a.GeneralController,index:s.NoController},transform:l.Linear},{id:u.GeneratorType.CoarseTune,source:{type:r.Linear,polarity:i.Bipolar,direction:n.Increasing,palette:a.GeneralController,index:s.PitchWheel},value:12700,valueSource:{type:r.Linear,polarity:i.Unipolar,direction:n.Increasing,palette:a.GeneralController,index:s.PitchWheelSensitivity},transform:l.Linear}]},"./src/types/preset.ts":function(t,e){},"./src/types/presetData.ts":function(t,e){},"./src/types/sample.ts":function(t,e,o){"use strict";var r;o.r(e),o.d(e,"SampleType",(function(){return r})),(function(i){i[i.EOS=0]="EOS",i[i.Mono=1]="Mono",i[i.Right=2]="Right",i[i.Left=4]="Left",i[i.Linked=8]="Linked",i[i.RomMono=32769]="RomMono",i[i.RomRight=32770]="RomRight",i[i.RomLeft=32772]="RomLeft",i[i.RomLinked=32776]="RomLinked"})(r||(r={}))},"./src/types/zone.ts":function(t,e){},"./src/utils/buffer.ts":function(t,e,o){"use strict";o.r(e),o.d(e,"getStringFromBuffer",(function(){return r}));var r=function(i){var n=new TextDecoder("utf8").decode(i),a=n.indexOf("\0");return(a===-1?n:n.slice(0,a)).trim()}},"./src/utils/index.ts":function(t,e,o){"use strict";o.r(e);var r=o("./src/utils/buffer.ts");o.d(e,"getStringFromBuffer",(function(){return r.getStringFromBuffer}));var i=o("./src/utils/memoize.ts");o.d(e,"memoize",(function(){return i.memoize}))},"./src/utils/memoize.ts":function(t,e,o){"use strict";o.r(e),o.d(e,"memoize",(function(){return r}));var r=function(i){var n={};return function(){for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];var u=JSON.stringify(s);if(u in n)return n[u];var m=i.apply(void 0,s);return n[u]=m,m}}}})}))});var Pn=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],Tn=64,Mn=66,Ws=67,Qu=123,st={onKeyPress:null,onKeyRelease:null,onPitchClassOn:null,onPitchClassOff:null,onControlChange:null,onSustainPedal:null,onSostenutoPedal:null,onReset:null,onConnectionChange:null,get browserHasMidiSupport(){return!!navigator.requestMIDIAccess},queryMidiAccess(t=null){return this.browserHasMidiSupport?(navigator.permissions.query({name:"midi",sysex:!1}).then(e=>{switch(e.state){case"granted":t?.("granted");break;case"prompt":t?.("prompt");break;default:t?.("denied")}}),!0):(t?.("unavailable"),!1)},requestMidiAccess(t,e=null){if(!this.browserHasMidiSupport){e?.();return}navigator.requestMIDIAccess({sysex:!1}).then(t,e)},requestInputPortList(t,e){if(!this.browserHasMidiSupport){e?.();return}navigator.requestMIDIAccess({sysex:!1}).then(o=>{let r=[];if(o.inputs.size>0)for(let i of o.inputs.values())r.push(i);t(r)},e)},connect(t,e=null,o=Pn){this.browserHasMidiSupport&&(this.disconnect(),t.open().then(()=>{T.dev=t,t.addEventListener("midimessage",si),e?.(t),this.onConnectionChange?.(!0,t)}),T.channels=Array.from(o))},connectByPortName(t,e=null,o=Pn){this.browserHasMidiSupport&&this.requestInputPortList(r=>{for(let i of r)i.name==t&&(this.disconnect(),i.open().then(n=>{T.dev=n,n.addEventListener("midimessage",si),e?.(n),this.onConnectionChange?.(!0,n)}),T.channels=Array.from(o))})},connectByPortId(t,e=null,o=Pn){this.browserHasMidiSupport&&this.requestInputPortList(r=>{for(let i of r)i.id==t&&(this.disconnect(),i.open().then(n=>{T.dev=n,n.addEventListener("midimessage",si),e?.(n),this.onConnectionChange?.(!0,n)}),T.channels=Array.from(o))})},disconnect(){if(!this.browserHasMidiSupport)return;let t=T.dev;t&&(T.dev.removeEventListener("midimessage",si),t.removeEventListener("statechange",Ju),T.dev.close(),T.dev=null,T.channels=[],T.reset(),this.onConnectionChange(!1,t))},getConnectedPort(){return this.browserHasMidiSupport&&T.dev?.state=="connected"?T.dev:null},isKeyPressed(t){return t<0||t>127?!1:T.keys[t]},isNoteOn(t,e="none"){if(t<0||t>127)return!1;switch(e){case"sustain":return this.isKeyPressed(t)||T.sustain[t];case"sostenuto":return this.isKeyPressed(t)||T.sostenuto[t];case"both":return this.isKeyPressed(t)||T.sustain[t]||T.sostenuto[t];default:return this.isKeyPressed(t)}},isPitchClassOn(t,e="none"){for(let o=t;o<128;o+=12)if(this.isNoteOn(o,e))return!0;return!1},getLastControlValue(t){return T.cc[t]},reset(){T.reset()},setPedalThreshold(t){T.pedals.threshold=t},get sustain_pressed(){return T.pedals.sustain},get sostenuto_pressed(){return T.pedals.sostenuto},get soft_pressed(){return T.pedals.soft},get sustain_pedal_value(){return T.cc[Tn]},get sostenuto_pedal_value(){return T.cc[Mn]},get soft_pedal_value(){return T.cc[Ws]}};function Ju(t){t.port.state=="disconnected"&&T.dev==t.port&&(T.dev=null),st.onConnectionChange?.(t.port.state=="connected",t.port)}var T={dev:null,channels:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],cc:Array(128).fill(0),keys:Array(128).fill(null),pcs:Array(12).fill(0),sustain:Array(128).fill(!1),sostenuto:Array(128).fill(!1),pedals:{threshold:64,get sustain(){return T.cc[Tn]>=this.threshold},get sostenuto(){return T.cc[Mn]>=this.threshold},get soft(){return T.cc[Ws]>=this.threshold}},last_event_timestamp:0,last_event_time_delta:0,reset(){this.cc=Array(128).fill(0),this.keys=Array(128).fill(!1),this.pcs=Array(12).fill(0),this.sustain=Array(128).fill(!1),this.sostenuto=Array(128).fill(!1)}};function si(t){T.last_event_time_delta=t.timeStamp-T.last_event_timestamp,T.last_event_timestamp=t.timeStamp;for(let e of T.channels)switch(t.data[0]){case 144+e:td(t.data[1],t.data[2]);break;case 128+e:qs(t.data[1],t.data[2]);break;case 176+e:rd(t.data[1],t.data[2])}}function td(t,e){let o=t%12;T.keys[t]||(T.keys[t]=Date.now(),T.pcs[o]+=1),T.pedals.sustain&&(T.sustain[t]=!0),st.onKeyPress?.(t,e),T.pcs[o]==1&&st.onPitchClassOn?.(o)}function qs(t,e){let o=t%12,r=0;T.keys[t]&&(r=Date.now()-T.keys[t],T.keys[t]=null,T.pcs[o]-=1),st.onKeyRelease?.(t,e,r),T.pcs[o]==0&&st.onPitchClassOff?.(o)}function ed(t){let e=t>=T.pedals.threshold;if(T.pedals.sustain!=e)if(e){for(let o=0;o<128;o++)T.sustain[o]=T.keys[o]||T.sostenuto[o];st.onSustainPedal?.(e,t)}else{for(let o=0;o<128;o++)T.sustain[o]=!1;st.onSustainPedal?.(e,t)}}function od(t){if(!T.pedals.sostenuto&&t>=T.pedals.threshold){for(let e=0;e<128;e++)T.sostenuto[e]=T.keys[e];st.onSostenutoPedal?.(T.pedals.sostenuto,t)}else if(T.pedals.sostenuto&&t<T.pedals.threshold){for(let e=0;e<128;e++)T.sostenuto[e]=!1;st.onSostenutoPedal?.(T.pedals.sostenuto,t)}}function rd(t,e){t==Mn&&od(e),t==Tn&&ed(e),t==Qu&&id(),T.cc[t]=e,st.onControlChange?.(t,e)}function id(){for(let t=0;t<128;t++)qs(t)}function to(t){let o={c:0,"c#":1,db:1,d:2,"d#":3,eb:3,e:4,fb:4,"e#":5,f:5,"f#":6,gb:6,g:7,"g#":8,ab:8,a:9,"a#":10,bb:10,b:11,"b#":12,cb:-1}[t.slice(0,t.length-1).toLowerCase()],r=parseInt(t.slice(t.length-1));return o+12*(r+1)}function Zs(t,e=440){return 2**((t-69)/12)*e}var vr=st;var ai=t=>{var e;let{activeElement:o}=document;o&&t.contains(o)&&((e=document.activeElement)==null||e.blur())};var li=globalThis,ci=li.ShadowRoot&&(li.ShadyCSS===void 0||li.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Ln=Symbol(),Xs=new WeakMap,_r=class{constructor(e,o,r){if(this._$cssResult$=!0,r!==Ln)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=o}get styleSheet(){let e=this.o,o=this.t;if(ci&&e===void 0){let r=o!==void 0&&o.length===1;r&&(e=Xs.get(o)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&Xs.set(o,e))}return e}toString(){return this.cssText}},Ys=t=>new _r(typeof t=="string"?t:t+"",void 0,Ln),W=(t,...e)=>{let o=t.length===1?t[0]:e.reduce(((r,i,n)=>r+(a=>{if(a._$cssResult$===!0)return a.cssText;if(typeof a=="number")return a;throw Error("Value passed to 'css' function must be a 'css' function result: "+a+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[n+1]),t[0]);return new _r(o,t,Ln)},$n=(t,e)=>{if(ci)t.adoptedStyleSheets=e.map((o=>o instanceof CSSStyleSheet?o:o.styleSheet));else for(let o of e){let r=document.createElement("style"),i=li.litNonce;i!==void 0&&r.setAttribute("nonce",i),r.textContent=o.cssText,t.appendChild(r)}},ui=ci?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let o="";for(let r of e.cssRules)o+=r.cssText;return Ys(o)})(t):t;var{is:nd,defineProperty:sd,getOwnPropertyDescriptor:ad,getOwnPropertyNames:ld,getOwnPropertySymbols:cd,getPrototypeOf:ud}=Object,di=globalThis,Qs=di.trustedTypes,dd=Qs?Qs.emptyScript:"",hd=di.reactiveElementPolyfillSupport,wr=(t,e)=>t,eo={toAttribute(t,e){switch(e){case Boolean:t=t?dd:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let o=t;switch(e){case Boolean:o=t!==null;break;case Number:o=t===null?null:Number(t);break;case Object:case Array:try{o=JSON.parse(t)}catch{o=null}}return o}},hi=(t,e)=>!nd(t,e),Js={attribute:!0,type:String,converter:eo,reflect:!1,hasChanged:hi};Symbol.metadata??=Symbol("metadata"),di.litPropertyMetadata??=new WeakMap;var Ge=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,o=Js){if(o.state&&(o.attribute=!1),this._$Ei(),this.elementProperties.set(e,o),!o.noAccessor){let r=Symbol(),i=this.getPropertyDescriptor(e,r,o);i!==void 0&&sd(this.prototype,e,i)}}static getPropertyDescriptor(e,o,r){let{get:i,set:n}=ad(this.prototype,e)??{get(){return this[o]},set(a){this[o]=a}};return{get(){return i?.call(this)},set(a){let s=i?.call(this);n.call(this,a),this.requestUpdate(e,s,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??Js}static _$Ei(){if(this.hasOwnProperty(wr("elementProperties")))return;let e=ud(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(wr("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(wr("properties"))){let o=this.properties,r=[...ld(o),...cd(o)];for(let i of r)this.createProperty(i,o[i])}let e=this[Symbol.metadata];if(e!==null){let o=litPropertyMetadata.get(e);if(o!==void 0)for(let[r,i]of o)this.elementProperties.set(r,i)}this._$Eh=new Map;for(let[o,r]of this.elementProperties){let i=this._$Eu(o,r);i!==void 0&&this._$Eh.set(i,o)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){let o=[];if(Array.isArray(e)){let r=new Set(e.flat(1/0).reverse());for(let i of r)o.unshift(ui(i))}else e!==void 0&&o.push(ui(e));return o}static _$Eu(e,o){let r=o.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((e=>e(this)))}addController(e){(this._$EO??=new Set).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){let e=new Map,o=this.constructor.elementProperties;for(let r of o.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){let e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return $n(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((e=>e.hostConnected?.()))}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach((e=>e.hostDisconnected?.()))}attributeChangedCallback(e,o,r){this._$AK(e,r)}_$EC(e,o){let r=this.constructor.elementProperties.get(e),i=this.constructor._$Eu(e,r);if(i!==void 0&&r.reflect===!0){let n=(r.converter?.toAttribute!==void 0?r.converter:eo).toAttribute(o,r.type);this._$Em=e,n==null?this.removeAttribute(i):this.setAttribute(i,n),this._$Em=null}}_$AK(e,o){let r=this.constructor,i=r._$Eh.get(e);if(i!==void 0&&this._$Em!==i){let n=r.getPropertyOptions(i),a=typeof n.converter=="function"?{fromAttribute:n.converter}:n.converter?.fromAttribute!==void 0?n.converter:eo;this._$Em=i,this[i]=a.fromAttribute(o,n.type),this._$Em=null}}requestUpdate(e,o,r){if(e!==void 0){if(r??=this.constructor.getPropertyOptions(e),!(r.hasChanged??hi)(this[e],o))return;this.P(e,o,r)}this.isUpdatePending===!1&&(this._$ES=this._$ET())}P(e,o,r){this._$AL.has(e)||this._$AL.set(e,o),r.reflect===!0&&this._$Em!==e&&(this._$Ej??=new Set).add(e)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(o){Promise.reject(o)}let e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(let[i,n]of this._$Ep)this[i]=n;this._$Ep=void 0}let r=this.constructor.elementProperties;if(r.size>0)for(let[i,n]of r)n.wrapped!==!0||this._$AL.has(i)||this[i]===void 0||this.P(i,this[i],n)}let e=!1,o=this._$AL;try{e=this.shouldUpdate(o),e?(this.willUpdate(o),this._$EO?.forEach((r=>r.hostUpdate?.())),this.update(o)):this._$EU()}catch(r){throw e=!1,this._$EU(),r}e&&this._$AE(o)}willUpdate(e){}_$AE(e){this._$EO?.forEach((o=>o.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Ej&&=this._$Ej.forEach((o=>this._$EC(o,this[o]))),this._$EU()}updated(e){}firstUpdated(e){}};Ge.elementStyles=[],Ge.shadowRootOptions={mode:"open"},Ge[wr("elementProperties")]=new Map,Ge[wr("finalized")]=new Map,hd?.({ReactiveElement:Ge}),(di.reactiveElementVersions??=[]).push("2.0.4");var On=globalThis,pi=On.trustedTypes,ta=pi?pi.createPolicy("lit-html",{createHTML:t=>t}):void 0,In="$lit$",Ue=`lit$${Math.random().toFixed(9).slice(2)}$`,Rn="?"+Ue,pd=`<${Rn}>`,So=document,xr=()=>So.createComment(""),Sr=t=>t===null||typeof t!="object"&&typeof t!="function",Bn=Array.isArray,sa=t=>Bn(t)||typeof t?.[Symbol.iterator]=="function",Dn=`[ 	
\f\r]`,kr=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,ea=/-->/g,oa=/>/g,ko=RegExp(`>|${Dn}(?:([^\\s"'>=/]+)(${Dn}*=${Dn}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),ra=/'/g,ia=/"/g,aa=/^(?:script|style|textarea|title)$/i,Fn=t=>(e,...o)=>({_$litType$:t,strings:e,values:o}),R=Fn(1),la=Fn(2),ca=Fn(3),Ut=Symbol.for("lit-noChange"),_t=Symbol.for("lit-nothing"),na=new WeakMap,xo=So.createTreeWalker(So,129);function ua(t,e){if(!Bn(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return ta!==void 0?ta.createHTML(e):e}var da=(t,e)=>{let o=t.length-1,r=[],i,n=e===2?"<svg>":e===3?"<math>":"",a=kr;for(let s=0;s<o;s++){let l=t[s],u,m,c=-1,f=0;for(;f<l.length&&(a.lastIndex=f,m=a.exec(l),m!==null);)f=a.lastIndex,a===kr?m[1]==="!--"?a=ea:m[1]!==void 0?a=oa:m[2]!==void 0?(aa.test(m[2])&&(i=RegExp("</"+m[2],"g")),a=ko):m[3]!==void 0&&(a=ko):a===ko?m[0]===">"?(a=i??kr,c=-1):m[1]===void 0?c=-2:(c=a.lastIndex-m[2].length,u=m[1],a=m[3]===void 0?ko:m[3]==='"'?ia:ra):a===ia||a===ra?a=ko:a===ea||a===oa?a=kr:(a=ko,i=void 0);let h=a===ko&&t[s+1].startsWith("/>")?" ":"";n+=a===kr?l+pd:c>=0?(r.push(u),l.slice(0,c)+In+l.slice(c)+Ue+h):l+Ue+(c===-2?s:h)}return[ua(t,n+(t[o]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]},Er=class t{constructor({strings:e,_$litType$:o},r){let i;this.parts=[];let n=0,a=0,s=e.length-1,l=this.parts,[u,m]=da(e,o);if(this.el=t.createElement(u,r),xo.currentNode=this.el.content,o===2||o===3){let c=this.el.content.firstChild;c.replaceWith(...c.childNodes)}for(;(i=xo.nextNode())!==null&&l.length<s;){if(i.nodeType===1){if(i.hasAttributes())for(let c of i.getAttributeNames())if(c.endsWith(In)){let f=m[a++],h=i.getAttribute(c).split(Ue),g=/([.?@])?(.*)/.exec(f);l.push({type:1,index:n,name:g[2],strings:h,ctor:g[1]==="."?mi:g[1]==="?"?gi:g[1]==="@"?bi:Co}),i.removeAttribute(c)}else c.startsWith(Ue)&&(l.push({type:6,index:n}),i.removeAttribute(c));if(aa.test(i.tagName)){let c=i.textContent.split(Ue),f=c.length-1;if(f>0){i.textContent=pi?pi.emptyScript:"";for(let h=0;h<f;h++)i.append(c[h],xr()),xo.nextNode(),l.push({type:2,index:++n});i.append(c[f],xr())}}}else if(i.nodeType===8)if(i.data===Rn)l.push({type:2,index:n});else{let c=-1;for(;(c=i.data.indexOf(Ue,c+1))!==-1;)l.push({type:7,index:n}),c+=Ue.length-1}n++}}static createElement(e,o){let r=So.createElement("template");return r.innerHTML=e,r}};function Eo(t,e,o=t,r){if(e===Ut)return e;let i=r!==void 0?o._$Co?.[r]:o._$Cl,n=Sr(e)?void 0:e._$litDirective$;return i?.constructor!==n&&(i?._$AO?.(!1),n===void 0?i=void 0:(i=new n(t),i._$AT(t,o,r)),r!==void 0?(o._$Co??=[])[r]=i:o._$Cl=i),i!==void 0&&(e=Eo(t,i._$AS(t,e.values),i,r)),e}var fi=class{constructor(e,o){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=o}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){let{el:{content:o},parts:r}=this._$AD,i=(e?.creationScope??So).importNode(o,!0);xo.currentNode=i;let n=xo.nextNode(),a=0,s=0,l=r[0];for(;l!==void 0;){if(a===l.index){let u;l.type===2?u=new Wo(n,n.nextSibling,this,e):l.type===1?u=new l.ctor(n,l.name,l.strings,this,e):l.type===6&&(u=new yi(n,this,e)),this._$AV.push(u),l=r[++s]}a!==l?.index&&(n=xo.nextNode(),a++)}return xo.currentNode=So,i}p(e){let o=0;for(let r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,o),o+=r.strings.length-2):r._$AI(e[o])),o++}},Wo=class t{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,o,r,i){this.type=2,this._$AH=_t,this._$AN=void 0,this._$AA=e,this._$AB=o,this._$AM=r,this.options=i,this._$Cv=i?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode,o=this._$AM;return o!==void 0&&e?.nodeType===11&&(e=o.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,o=this){e=Eo(this,e,o),Sr(e)?e===_t||e==null||e===""?(this._$AH!==_t&&this._$AR(),this._$AH=_t):e!==this._$AH&&e!==Ut&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):sa(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==_t&&Sr(this._$AH)?this._$AA.nextSibling.data=e:this.T(So.createTextNode(e)),this._$AH=e}$(e){let{values:o,_$litType$:r}=e,i=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=Er.createElement(ua(r.h,r.h[0]),this.options)),r);if(this._$AH?._$AD===i)this._$AH.p(o);else{let n=new fi(i,this),a=n.u(this.options);n.p(o),this.T(a),this._$AH=n}}_$AC(e){let o=na.get(e.strings);return o===void 0&&na.set(e.strings,o=new Er(e)),o}k(e){Bn(this._$AH)||(this._$AH=[],this._$AR());let o=this._$AH,r,i=0;for(let n of e)i===o.length?o.push(r=new t(this.O(xr()),this.O(xr()),this,this.options)):r=o[i],r._$AI(n),i++;i<o.length&&(this._$AR(r&&r._$AB.nextSibling,i),o.length=i)}_$AR(e=this._$AA.nextSibling,o){for(this._$AP?.(!1,!0,o);e&&e!==this._$AB;){let r=e.nextSibling;e.remove(),e=r}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}},Co=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,o,r,i,n){this.type=1,this._$AH=_t,this._$AN=void 0,this.element=e,this.name=o,this._$AM=i,this.options=n,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=_t}_$AI(e,o=this,r,i){let n=this.strings,a=!1;if(n===void 0)e=Eo(this,e,o,0),a=!Sr(e)||e!==this._$AH&&e!==Ut,a&&(this._$AH=e);else{let s=e,l,u;for(e=n[0],l=0;l<n.length-1;l++)u=Eo(this,s[r+l],o,l),u===Ut&&(u=this._$AH[l]),a||=!Sr(u)||u!==this._$AH[l],u===_t?e=_t:e!==_t&&(e+=(u??"")+n[l+1]),this._$AH[l]=u}a&&!i&&this.j(e)}j(e){e===_t?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}},mi=class extends Co{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===_t?void 0:e}},gi=class extends Co{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==_t)}},bi=class extends Co{constructor(e,o,r,i,n){super(e,o,r,i,n),this.type=5}_$AI(e,o=this){if((e=Eo(this,e,o,0)??_t)===Ut)return;let r=this._$AH,i=e===_t&&r!==_t||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,n=e!==_t&&(r===_t||i);i&&this.element.removeEventListener(this.name,this,r),n&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}},yi=class{constructor(e,o,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=o,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){Eo(this,e)}},ha={M:In,P:Ue,A:Rn,C:1,L:da,R:fi,D:sa,V:Eo,I:Wo,H:Co,N:gi,U:bi,B:mi,F:yi},fd=On.litHtmlPolyfillSupport;fd?.(Er,Wo),(On.litHtmlVersions??=[]).push("3.2.1");var pa=(t,e,o)=>{let r=o?.renderBefore??e,i=r._$litPart$;if(i===void 0){let n=o?.renderBefore??null;r._$litPart$=i=new Wo(e.insertBefore(xr(),n),n,void 0,o??{})}return i._$AI(t),i};var oo=class extends Ge{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){let e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){let o=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=pa(o,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return Ut}};oo._$litElement$=!0,oo.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:oo});var md=globalThis.litElementPolyfillSupport;md?.({LitElement:oo});(globalThis.litElementVersions??=[]).push("4.1.1");var fa=W` :host { display: inline-block; color: var(--sl-color-neutral-600); } .icon-button { flex: 0 0 auto; display: flex; align-items: center; background: none; border: none; border-radius: var(--sl-border-radius-medium); font-size: inherit; color: inherit; padding: var(--sl-spacing-x-small); cursor: pointer; transition: var(--sl-transition-x-fast) color; -webkit-appearance: none; } .icon-button:hover:not(.icon-button--disabled), .icon-button:focus-visible:not(.icon-button--disabled) { color: var(--sl-color-primary-600); } .icon-button:active:not(.icon-button--disabled) { color: var(--sl-color-primary-700); } .icon-button:focus { outline: none; } .icon-button--disabled { opacity: 0.5; cursor: not-allowed; } .icon-button:focus-visible { outline: var(--sl-focus-ring); outline-offset: var(--sl-focus-ring-offset); } .icon-button__icon { pointer-events: none; } `;var zn="";function Cr(t){zn=t}function Nn(t=""){if(!zn){let e=[...document.getElementsByTagName("script")],o=e.find(r=>r.hasAttribute("data-shoelace"));if(o)Cr(o.getAttribute("data-shoelace"));else{let r=e.find(n=>/shoelace(\.min)?\.js($|\?)/.test(n.src)||/shoelace-autoloader(\.min)?\.js($|\?)/.test(n.src)),i="";r&&(i=r.getAttribute("src")),Cr(i.split("/").slice(0,-1).join("/"))}}return zn.replace(/\/$/,"")+(t?`/${t.replace(/^\//,"")}`:"")}var gd={name:"default",resolver:t=>Nn(`assets/icons/${t}.svg`)},ma=gd;var ga={caret:`
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <polyline points="6 9 12 15 18 9"></polyline>
    </svg>
  `,check:`
    <svg part="checked-icon" class="checkbox__icon" viewBox="0 0 16 16">
      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round">
        <g stroke="currentColor">
          <g transform="translate(3.428571, 3.428571)">
            <path d="M0,5.71428571 L3.42857143,9.14285714"></path>
            <path d="M9.14285714,0 L3.42857143,9.14285714"></path>
          </g>
        </g>
      </g>
    </svg>
  `,"chevron-down":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-down" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
    </svg>
  `,"chevron-left":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-left" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/>
    </svg>
  `,"chevron-right":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/>
    </svg>
  `,copy:`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-copy" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V2Zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H6ZM2 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1h1v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1v1H2Z"/>
    </svg>
  `,eye:`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16">
      <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"/>
      <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"/>
    </svg>
  `,"eye-slash":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye-slash" viewBox="0 0 16 16">
      <path d="M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7.028 7.028 0 0 0-2.79.588l.77.771A5.944 5.944 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.134 13.134 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755-.165.165-.337.328-.517.486l.708.709z"/>
      <path d="M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829l.822.822zm-2.943 1.299.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829z"/>
      <path d="M3.35 5.47c-.18.16-.353.322-.518.487A13.134 13.134 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7.029 7.029 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.709zm10.296 8.884-12-12 .708-.708 12 12-.708.708z"/>
    </svg>
  `,eyedropper:`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eyedropper" viewBox="0 0 16 16">
      <path d="M13.354.646a1.207 1.207 0 0 0-1.708 0L8.5 3.793l-.646-.647a.5.5 0 1 0-.708.708L8.293 5l-7.147 7.146A.5.5 0 0 0 1 12.5v1.793l-.854.853a.5.5 0 1 0 .708.707L1.707 15H3.5a.5.5 0 0 0 .354-.146L11 7.707l1.146 1.147a.5.5 0 0 0 .708-.708l-.647-.646 3.147-3.146a1.207 1.207 0 0 0 0-1.708l-2-2zM2 12.707l7-7L10.293 7l-7 7H2v-1.293z"></path>
    </svg>
  `,"grip-vertical":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-grip-vertical" viewBox="0 0 16 16">
      <path d="M7 2a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"></path>
    </svg>
  `,indeterminate:`
    <svg part="indeterminate-icon" class="checkbox__icon" viewBox="0 0 16 16">
      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round">
        <g stroke="currentColor" stroke-width="2">
          <g transform="translate(2.285714, 6.857143)">
            <path d="M10.2857143,1.14285714 L1.14285714,1.14285714"></path>
          </g>
        </g>
      </g>
    </svg>
  `,"person-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-fill" viewBox="0 0 16 16">
      <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
    </svg>
  `,"play-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-play-fill" viewBox="0 0 16 16">
      <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"></path>
    </svg>
  `,"pause-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pause-fill" viewBox="0 0 16 16">
      <path d="M5.5 3.5A1.5 1.5 0 0 1 7 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5zm5 0A1.5 1.5 0 0 1 12 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5z"></path>
    </svg>
  `,radio:`
    <svg part="checked-icon" class="radio__icon" viewBox="0 0 16 16">
      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g fill="currentColor">
          <circle cx="8" cy="8" r="3.42857143"></circle>
        </g>
      </g>
    </svg>
  `,"star-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star-fill" viewBox="0 0 16 16">
      <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
    </svg>
  `,"x-lg":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
      <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/>
    </svg>
  `,"x-circle-fill":`
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle-fill" viewBox="0 0 16 16">
      <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"></path>
    </svg>
  `},bd={name:"system",resolver:t=>t in ga?`data:image/svg+xml,${encodeURIComponent(ga[t])}`:""},ba=bd;var yd=[ma,ba],Hn=[];function ya(t){Hn.push(t)}function va(t){Hn=Hn.filter(e=>e!==t)}function Vn(t){return yd.find(e=>e.name===t)}var _a=W` :host { display: inline-block; width: 1em; height: 1em; box-sizing: content-box !important; } svg { display: block; height: 100%; width: 100%; } `;var xa=Object.defineProperty,vd=Object.defineProperties,_d=Object.getOwnPropertyDescriptor,wd=Object.getOwnPropertyDescriptors,wa=Object.getOwnPropertySymbols,kd=Object.prototype.hasOwnProperty,xd=Object.prototype.propertyIsEnumerable,Gn=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),Un=t=>{throw TypeError(t)},ka=(t,e,o)=>e in t?xa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,ce=(t,e)=>{for(var o in e||(e={}))kd.call(e,o)&&ka(t,o,e[o]);if(wa)for(var o of wa(e))xd.call(e,o)&&ka(t,o,e[o]);return t},ro=(t,e)=>vd(t,wd(e)),p=(t,e,o,r)=>{for(var i=r>1?void 0:r?_d(e,o):e,n=t.length-1,a;n>=0;n--)(a=t[n])&&(i=(r?a(e,o,i):a(i))||i);return r&&i&&xa(e,o,i),i},Sa=(t,e,o)=>e.has(t)||Un("Cannot "+o),Ea=(t,e,o)=>(Sa(t,e,"read from private field"),o?o.call(t):e.get(t)),Ca=(t,e,o)=>e.has(t)?Un("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,o),Aa=(t,e,o,r)=>(Sa(t,e,"write to private field"),r?r.call(t,o):e.set(t,o),o),Sd=function(t,e){this[0]=t,this[1]=e},Pa=t=>{var e=t[Gn("asyncIterator")],o=!1,r,i={};return e==null?(e=t[Gn("iterator")](),r=n=>i[n]=a=>e[n](a)):(e=e.call(t),r=n=>i[n]=a=>{if(o){if(o=!1,n==="throw")throw a;return a}return o=!0,{done:!1,value:new Sd(new Promise(s=>{var l=e[n](a);l instanceof Object||Un("Object expected"),s(l)}),1)}}),i[Gn("iterator")]=()=>i,r("next"),"throw"in e?r("throw"):i.throw=n=>{throw n},"return"in e&&r("return"),i};function dt(t,e){let o=ce({waitUntilFirstUpdate:!1},e);return(r,i)=>{let{update:n}=r,a=Array.isArray(t)?t:[t];r.update=function(s){a.forEach(l=>{let u=l;if(s.has(u)){let m=s.get(u),c=this[u];m!==c&&(!o.waitUntilFirstUpdate||this.hasUpdated)&&this[i](m,c)}}),n.call(this,s)}}}var ot=W` :host { box-sizing: border-box; } :host *, :host *::before, :host *::after { box-sizing: inherit; } [hidden] { display: none !important; } `;var Ed={attribute:!0,type:String,converter:eo,reflect:!1,hasChanged:hi},Cd=(t=Ed,e,o)=>{let{kind:r,metadata:i}=o,n=globalThis.litPropertyMetadata.get(i);if(n===void 0&&globalThis.litPropertyMetadata.set(i,n=new Map),n.set(o.name,t),r==="accessor"){let{name:a}=o;return{set(s){let l=e.get.call(this);e.set.call(this,s),this.requestUpdate(a,l,t)},init(s){return s!==void 0&&this.P(a,void 0,t),s}}}if(r==="setter"){let{name:a}=o;return function(s){let l=this[a];e.call(this,s),this.requestUpdate(a,l,t)}}throw Error("Unsupported decorator location: "+r)};function y(t){return(e,o)=>typeof o=="object"?Cd(t,e,o):((r,i,n)=>{let a=i.hasOwnProperty(n);return i.constructor.createProperty(n,a?{...r,wrapped:!0}:r),a?Object.getOwnPropertyDescriptor(i,n):void 0})(t,e,o)}function At(t){return y({...t,state:!0,attribute:!1})}function Ta(t){return(e,o)=>{let r=typeof e=="function"?e:e[o];Object.assign(r,t)}}var Ao=(t,e,o)=>(o.configurable=!0,o.enumerable=!0,Reflect.decorate&&typeof e!="object"&&Object.defineProperty(t,e,o),o);function Z(t,e){return(o,r,i)=>{let n=a=>a.renderRoot?.querySelector(t)??null;if(e){let{get:a,set:s}=typeof r=="object"?o:i??(()=>{let l=Symbol();return{get(){return this[l]},set(u){this[l]=u}}})();return Ao(o,r,{get(){let l=a.call(this);return l===void 0&&(l=n(this),(l!==null||this.hasUpdated)&&s.call(this,l)),l}})}return Ao(o,r,{get(){return n(this)}})}}var vi,X=class extends oo{constructor(){super(),Ca(this,vi,!1),this.initialReflectedProperties=new Map,Object.entries(this.constructor.dependencies).forEach(([t,e])=>{this.constructor.define(t,e)})}emit(t,e){let o=new CustomEvent(t,ce({bubbles:!0,cancelable:!1,composed:!0,detail:{}},e));return this.dispatchEvent(o),o}static define(t,e=this,o={}){let r=customElements.get(t);if(!r){try{customElements.define(t,e,o)}catch{customElements.define(t,class extends e{},o)}return}let i=" (unknown version)",n=i;"version"in e&&e.version&&(i=" v"+e.version),"version"in r&&r.version&&(n=" v"+r.version)}attributeChangedCallback(t,e,o){Ea(this,vi)||(this.constructor.elementProperties.forEach((r,i)=>{r.reflect&&this[i]!=null&&this.initialReflectedProperties.set(i,this[i])}),Aa(this,vi,!0)),super.attributeChangedCallback(t,e,o)}willUpdate(t){super.willUpdate(t),this.initialReflectedProperties.forEach((e,o)=>{t.has(o)&&this[o]==null&&(this[o]=e)})}};vi=new WeakMap;X.version="2.20.1";X.dependencies={};p([y()],X.prototype,"dir",2);p([y()],X.prototype,"lang",2);var{I:hm}=ha;var Ma=(t,e)=>e===void 0?t?._$litType$!==void 0:t?._$litType$===e;var _i=t=>t.strings===void 0;var Ad={},La=(t,e=Ad)=>t._$AH=e;var Ar=Symbol(),wi=Symbol(),Kn,jn=new Map,Pt=class extends X{constructor(){super(...arguments),this.initialRender=!1,this.svg=null,this.label="",this.library="default"}async resolveIcon(t,e){var o;let r;if(e?.spriteSheet)return this.svg=R`<svg part="svg"><use part="use" href="${t}"></use></svg>`,this.svg;try{if(r=await fetch(t,{mode:"cors"}),!r.ok)return r.status===410?Ar:wi}catch{return wi}try{let i=document.createElement("div");i.innerHTML=await r.text();let n=i.firstElementChild;if(((o=n?.tagName)==null?void 0:o.toLowerCase())!=="svg")return Ar;Kn||(Kn=new DOMParser);let s=Kn.parseFromString(n.outerHTML,"text/html").body.querySelector("svg");return s?(s.part.add("svg"),document.adoptNode(s)):Ar}catch{return Ar}}connectedCallback(){super.connectedCallback(),ya(this)}firstUpdated(){this.initialRender=!0,this.setIcon()}disconnectedCallback(){super.disconnectedCallback(),va(this)}getIconSource(){let t=Vn(this.library);return this.name&&t?{url:t.resolver(this.name),fromLibrary:!0}:{url:this.src,fromLibrary:!1}}handleLabelChange(){typeof this.label=="string"&&this.label.length>0?(this.setAttribute("role","img"),this.setAttribute("aria-label",this.label),this.removeAttribute("aria-hidden")):(this.removeAttribute("role"),this.removeAttribute("aria-label"),this.setAttribute("aria-hidden","true"))}async setIcon(){var t;let{url:e,fromLibrary:o}=this.getIconSource(),r=o?Vn(this.library):void 0;if(!e){this.svg=null;return}let i=jn.get(e);if(i||(i=this.resolveIcon(e,r),jn.set(e,i)),!this.initialRender)return;let n=await i;if(n===wi&&jn.delete(e),e===this.getIconSource().url){if(Ma(n)){if(this.svg=n,r){await this.updateComplete;let a=this.shadowRoot.querySelector("[part='svg']");typeof r.mutator=="function"&&a&&r.mutator(a)}return}switch(n){case wi:case Ar:this.svg=null,this.emit("sl-error");break;default:this.svg=n.cloneNode(!0),(t=r?.mutator)==null||t.call(r,this.svg),this.emit("sl-load")}}}render(){return this.svg}};Pt.styles=[ot,_a];p([At()],Pt.prototype,"svg",2);p([y({reflect:!0})],Pt.prototype,"name",2);p([y()],Pt.prototype,"src",2);p([y()],Pt.prototype,"label",2);p([y({reflect:!0})],Pt.prototype,"library",2);p([dt("label")],Pt.prototype,"handleLabelChange",1);p([dt(["name","src","library"])],Pt.prototype,"setIcon",1);var ue={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},Ke=t=>(...e)=>({_$litDirective$:t,values:e}),Oe=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,o,r){this._$Ct=e,this._$AM=o,this._$Ci=r}_$AS(e,o){return this.update(e,o)}update(e,o){return this.render(...o)}};var mt=Ke(class extends Oe{constructor(t){if(super(t),t.type!==ue.ATTRIBUTE||t.name!=="class"||t.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter((e=>t[e])).join(" ")+" "}update(t,[e]){if(this.st===void 0){this.st=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter((r=>r!==""))));for(let r in e)e[r]&&!this.nt?.has(r)&&this.st.add(r);return this.render(e)}let o=t.element.classList;for(let r of this.st)r in e||(o.remove(r),this.st.delete(r));for(let r in e){let i=!!e[r];i===this.st.has(r)||this.nt?.has(r)||(i?(o.add(r),this.st.add(r)):(o.remove(r),this.st.delete(r)))}return Ut}});var Da=Symbol.for(""),Pd=t=>{if(t?.r===Da)return t?._$litStatic$};var qo=(t,...e)=>({_$litStatic$:e.reduce(((o,r,i)=>o+(n=>{if(n._$litStatic$!==void 0)return n._$litStatic$;throw Error(`Value passed to 'literal' function must be a 'literal' result: ${n}. Use 'unsafeStatic' to pass non-literal values, but
            take care to ensure page security.`)})(r)+t[i+1]),t[0]),r:Da}),$a=new Map,Wn=t=>(e,...o)=>{let r=o.length,i,n,a=[],s=[],l,u=0,m=!1;for(;u<r;){for(l=e[u];u<r&&(n=o[u],(i=Pd(n))!==void 0);)l+=i+e[++u],m=!0;u!==r&&s.push(n),a.push(l),u++}if(u===r&&a.push(e[r]),m){let c=a.join("$$lit$$");(e=$a.get(c))===void 0&&(a.raw=a,$a.set(c,e=a)),o=s}return t(e,...o)},Zo=Wn(R),Im=Wn(la),Rm=Wn(ca);var z=t=>t??_t;var Kt=class extends X{constructor(){super(...arguments),this.hasFocus=!1,this.label="",this.disabled=!1}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleFocus(){this.hasFocus=!0,this.emit("sl-focus")}handleClick(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}click(){this.button.click()}focus(t){this.button.focus(t)}blur(){this.button.blur()}render(){let t=!!this.href,e=t?qo`a`:qo`button`;return Zo`<${e} part="base" class=${mt({"icon-button":!0,"icon-button--disabled":!t&&this.disabled,"icon-button--focused":this.hasFocus})} ?disabled=${z(t?void 0:this.disabled)} type=${z(t?void 0:"button")} href=${z(t?this.href:void 0)} target=${z(t?this.target:void 0)} download=${z(t?this.download:void 0)} rel=${z(t&&this.target?"noreferrer noopener":void 0)} role=${z(t?void 0:"button")} aria-disabled=${this.disabled?"true":"false"} aria-label="${this.label}" tabindex=${this.disabled?"-1":"0"} @blur=${this.handleBlur} @focus=${this.handleFocus} @click=${this.handleClick} ><sl-icon class="icon-button__icon" name=${z(this.name)} library=${z(this.library)} src=${z(this.src)} aria-hidden="true" ></sl-icon></${e}>`}};Kt.styles=[ot,fa];Kt.dependencies={"sl-icon":Pt};p([Z(".icon-button")],Kt.prototype,"button",2);p([At()],Kt.prototype,"hasFocus",2);p([y()],Kt.prototype,"name",2);p([y()],Kt.prototype,"library",2);p([y()],Kt.prototype,"src",2);p([y()],Kt.prototype,"href",2);p([y()],Kt.prototype,"target",2);p([y()],Kt.prototype,"download",2);p([y()],Kt.prototype,"label",2);p([y({type:Boolean,reflect:!0})],Kt.prototype,"disabled",2);var Ia=new Map,Td=new WeakMap;function Md(t){return t??{keyframes:[],options:{duration:0}}}function Oa(t,e){return e.toLowerCase()==="rtl"?{keyframes:t.rtlKeyframes||t.keyframes,options:t.options}:t}function Xt(t,e){Ia.set(t,Md(e))}function Yt(t,e,o){let r=Td.get(t);if(r?.[e])return Oa(r[e],o.dir);let i=Ia.get(e);return i?Oa(i,o.dir):{keyframes:[],options:{duration:0}}}function be(t,e){return new Promise(o=>{function r(i){i.target===t&&(t.removeEventListener(e,r),o())}t.addEventListener(e,r)})}function Qt(t,e,o){return new Promise(r=>{if(o?.duration===1/0)throw new Error("Promise-based animations must be finite.");let i=t.animate(e,ro(ce({},o),{duration:Ld()?0:o.duration}));i.addEventListener("cancel",r,{once:!0}),i.addEventListener("finish",r,{once:!0})})}function qn(t){return t=t.toString().toLowerCase(),t.indexOf("ms")>-1?parseFloat(t):t.indexOf("s")>-1?parseFloat(t)*1e3:parseFloat(t)}function Ld(){return window.matchMedia("(prefers-reduced-motion: reduce)").matches}function oe(t){return Promise.all(t.getAnimations().map(e=>new Promise(o=>{e.cancel(),requestAnimationFrame(o)})))}var Ie=class{constructor(t,...e){this.slotNames=[],this.handleSlotChange=o=>{let r=o.target;(this.slotNames.includes("[default]")&&!r.name||r.name&&this.slotNames.includes(r.name))&&this.host.requestUpdate()},(this.host=t).addController(this),this.slotNames=e}hasDefaultSlot(){return[...this.host.childNodes].some(t=>{if(t.nodeType===t.TEXT_NODE&&t.textContent.trim()!=="")return!0;if(t.nodeType===t.ELEMENT_NODE){let e=t;if(e.tagName.toLowerCase()==="sl-visually-hidden")return!1;if(!e.hasAttribute("slot"))return!0}return!1})}hasNamedSlot(t){return this.host.querySelector(`:scope > [slot="${t}"]`)!==null}test(t){return t==="[default]"?this.hasDefaultSlot():this.hasNamedSlot(t)}hostConnected(){this.host.shadowRoot.addEventListener("slotchange",this.handleSlotChange)}hostDisconnected(){this.host.shadowRoot.removeEventListener("slotchange",this.handleSlotChange)}};function Ra(t){if(!t)return"";let e=t.assignedNodes({flatten:!0}),o="";return[...e].forEach(r=>{r.nodeType===Node.TEXT_NODE&&(o+=r.textContent)}),o}var Zn=new Set,Xo=new Map,Po,Xn="ltr",Yn="en",Ba=typeof MutationObserver<"u"&&typeof document<"u"&&typeof document.documentElement<"u";if(Ba){let t=new MutationObserver(Fa);Xn=document.documentElement.dir||"ltr",Yn=document.documentElement.lang||navigator.language,t.observe(document.documentElement,{attributes:!0,attributeFilter:["dir","lang"]})}function Pr(...t){t.map(e=>{let o=e.$code.toLowerCase();Xo.has(o)?Xo.set(o,Object.assign(Object.assign({},Xo.get(o)),e)):Xo.set(o,e),Po||(Po=e)}),Fa()}function Fa(){Ba&&(Xn=document.documentElement.dir||"ltr",Yn=document.documentElement.lang||navigator.language),[...Zn.keys()].map(t=>{typeof t.requestUpdate=="function"&&t.requestUpdate()})}var ki=class{constructor(e){this.host=e,this.host.addController(this)}hostConnected(){Zn.add(this.host)}hostDisconnected(){Zn.delete(this.host)}dir(){return`${this.host.dir||Xn}`.toLowerCase()}lang(){return`${this.host.lang||Yn}`.toLowerCase()}getTranslationData(e){var o,r;let i=new Intl.Locale(e.replace(/_/g,"-")),n=i?.language.toLowerCase(),a=(r=(o=i?.region)===null||o===void 0?void 0:o.toLowerCase())!==null&&r!==void 0?r:"",s=Xo.get(`${n}-${a}`),l=Xo.get(n);return{locale:i,language:n,region:a,primary:s,secondary:l}}exists(e,o){var r;let{primary:i,secondary:n}=this.getTranslationData((r=o.lang)!==null&&r!==void 0?r:this.lang());return o=Object.assign({includeFallback:!1},o),!!(i&&i[e]||n&&n[e]||o.includeFallback&&Po&&Po[e])}term(e,...o){let{primary:r,secondary:i}=this.getTranslationData(this.lang()),n;if(r&&r[e])n=r[e];else if(i&&i[e])n=i[e];else if(Po&&Po[e])n=Po[e];else return String(e);return typeof n=="function"?n(...o):n}date(e,o){return e=new Date(e),new Intl.DateTimeFormat(this.lang(),o).format(e)}number(e,o){return e=Number(e),isNaN(e)?"":new Intl.NumberFormat(this.lang(),o).format(e)}relativeTime(e,o,r){return new Intl.RelativeTimeFormat(this.lang(),r).format(e,o)}};var za={$code:"en",$name:"English",$dir:"ltr",carousel:"Carousel",clearEntry:"Clear entry",close:"Close",copied:"Copied",copy:"Copy",currentValue:"Current value",error:"Error",goToSlide:(t,e)=>`Go to slide ${t} of ${e}`,hidePassword:"Hide password",loading:"Loading",nextSlide:"Next slide",numOptionsSelected:t=>t===0?"No options selected":t===1?"1 option selected":`${t} options selected`,previousSlide:"Previous slide",progress:"Progress",remove:"Remove",resize:"Resize",scrollToEnd:"Scroll to end",scrollToStart:"Scroll to start",selectAColorFromTheScreen:"Select a color from the screen",showPassword:"Show password",slideNum:t=>`Slide ${t}`,toggleColorFormat:"Toggle color format"};Pr(za);var Na=za;var Tt=class extends ki{};Pr(Na);var Ha=W` :host { display: contents; /* For better DX, we'll reset the margin here so the base part can inherit it */ margin: 0; } .alert { position: relative; display: flex; align-items: stretch; background-color: var(--sl-panel-background-color); border: solid var(--sl-panel-border-width) var(--sl-panel-border-color); border-top-width: calc(var(--sl-panel-border-width) * 3); border-radius: var(--sl-border-radius-medium); font-family: var(--sl-font-sans); font-size: var(--sl-font-size-small); font-weight: var(--sl-font-weight-normal); line-height: 1.6; color: var(--sl-color-neutral-700); margin: inherit; overflow: hidden; } .alert:not(.alert--has-icon) .alert__icon, .alert:not(.alert--closable) .alert__close-button { display: none; } .alert__icon { flex: 0 0 auto; display: flex; align-items: center; font-size: var(--sl-font-size-large); padding-inline-start: var(--sl-spacing-large); } .alert--has-countdown { border-bottom: none; } .alert--primary { border-top-color: var(--sl-color-primary-600); } .alert--primary .alert__icon { color: var(--sl-color-primary-600); } .alert--success { border-top-color: var(--sl-color-success-600); } .alert--success .alert__icon { color: var(--sl-color-success-600); } .alert--neutral { border-top-color: var(--sl-color-neutral-600); } .alert--neutral .alert__icon { color: var(--sl-color-neutral-600); } .alert--warning { border-top-color: var(--sl-color-warning-600); } .alert--warning .alert__icon { color: var(--sl-color-warning-600); } .alert--danger { border-top-color: var(--sl-color-danger-600); } .alert--danger .alert__icon { color: var(--sl-color-danger-600); } .alert__message { flex: 1 1 auto; display: block; padding: var(--sl-spacing-large); overflow: hidden; } .alert__close-button { flex: 0 0 auto; display: flex; align-items: center; font-size: var(--sl-font-size-medium); margin-inline-end: var(--sl-spacing-medium); align-self: center; } .alert__countdown { position: absolute; bottom: 0; left: 0; width: 100%; height: calc(var(--sl-panel-border-width) * 3); background-color: var(--sl-panel-border-color); display: flex; } .alert__countdown--ltr { justify-content: flex-end; } .alert__countdown .alert__countdown-elapsed { height: 100%; width: 0; } .alert--primary .alert__countdown-elapsed { background-color: var(--sl-color-primary-600); } .alert--success .alert__countdown-elapsed { background-color: var(--sl-color-success-600); } .alert--neutral .alert__countdown-elapsed { background-color: var(--sl-color-neutral-600); } .alert--warning .alert__countdown-elapsed { background-color: var(--sl-color-warning-600); } .alert--danger .alert__countdown-elapsed { background-color: var(--sl-color-danger-600); } .alert__timer { display: none; } `;var de=class To extends X{constructor(){super(...arguments),this.hasSlotController=new Ie(this,"icon","suffix"),this.localize=new Tt(this),this.open=!1,this.closable=!1,this.variant="primary",this.duration=1/0,this.remainingTime=this.duration}static get toastStack(){return this.currentToastStack||(this.currentToastStack=Object.assign(document.createElement("div"),{className:"sl-toast-stack"})),this.currentToastStack}firstUpdated(){this.base.hidden=!this.open}restartAutoHide(){this.handleCountdownChange(),clearTimeout(this.autoHideTimeout),clearInterval(this.remainingTimeInterval),this.open&&this.duration<1/0&&(this.autoHideTimeout=window.setTimeout(()=>this.hide(),this.duration),this.remainingTime=this.duration,this.remainingTimeInterval=window.setInterval(()=>{this.remainingTime-=100},100))}pauseAutoHide(){var e;(e=this.countdownAnimation)==null||e.pause(),clearTimeout(this.autoHideTimeout),clearInterval(this.remainingTimeInterval)}resumeAutoHide(){var e;this.duration<1/0&&(this.autoHideTimeout=window.setTimeout(()=>this.hide(),this.remainingTime),this.remainingTimeInterval=window.setInterval(()=>{this.remainingTime-=100},100),(e=this.countdownAnimation)==null||e.play())}handleCountdownChange(){if(this.open&&this.duration<1/0&&this.countdown){let{countdownElement:e}=this,o="100%",r="0";this.countdownAnimation=e.animate([{width:o},{width:r}],{duration:this.duration,easing:"linear"})}}handleCloseClick(){this.hide()}async handleOpenChange(){if(this.open){this.emit("sl-show"),this.duration<1/0&&this.restartAutoHide(),await oe(this.base),this.base.hidden=!1;let{keyframes:e,options:o}=Yt(this,"alert.show",{dir:this.localize.dir()});await Qt(this.base,e,o),this.emit("sl-after-show")}else{ai(this),this.emit("sl-hide"),clearTimeout(this.autoHideTimeout),clearInterval(this.remainingTimeInterval),await oe(this.base);let{keyframes:e,options:o}=Yt(this,"alert.hide",{dir:this.localize.dir()});await Qt(this.base,e,o),this.base.hidden=!0,this.emit("sl-after-hide")}}handleDurationChange(){this.restartAutoHide()}async show(){if(!this.open)return this.open=!0,be(this,"sl-after-show")}async hide(){if(this.open)return this.open=!1,be(this,"sl-after-hide")}async toast(){return new Promise(e=>{this.handleCountdownChange(),To.toastStack.parentElement===null&&document.body.append(To.toastStack),To.toastStack.appendChild(this),requestAnimationFrame(()=>{this.clientWidth,this.show()}),this.addEventListener("sl-after-hide",()=>{To.toastStack.removeChild(this),e(),To.toastStack.querySelector("sl-alert")===null&&To.toastStack.remove()},{once:!0})})}render(){return R`<div part="base" class=${mt({alert:!0,"alert--open":this.open,"alert--closable":this.closable,"alert--has-countdown":!!this.countdown,"alert--has-icon":this.hasSlotController.test("icon"),"alert--primary":this.variant==="primary","alert--success":this.variant==="success","alert--neutral":this.variant==="neutral","alert--warning":this.variant==="warning","alert--danger":this.variant==="danger"})} role="alert" aria-hidden=${this.open?"false":"true"} @mouseenter=${this.pauseAutoHide} @mouseleave=${this.resumeAutoHide} ><div part="icon" class="alert__icon"><slot name="icon"></slot></div><div part="message" class="alert__message" aria-live="polite"><slot></slot></div>${this.closable?R`<sl-icon-button part="close-button" exportparts="base:close-button__base" class="alert__close-button" name="x-lg" library="system" label=${this.localize.term("close")} @click=${this.handleCloseClick} ></sl-icon-button>`:""}<div role="timer" class="alert__timer">${this.remainingTime}</div>${this.countdown?R`<div class=${mt({alert__countdown:!0,"alert__countdown--ltr":this.countdown==="ltr"})} ><div class="alert__countdown-elapsed"></div></div>`:""}</div>`}};de.styles=[ot,Ha];de.dependencies={"sl-icon-button":Kt};p([Z('[part~="base"]')],de.prototype,"base",2);p([Z(".alert__countdown-elapsed")],de.prototype,"countdownElement",2);p([y({type:Boolean,reflect:!0})],de.prototype,"open",2);p([y({type:Boolean,reflect:!0})],de.prototype,"closable",2);p([y({reflect:!0})],de.prototype,"variant",2);p([y({type:Number})],de.prototype,"duration",2);p([y({type:String,reflect:!0})],de.prototype,"countdown",2);p([At()],de.prototype,"remainingTime",2);p([dt("open",{waitUntilFirstUpdate:!0})],de.prototype,"handleOpenChange",1);p([dt("duration")],de.prototype,"handleDurationChange",1);var Va=de;Xt("alert.show",{keyframes:[{opacity:0,scale:.8},{opacity:1,scale:1}],options:{duration:250,easing:"ease"}});Xt("alert.hide",{keyframes:[{opacity:1,scale:1},{opacity:0,scale:.8}],options:{duration:250,easing:"ease"}});Va.define("sl-alert");var Ga=W` :host { display: inline-flex; } .badge { display: inline-flex; align-items: center; justify-content: center; font-size: max(12px, 0.75em); font-weight: var(--sl-font-weight-semibold); letter-spacing: var(--sl-letter-spacing-normal); line-height: 1; border-radius: var(--sl-border-radius-small); border: solid 1px var(--sl-color-neutral-0); white-space: nowrap; padding: 0.35em 0.6em; user-select: none; -webkit-user-select: none; cursor: inherit; } /* Variant modifiers */ .badge--primary { background-color: var(--sl-color-primary-600); color: var(--sl-color-neutral-0); } .badge--success { background-color: var(--sl-color-success-600); color: var(--sl-color-neutral-0); } .badge--neutral { background-color: var(--sl-color-neutral-600); color: var(--sl-color-neutral-0); } .badge--warning { background-color: var(--sl-color-warning-600); color: var(--sl-color-neutral-0); } .badge--danger { background-color: var(--sl-color-danger-600); color: var(--sl-color-neutral-0); } /* Pill modifier */ .badge--pill { border-radius: var(--sl-border-radius-pill); } /* Pulse modifier */ .badge--pulse { animation: pulse 1.5s infinite; } .badge--pulse.badge--primary { --pulse-color: var(--sl-color-primary-600); } .badge--pulse.badge--success { --pulse-color: var(--sl-color-success-600); } .badge--pulse.badge--neutral { --pulse-color: var(--sl-color-neutral-600); } .badge--pulse.badge--warning { --pulse-color: var(--sl-color-warning-600); } .badge--pulse.badge--danger { --pulse-color: var(--sl-color-danger-600); } @keyframes pulse { 0% { box-shadow: 0 0 0 0 var(--pulse-color); } 70% { box-shadow: 0 0 0 0.5rem transparent; } 100% { box-shadow: 0 0 0 0 transparent; } } `;var Yo=class extends X{constructor(){super(...arguments),this.variant="primary",this.pill=!1,this.pulse=!1}render(){return R`<span part="base" class=${mt({badge:!0,"badge--primary":this.variant==="primary","badge--success":this.variant==="success","badge--neutral":this.variant==="neutral","badge--warning":this.variant==="warning","badge--danger":this.variant==="danger","badge--pill":this.pill,"badge--pulse":this.pulse})} role="status" ><slot></slot></span>`}};Yo.styles=[ot,Ga];p([y({reflect:!0})],Yo.prototype,"variant",2);p([y({type:Boolean,reflect:!0})],Yo.prototype,"pill",2);p([y({type:Boolean,reflect:!0})],Yo.prototype,"pulse",2);Yo.define("sl-badge");var Ua=W` .breadcrumb { display: flex; align-items: center; flex-wrap: wrap; } `;var Mo=class extends X{constructor(){super(...arguments),this.localize=new Tt(this),this.separatorDir=this.localize.dir(),this.label=""}getSeparator(){let e=this.separatorSlot.assignedElements({flatten:!0})[0].cloneNode(!0);return[e,...e.querySelectorAll("[id]")].forEach(o=>o.removeAttribute("id")),e.setAttribute("data-default",""),e.slot="separator",e}handleSlotChange(){let t=[...this.defaultSlot.assignedElements({flatten:!0})].filter(e=>e.tagName.toLowerCase()==="sl-breadcrumb-item");t.forEach((e,o)=>{let r=e.querySelector('[slot="separator"]');r===null?e.append(this.getSeparator()):r.hasAttribute("data-default")&&r.replaceWith(this.getSeparator()),o===t.length-1?e.setAttribute("aria-current","page"):e.removeAttribute("aria-current")})}render(){return this.separatorDir!==this.localize.dir()&&(this.separatorDir=this.localize.dir(),this.updateComplete.then(()=>this.handleSlotChange())),R`<nav part="base" class="breadcrumb" aria-label=${this.label}><slot @slotchange=${this.handleSlotChange}></slot></nav><span hidden aria-hidden="true"><slot name="separator"><sl-icon name=${this.localize.dir()==="rtl"?"chevron-left":"chevron-right"} library="system"></sl-icon></slot></span>`}};Mo.styles=[ot,Ua];Mo.dependencies={"sl-icon":Pt};p([Z("slot")],Mo.prototype,"defaultSlot",2);p([Z('slot[name="separator"]')],Mo.prototype,"separatorSlot",2);p([y()],Mo.prototype,"label",2);Mo.define("sl-breadcrumb");var Ka=W` :host { --track-width: 2px; --track-color: rgb(128 128 128 / 25%); --indicator-color: var(--sl-color-primary-600); --speed: 2s; display: inline-flex; width: 1em; height: 1em; flex: none; } .spinner { flex: 1 1 auto; height: 100%; width: 100%; } .spinner__track, .spinner__indicator { fill: none; stroke-width: var(--track-width); r: calc(0.5em - var(--track-width) / 2); cx: 0.5em; cy: 0.5em; transform-origin: 50% 50%; } .spinner__track { stroke: var(--track-color); transform-origin: 0% 0%; } .spinner__indicator { stroke: var(--indicator-color); stroke-linecap: round; stroke-dasharray: 150% 75%; animation: spin var(--speed) linear infinite; } @keyframes spin { 0% { transform: rotate(0deg); stroke-dasharray: 0.05em, 3em; } 50% { transform: rotate(450deg); stroke-dasharray: 1.375em, 1.375em; } 100% { transform: rotate(1080deg); stroke-dasharray: 0.05em, 3em; } } `;var Tr=class extends X{constructor(){super(...arguments),this.localize=new Tt(this)}render(){return R`<svg part="base" class="spinner" role="progressbar" aria-label=${this.localize.term("loading")}><circle class="spinner__track"></circle><circle class="spinner__indicator"></circle></svg>`}};Tr.styles=[ot,Ka];var Mr=new WeakMap,Lr=new WeakMap,$r=new WeakMap,Qn=new WeakSet,xi=new WeakMap,Qo=class{constructor(t,e){this.handleFormData=o=>{let r=this.options.disabled(this.host),i=this.options.name(this.host),n=this.options.value(this.host),a=this.host.tagName.toLowerCase()==="sl-button";this.host.isConnected&&!r&&!a&&typeof i=="string"&&i.length>0&&typeof n<"u"&&(Array.isArray(n)?n.forEach(s=>{o.formData.append(i,s.toString())}):o.formData.append(i,n.toString()))},this.handleFormSubmit=o=>{var r;let i=this.options.disabled(this.host),n=this.options.reportValidity;this.form&&!this.form.noValidate&&((r=Mr.get(this.form))==null||r.forEach(a=>{this.setUserInteracted(a,!0)})),this.form&&!this.form.noValidate&&!i&&!n(this.host)&&(o.preventDefault(),o.stopImmediatePropagation())},this.handleFormReset=()=>{this.options.setValue(this.host,this.options.defaultValue(this.host)),this.setUserInteracted(this.host,!1),xi.set(this.host,[])},this.handleInteraction=o=>{let r=xi.get(this.host);r.includes(o.type)||r.push(o.type),r.length===this.options.assumeInteractionOn.length&&this.setUserInteracted(this.host,!0)},this.checkFormValidity=()=>{if(this.form&&!this.form.noValidate){let o=this.form.querySelectorAll("*");for(let r of o)if(typeof r.checkValidity=="function"&&!r.checkValidity())return!1}return!0},this.reportFormValidity=()=>{if(this.form&&!this.form.noValidate){let o=this.form.querySelectorAll("*");for(let r of o)if(typeof r.reportValidity=="function"&&!r.reportValidity())return!1}return!0},(this.host=t).addController(this),this.options=ce({form:o=>{let r=o.form;if(r){let n=o.getRootNode().querySelector(`#${r}`);if(n)return n}return o.closest("form")},name:o=>o.name,value:o=>o.value,defaultValue:o=>o.defaultValue,disabled:o=>{var r;return(r=o.disabled)!=null?r:!1},reportValidity:o=>typeof o.reportValidity=="function"?o.reportValidity():!0,checkValidity:o=>typeof o.checkValidity=="function"?o.checkValidity():!0,setValue:(o,r)=>o.value=r,assumeInteractionOn:["sl-input"]},e)}hostConnected(){let t=this.options.form(this.host);t&&this.attachForm(t),xi.set(this.host,[]),this.options.assumeInteractionOn.forEach(e=>{this.host.addEventListener(e,this.handleInteraction)})}hostDisconnected(){this.detachForm(),xi.delete(this.host),this.options.assumeInteractionOn.forEach(t=>{this.host.removeEventListener(t,this.handleInteraction)})}hostUpdated(){let t=this.options.form(this.host);t||this.detachForm(),t&&this.form!==t&&(this.detachForm(),this.attachForm(t)),this.host.hasUpdated&&this.setValidity(this.host.validity.valid)}attachForm(t){t?(this.form=t,Mr.has(this.form)?Mr.get(this.form).add(this.host):Mr.set(this.form,new Set([this.host])),this.form.addEventListener("formdata",this.handleFormData),this.form.addEventListener("submit",this.handleFormSubmit),this.form.addEventListener("reset",this.handleFormReset),Lr.has(this.form)||(Lr.set(this.form,this.form.reportValidity),this.form.reportValidity=()=>this.reportFormValidity()),$r.has(this.form)||($r.set(this.form,this.form.checkValidity),this.form.checkValidity=()=>this.checkFormValidity())):this.form=void 0}detachForm(){if(!this.form)return;let t=Mr.get(this.form);t&&(t.delete(this.host),t.size<=0&&(this.form.removeEventListener("formdata",this.handleFormData),this.form.removeEventListener("submit",this.handleFormSubmit),this.form.removeEventListener("reset",this.handleFormReset),Lr.has(this.form)&&(this.form.reportValidity=Lr.get(this.form),Lr.delete(this.form)),$r.has(this.form)&&(this.form.checkValidity=$r.get(this.form),$r.delete(this.form)),this.form=void 0))}setUserInteracted(t,e){e?Qn.add(t):Qn.delete(t),t.requestUpdate()}doAction(t,e){if(this.form){let o=document.createElement("button");o.type=t,o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.clipPath="inset(50%)",o.style.overflow="hidden",o.style.whiteSpace="nowrap",e&&(o.name=e.name,o.value=e.value,["formaction","formenctype","formmethod","formnovalidate","formtarget"].forEach(r=>{e.hasAttribute(r)&&o.setAttribute(r,e.getAttribute(r))})),this.form.append(o),o.click(),o.remove()}}getForm(){var t;return(t=this.form)!=null?t:null}reset(t){this.doAction("reset",t)}submit(t){this.doAction("submit",t)}setValidity(t){let e=this.host,o=!!Qn.has(e),r=!!e.required;e.toggleAttribute("data-required",r),e.toggleAttribute("data-optional",!r),e.toggleAttribute("data-invalid",!t),e.toggleAttribute("data-valid",t),e.toggleAttribute("data-user-invalid",!t&&o),e.toggleAttribute("data-user-valid",t&&o)}updateValidity(){let t=this.host;this.setValidity(t.validity.valid)}emitInvalidEvent(t){let e=new CustomEvent("sl-invalid",{bubbles:!1,composed:!1,cancelable:!0,detail:{}});t||e.preventDefault(),this.host.dispatchEvent(e)||t?.preventDefault()}},Si=Object.freeze({badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valid:!0,valueMissing:!1}),fy=Object.freeze(ro(ce({},Si),{valid:!1,valueMissing:!0})),my=Object.freeze(ro(ce({},Si),{valid:!1,customError:!0}));var ja=W` :host { display: inline-block; position: relative; width: auto; cursor: pointer; } .button { display: inline-flex; align-items: stretch; justify-content: center; width: 100%; border-style: solid; border-width: var(--sl-input-border-width); font-family: var(--sl-input-font-family); font-weight: var(--sl-font-weight-semibold); text-decoration: none; user-select: none; -webkit-user-select: none; white-space: nowrap; vertical-align: middle; padding: 0; transition: var(--sl-transition-x-fast) background-color, var(--sl-transition-x-fast) color, var(--sl-transition-x-fast) border, var(--sl-transition-x-fast) box-shadow; cursor: inherit; } .button::-moz-focus-inner { border: 0; } .button:focus { outline: none; } .button:focus-visible { outline: var(--sl-focus-ring); outline-offset: var(--sl-focus-ring-offset); } .button--disabled { opacity: 0.5; cursor: not-allowed; } /* When disabled, prevent mouse events from bubbling up from children */ .button--disabled * { pointer-events: none; } .button__prefix, .button__suffix { flex: 0 0 auto; display: flex; align-items: center; pointer-events: none; } .button__label { display: inline-block; } .button__label::slotted(sl-icon) { vertical-align: -2px; } /* * Standard buttons */ /* Default */ .button--standard.button--default { background-color: var(--sl-color-neutral-0); border-color: var(--sl-input-border-color); color: var(--sl-color-neutral-700); } .button--standard.button--default:hover:not(.button--disabled) { background-color: var(--sl-color-primary-50); border-color: var(--sl-color-primary-300); color: var(--sl-color-primary-700); } .button--standard.button--default:active:not(.button--disabled) { background-color: var(--sl-color-primary-100); border-color: var(--sl-color-primary-400); color: var(--sl-color-primary-700); } /* Primary */ .button--standard.button--primary { background-color: var(--sl-color-primary-600); border-color: var(--sl-color-primary-600); color: var(--sl-color-neutral-0); } .button--standard.button--primary:hover:not(.button--disabled) { background-color: var(--sl-color-primary-500); border-color: var(--sl-color-primary-500); color: var(--sl-color-neutral-0); } .button--standard.button--primary:active:not(.button--disabled) { background-color: var(--sl-color-primary-600); border-color: var(--sl-color-primary-600); color: var(--sl-color-neutral-0); } /* Success */ .button--standard.button--success { background-color: var(--sl-color-success-600); border-color: var(--sl-color-success-600); color: var(--sl-color-neutral-0); } .button--standard.button--success:hover:not(.button--disabled) { background-color: var(--sl-color-success-500); border-color: var(--sl-color-success-500); color: var(--sl-color-neutral-0); } .button--standard.button--success:active:not(.button--disabled) { background-color: var(--sl-color-success-600); border-color: var(--sl-color-success-600); color: var(--sl-color-neutral-0); } /* Neutral */ .button--standard.button--neutral { background-color: var(--sl-color-neutral-600); border-color: var(--sl-color-neutral-600); color: var(--sl-color-neutral-0); } .button--standard.button--neutral:hover:not(.button--disabled) { background-color: var(--sl-color-neutral-500); border-color: var(--sl-color-neutral-500); color: var(--sl-color-neutral-0); } .button--standard.button--neutral:active:not(.button--disabled) { background-color: var(--sl-color-neutral-600); border-color: var(--sl-color-neutral-600); color: var(--sl-color-neutral-0); } /* Warning */ .button--standard.button--warning { background-color: var(--sl-color-warning-600); border-color: var(--sl-color-warning-600); color: var(--sl-color-neutral-0); } .button--standard.button--warning:hover:not(.button--disabled) { background-color: var(--sl-color-warning-500); border-color: var(--sl-color-warning-500); color: var(--sl-color-neutral-0); } .button--standard.button--warning:active:not(.button--disabled) { background-color: var(--sl-color-warning-600); border-color: var(--sl-color-warning-600); color: var(--sl-color-neutral-0); } /* Danger */ .button--standard.button--danger { background-color: var(--sl-color-danger-600); border-color: var(--sl-color-danger-600); color: var(--sl-color-neutral-0); } .button--standard.button--danger:hover:not(.button--disabled) { background-color: var(--sl-color-danger-500); border-color: var(--sl-color-danger-500); color: var(--sl-color-neutral-0); } .button--standard.button--danger:active:not(.button--disabled) { background-color: var(--sl-color-danger-600); border-color: var(--sl-color-danger-600); color: var(--sl-color-neutral-0); } /* * Outline buttons */ .button--outline { background: none; border: solid 1px; } /* Default */ .button--outline.button--default { border-color: var(--sl-input-border-color); color: var(--sl-color-neutral-700); } .button--outline.button--default:hover:not(.button--disabled), .button--outline.button--default.button--checked:not(.button--disabled) { border-color: var(--sl-color-primary-600); background-color: var(--sl-color-primary-600); color: var(--sl-color-neutral-0); } .button--outline.button--default:active:not(.button--disabled) { border-color: var(--sl-color-primary-700); background-color: var(--sl-color-primary-700); color: var(--sl-color-neutral-0); } /* Primary */ .button--outline.button--primary { border-color: var(--sl-color-primary-600); color: var(--sl-color-primary-600); } .button--outline.button--primary:hover:not(.button--disabled), .button--outline.button--primary.button--checked:not(.button--disabled) { background-color: var(--sl-color-primary-600); color: var(--sl-color-neutral-0); } .button--outline.button--primary:active:not(.button--disabled) { border-color: var(--sl-color-primary-700); background-color: var(--sl-color-primary-700); color: var(--sl-color-neutral-0); } /* Success */ .button--outline.button--success { border-color: var(--sl-color-success-600); color: var(--sl-color-success-600); } .button--outline.button--success:hover:not(.button--disabled), .button--outline.button--success.button--checked:not(.button--disabled) { background-color: var(--sl-color-success-600); color: var(--sl-color-neutral-0); } .button--outline.button--success:active:not(.button--disabled) { border-color: var(--sl-color-success-700); background-color: var(--sl-color-success-700); color: var(--sl-color-neutral-0); } /* Neutral */ .button--outline.button--neutral { border-color: var(--sl-color-neutral-600); color: var(--sl-color-neutral-600); } .button--outline.button--neutral:hover:not(.button--disabled), .button--outline.button--neutral.button--checked:not(.button--disabled) { background-color: var(--sl-color-neutral-600); color: var(--sl-color-neutral-0); } .button--outline.button--neutral:active:not(.button--disabled) { border-color: var(--sl-color-neutral-700); background-color: var(--sl-color-neutral-700); color: var(--sl-color-neutral-0); } /* Warning */ .button--outline.button--warning { border-color: var(--sl-color-warning-600); color: var(--sl-color-warning-600); } .button--outline.button--warning:hover:not(.button--disabled), .button--outline.button--warning.button--checked:not(.button--disabled) { background-color: var(--sl-color-warning-600); color: var(--sl-color-neutral-0); } .button--outline.button--warning:active:not(.button--disabled) { border-color: var(--sl-color-warning-700); background-color: var(--sl-color-warning-700); color: var(--sl-color-neutral-0); } /* Danger */ .button--outline.button--danger { border-color: var(--sl-color-danger-600); color: var(--sl-color-danger-600); } .button--outline.button--danger:hover:not(.button--disabled), .button--outline.button--danger.button--checked:not(.button--disabled) { background-color: var(--sl-color-danger-600); color: var(--sl-color-neutral-0); } .button--outline.button--danger:active:not(.button--disabled) { border-color: var(--sl-color-danger-700); background-color: var(--sl-color-danger-700); color: var(--sl-color-neutral-0); } @media (forced-colors: active) { .button.button--outline.button--checked:not(.button--disabled) { outline: solid 2px transparent; } } /* * Text buttons */ .button--text { background-color: transparent; border-color: transparent; color: var(--sl-color-primary-600); } .button--text:hover:not(.button--disabled) { background-color: transparent; border-color: transparent; color: var(--sl-color-primary-500); } .button--text:focus-visible:not(.button--disabled) { background-color: transparent; border-color: transparent; color: var(--sl-color-primary-500); } .button--text:active:not(.button--disabled) { background-color: transparent; border-color: transparent; color: var(--sl-color-primary-700); } /* * Size modifiers */ .button--small { height: auto; min-height: var(--sl-input-height-small); font-size: var(--sl-button-font-size-small); line-height: calc(var(--sl-input-height-small) - var(--sl-input-border-width) * 2); border-radius: var(--sl-input-border-radius-small); } .button--medium { height: auto; min-height: var(--sl-input-height-medium); font-size: var(--sl-button-font-size-medium); line-height: calc(var(--sl-input-height-medium) - var(--sl-input-border-width) * 2); border-radius: var(--sl-input-border-radius-medium); } .button--large { height: auto; min-height: var(--sl-input-height-large); font-size: var(--sl-button-font-size-large); line-height: calc(var(--sl-input-height-large) - var(--sl-input-border-width) * 2); border-radius: var(--sl-input-border-radius-large); } /* * Pill modifier */ .button--pill.button--small { border-radius: var(--sl-input-height-small); } .button--pill.button--medium { border-radius: var(--sl-input-height-medium); } .button--pill.button--large { border-radius: var(--sl-input-height-large); } /* * Circle modifier */ .button--circle { padding-left: 0; padding-right: 0; } .button--circle.button--small { width: var(--sl-input-height-small); border-radius: 50%; } .button--circle.button--medium { width: var(--sl-input-height-medium); border-radius: 50%; } .button--circle.button--large { width: var(--sl-input-height-large); border-radius: 50%; } .button--circle .button__prefix, .button--circle .button__suffix, .button--circle .button__caret { display: none; } /* * Caret modifier */ .button--caret .button__suffix { display: none; } .button--caret .button__caret { height: auto; } /* * Loading modifier */ .button--loading { position: relative; cursor: wait; } .button--loading .button__prefix, .button--loading .button__label, .button--loading .button__suffix, .button--loading .button__caret { visibility: hidden; } .button--loading sl-spinner { --indicator-color: currentColor; position: absolute; font-size: 1em; height: 1em; width: 1em; top: calc(50% - 0.5em); left: calc(50% - 0.5em); } /* * Badges */ .button ::slotted(sl-badge) { position: absolute; top: 0; right: 0; translate: 50% -50%; pointer-events: none; } .button--rtl ::slotted(sl-badge) { right: auto; left: 0; translate: -50% -50%; } /* * Button spacing */ .button--has-label.button--small .button__label { padding: 0 var(--sl-spacing-small); } .button--has-label.button--medium .button__label { padding: 0 var(--sl-spacing-medium); } .button--has-label.button--large .button__label { padding: 0 var(--sl-spacing-large); } .button--has-prefix.button--small { padding-inline-start: var(--sl-spacing-x-small); } .button--has-prefix.button--small .button__label { padding-inline-start: var(--sl-spacing-x-small); } .button--has-prefix.button--medium { padding-inline-start: var(--sl-spacing-small); } .button--has-prefix.button--medium .button__label { padding-inline-start: var(--sl-spacing-small); } .button--has-prefix.button--large { padding-inline-start: var(--sl-spacing-small); } .button--has-prefix.button--large .button__label { padding-inline-start: var(--sl-spacing-small); } .button--has-suffix.button--small, .button--caret.button--small { padding-inline-end: var(--sl-spacing-x-small); } .button--has-suffix.button--small .button__label, .button--caret.button--small .button__label { padding-inline-end: var(--sl-spacing-x-small); } .button--has-suffix.button--medium, .button--caret.button--medium { padding-inline-end: var(--sl-spacing-small); } .button--has-suffix.button--medium .button__label, .button--caret.button--medium .button__label { padding-inline-end: var(--sl-spacing-small); } .button--has-suffix.button--large, .button--caret.button--large { padding-inline-end: var(--sl-spacing-small); } .button--has-suffix.button--large .button__label, .button--caret.button--large .button__label { padding-inline-end: var(--sl-spacing-small); } /* * Button groups support a variety of button types (e.g. buttons with tooltips, buttons as dropdown triggers, etc.). * This means buttons aren't always direct descendants of the button group, thus we can't target them with the * ::slotted selector. To work around this, the button group component does some magic to add these special classes to * buttons and we style them here instead. */ :host([data-sl-button-group__button--first]:not([data-sl-button-group__button--last])) .button { border-start-end-radius: 0; border-end-end-radius: 0; } :host([data-sl-button-group__button--inner]) .button { border-radius: 0; } :host([data-sl-button-group__button--last]:not([data-sl-button-group__button--first])) .button { border-start-start-radius: 0; border-end-start-radius: 0; } /* All except the first */ :host([data-sl-button-group__button]:not([data-sl-button-group__button--first])) { margin-inline-start: calc(-1 * var(--sl-input-border-width)); } /* Add a visual separator between solid buttons */ :host( [data-sl-button-group__button]:not( [data-sl-button-group__button--first], [data-sl-button-group__button--radio], [variant='default'] ):not(:hover) ) .button:after { content: ''; position: absolute; top: 0; inset-inline-start: 0; bottom: 0; border-left: solid 1px rgb(128 128 128 / 33%); mix-blend-mode: multiply; } /* Bump hovered, focused, and checked buttons up so their focus ring isn't clipped */ :host([data-sl-button-group__button--hover]) { z-index: 1; } /* Focus and checked are always on top */ :host([data-sl-button-group__button--focus]), :host([data-sl-button-group__button][checked]) { z-index: 2; } `;var lt=class extends X{constructor(){super(...arguments),this.formControlController=new Qo(this,{assumeInteractionOn:["click"]}),this.hasSlotController=new Ie(this,"[default]","prefix","suffix"),this.localize=new Tt(this),this.hasFocus=!1,this.invalid=!1,this.title="",this.variant="default",this.size="medium",this.caret=!1,this.disabled=!1,this.loading=!1,this.outline=!1,this.pill=!1,this.circle=!1,this.type="button",this.name="",this.value="",this.href="",this.rel="noreferrer noopener"}get validity(){return this.isButton()?this.button.validity:Si}get validationMessage(){return this.isButton()?this.button.validationMessage:""}firstUpdated(){this.isButton()&&this.formControlController.updateValidity()}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleFocus(){this.hasFocus=!0,this.emit("sl-focus")}handleClick(){this.type==="submit"&&this.formControlController.submit(this),this.type==="reset"&&this.formControlController.reset(this)}handleInvalid(t){this.formControlController.setValidity(!1),this.formControlController.emitInvalidEvent(t)}isButton(){return!this.href}isLink(){return!!this.href}handleDisabledChange(){this.isButton()&&this.formControlController.setValidity(this.disabled)}click(){this.button.click()}focus(t){this.button.focus(t)}blur(){this.button.blur()}checkValidity(){return this.isButton()?this.button.checkValidity():!0}getForm(){return this.formControlController.getForm()}reportValidity(){return this.isButton()?this.button.reportValidity():!0}setCustomValidity(t){this.isButton()&&(this.button.setCustomValidity(t),this.formControlController.updateValidity())}render(){let t=this.isLink(),e=t?qo`a`:qo`button`;return Zo`<${e} part="base" class=${mt({button:!0,"button--default":this.variant==="default","button--primary":this.variant==="primary","button--success":this.variant==="success","button--neutral":this.variant==="neutral","button--warning":this.variant==="warning","button--danger":this.variant==="danger","button--text":this.variant==="text","button--small":this.size==="small","button--medium":this.size==="medium","button--large":this.size==="large","button--caret":this.caret,"button--circle":this.circle,"button--disabled":this.disabled,"button--focused":this.hasFocus,"button--loading":this.loading,"button--standard":!this.outline,"button--outline":this.outline,"button--pill":this.pill,"button--rtl":this.localize.dir()==="rtl","button--has-label":this.hasSlotController.test("[default]"),"button--has-prefix":this.hasSlotController.test("prefix"),"button--has-suffix":this.hasSlotController.test("suffix")})} ?disabled=${z(t?void 0:this.disabled)} type=${z(t?void 0:this.type)} title=${this.title} name=${z(t?void 0:this.name)} value=${z(t?void 0:this.value)} href=${z(t&&!this.disabled?this.href:void 0)} target=${z(t?this.target:void 0)} download=${z(t?this.download:void 0)} rel=${z(t?this.rel:void 0)} role=${z(t?void 0:"button")} aria-disabled=${this.disabled?"true":"false"} tabindex=${this.disabled?"-1":"0"} @blur=${this.handleBlur} @focus=${this.handleFocus} @invalid=${this.isButton()?this.handleInvalid:null} @click=${this.handleClick} ><slot name="prefix" part="prefix" class="button__prefix"></slot><slot part="label" class="button__label"></slot><slot name="suffix" part="suffix" class="button__suffix"></slot>${this.caret?Zo`<sl-icon part="caret" class="button__caret" library="system" name="caret"></sl-icon>`:""} ${this.loading?Zo`<sl-spinner part="spinner"></sl-spinner>`:""}</${e}>`}};lt.styles=[ot,ja];lt.dependencies={"sl-icon":Pt,"sl-spinner":Tr};p([Z(".button")],lt.prototype,"button",2);p([At()],lt.prototype,"hasFocus",2);p([At()],lt.prototype,"invalid",2);p([y()],lt.prototype,"title",2);p([y({reflect:!0})],lt.prototype,"variant",2);p([y({reflect:!0})],lt.prototype,"size",2);p([y({type:Boolean,reflect:!0})],lt.prototype,"caret",2);p([y({type:Boolean,reflect:!0})],lt.prototype,"disabled",2);p([y({type:Boolean,reflect:!0})],lt.prototype,"loading",2);p([y({type:Boolean,reflect:!0})],lt.prototype,"outline",2);p([y({type:Boolean,reflect:!0})],lt.prototype,"pill",2);p([y({type:Boolean,reflect:!0})],lt.prototype,"circle",2);p([y()],lt.prototype,"type",2);p([y()],lt.prototype,"name",2);p([y()],lt.prototype,"value",2);p([y()],lt.prototype,"href",2);p([y()],lt.prototype,"target",2);p([y()],lt.prototype,"rel",2);p([y()],lt.prototype,"download",2);p([y()],lt.prototype,"form",2);p([y({attribute:"formaction"})],lt.prototype,"formAction",2);p([y({attribute:"formenctype"})],lt.prototype,"formEnctype",2);p([y({attribute:"formmethod"})],lt.prototype,"formMethod",2);p([y({attribute:"formnovalidate",type:Boolean})],lt.prototype,"formNoValidate",2);p([y({attribute:"formtarget"})],lt.prototype,"formTarget",2);p([dt("disabled",{waitUntilFirstUpdate:!0})],lt.prototype,"handleDisabledChange",1);lt.define("sl-button");var Wa=W` :host { display: inline-block; } .button-group { display: flex; flex-wrap: nowrap; } `;var io=class extends X{constructor(){super(...arguments),this.disableRole=!1,this.label=""}handleFocus(t){let e=Dr(t.target);e?.toggleAttribute("data-sl-button-group__button--focus",!0)}handleBlur(t){let e=Dr(t.target);e?.toggleAttribute("data-sl-button-group__button--focus",!1)}handleMouseOver(t){let e=Dr(t.target);e?.toggleAttribute("data-sl-button-group__button--hover",!0)}handleMouseOut(t){let e=Dr(t.target);e?.toggleAttribute("data-sl-button-group__button--hover",!1)}handleSlotChange(){let t=[...this.defaultSlot.assignedElements({flatten:!0})];t.forEach(e=>{let o=t.indexOf(e),r=Dr(e);r&&(r.toggleAttribute("data-sl-button-group__button",!0),r.toggleAttribute("data-sl-button-group__button--first",o===0),r.toggleAttribute("data-sl-button-group__button--inner",o>0&&o<t.length-1),r.toggleAttribute("data-sl-button-group__button--last",o===t.length-1),r.toggleAttribute("data-sl-button-group__button--radio",r.tagName.toLowerCase()==="sl-radio-button"))})}render(){return R`<div part="base" class="button-group" role="${this.disableRole?"presentation":"group"}" aria-label=${this.label} @focusout=${this.handleBlur} @focusin=${this.handleFocus} @mouseover=${this.handleMouseOver} @mouseout=${this.handleMouseOut} ><slot @slotchange=${this.handleSlotChange}></slot></div>`}};io.styles=[ot,Wa];p([Z("slot")],io.prototype,"defaultSlot",2);p([At()],io.prototype,"disableRole",2);p([y()],io.prototype,"label",2);function Dr(t){var e;let o="sl-button, sl-radio-button";return(e=t.closest(o))!=null?e:t.querySelector(o)}io.define("sl-button-group");var qa=W` :host(:not(:focus-within)) { position: absolute !important; width: 1px !important; height: 1px !important; clip: rect(0 0 0 0) !important; clip-path: inset(50%) !important; border: none !important; overflow: hidden !important; white-space: nowrap !important; padding: 0 !important; } `;var Or=class extends X{render(){return R`<slot></slot>`}};Or.styles=[ot,qa];var Za=W` :host { display: block; } .input { flex: 1 1 auto; display: inline-flex; align-items: stretch; justify-content: start; position: relative; width: 100%; font-family: var(--sl-input-font-family); font-weight: var(--sl-input-font-weight); letter-spacing: var(--sl-input-letter-spacing); vertical-align: middle; overflow: hidden; cursor: text; transition: var(--sl-transition-fast) color, var(--sl-transition-fast) border, var(--sl-transition-fast) box-shadow, var(--sl-transition-fast) background-color; } /* Standard inputs */ .input--standard { background-color: var(--sl-input-background-color); border: solid var(--sl-input-border-width) var(--sl-input-border-color); } .input--standard:hover:not(.input--disabled) { background-color: var(--sl-input-background-color-hover); border-color: var(--sl-input-border-color-hover); } .input--standard.input--focused:not(.input--disabled) { background-color: var(--sl-input-background-color-focus); border-color: var(--sl-input-border-color-focus); box-shadow: 0 0 0 var(--sl-focus-ring-width) var(--sl-input-focus-ring-color); } .input--standard.input--focused:not(.input--disabled) .input__control { color: var(--sl-input-color-focus); } .input--standard.input--disabled { background-color: var(--sl-input-background-color-disabled); border-color: var(--sl-input-border-color-disabled); opacity: 0.5; cursor: not-allowed; } .input--standard.input--disabled .input__control { color: var(--sl-input-color-disabled); } .input--standard.input--disabled .input__control::placeholder { color: var(--sl-input-placeholder-color-disabled); } /* Filled inputs */ .input--filled { border: none; background-color: var(--sl-input-filled-background-color); color: var(--sl-input-color); } .input--filled:hover:not(.input--disabled) { background-color: var(--sl-input-filled-background-color-hover); } .input--filled.input--focused:not(.input--disabled) { background-color: var(--sl-input-filled-background-color-focus); outline: var(--sl-focus-ring); outline-offset: var(--sl-focus-ring-offset); } .input--filled.input--disabled { background-color: var(--sl-input-filled-background-color-disabled); opacity: 0.5; cursor: not-allowed; } .input__control { flex: 1 1 auto; font-family: inherit; font-size: inherit; font-weight: inherit; min-width: 0; height: 100%; color: var(--sl-input-color); border: none; background: inherit; box-shadow: none; padding: 0; margin: 0; cursor: inherit; -webkit-appearance: none; } .input__control::-webkit-search-decoration, .input__control::-webkit-search-cancel-button, .input__control::-webkit-search-results-button, .input__control::-webkit-search-results-decoration { -webkit-appearance: none; } .input__control:-webkit-autofill, .input__control:-webkit-autofill:hover, .input__control:-webkit-autofill:focus, .input__control:-webkit-autofill:active { box-shadow: 0 0 0 var(--sl-input-height-large) var(--sl-input-background-color-hover) inset !important; -webkit-text-fill-color: var(--sl-color-primary-500); caret-color: var(--sl-input-color); } .input--filled .input__control:-webkit-autofill, .input--filled .input__control:-webkit-autofill:hover, .input--filled .input__control:-webkit-autofill:focus, .input--filled .input__control:-webkit-autofill:active { box-shadow: 0 0 0 var(--sl-input-height-large) var(--sl-input-filled-background-color) inset !important; } .input__control::placeholder { color: var(--sl-input-placeholder-color); user-select: none; -webkit-user-select: none; } .input:hover:not(.input--disabled) .input__control { color: var(--sl-input-color-hover); } .input__control:focus { outline: none; } .input__prefix, .input__suffix { display: inline-flex; flex: 0 0 auto; align-items: center; cursor: default; } .input__prefix ::slotted(sl-icon), .input__suffix ::slotted(sl-icon) { color: var(--sl-input-icon-color); } /* * Size modifiers */ .input--small { border-radius: var(--sl-input-border-radius-small); font-size: var(--sl-input-font-size-small); height: var(--sl-input-height-small); } .input--small .input__control { height: calc(var(--sl-input-height-small) - var(--sl-input-border-width) * 2); padding: 0 var(--sl-input-spacing-small); } .input--small .input__clear, .input--small .input__password-toggle { width: calc(1em + var(--sl-input-spacing-small) * 2); } .input--small .input__prefix ::slotted(*) { margin-inline-start: var(--sl-input-spacing-small); } .input--small .input__suffix ::slotted(*) { margin-inline-end: var(--sl-input-spacing-small); } .input--medium { border-radius: var(--sl-input-border-radius-medium); font-size: var(--sl-input-font-size-medium); height: var(--sl-input-height-medium); } .input--medium .input__control { height: calc(var(--sl-input-height-medium) - var(--sl-input-border-width) * 2); padding: 0 var(--sl-input-spacing-medium); } .input--medium .input__clear, .input--medium .input__password-toggle { width: calc(1em + var(--sl-input-spacing-medium) * 2); } .input--medium .input__prefix ::slotted(*) { margin-inline-start: var(--sl-input-spacing-medium); } .input--medium .input__suffix ::slotted(*) { margin-inline-end: var(--sl-input-spacing-medium); } .input--large { border-radius: var(--sl-input-border-radius-large); font-size: var(--sl-input-font-size-large); height: var(--sl-input-height-large); } .input--large .input__control { height: calc(var(--sl-input-height-large) - var(--sl-input-border-width) * 2); padding: 0 var(--sl-input-spacing-large); } .input--large .input__clear, .input--large .input__password-toggle { width: calc(1em + var(--sl-input-spacing-large) * 2); } .input--large .input__prefix ::slotted(*) { margin-inline-start: var(--sl-input-spacing-large); } .input--large .input__suffix ::slotted(*) { margin-inline-end: var(--sl-input-spacing-large); } /* * Pill modifier */ .input--pill.input--small { border-radius: var(--sl-input-height-small); } .input--pill.input--medium { border-radius: var(--sl-input-height-medium); } .input--pill.input--large { border-radius: var(--sl-input-height-large); } /* * Clearable + Password Toggle */ .input__clear, .input__password-toggle { display: inline-flex; align-items: center; justify-content: center; font-size: inherit; color: var(--sl-input-icon-color); border: none; background: none; padding: 0; transition: var(--sl-transition-fast) color; cursor: pointer; } .input__clear:hover, .input__password-toggle:hover { color: var(--sl-input-icon-color-hover); } .input__clear:focus, .input__password-toggle:focus { outline: none; } /* Don't show the browser's password toggle in Edge */ ::-ms-reveal { display: none; } /* Hide the built-in number spinner */ .input--no-spin-buttons input[type='number']::-webkit-outer-spin-button, .input--no-spin-buttons input[type='number']::-webkit-inner-spin-button { -webkit-appearance: none; display: none; } .input--no-spin-buttons input[type='number'] { -moz-appearance: textfield; } `;var Ei=(t="value")=>(e,o)=>{let r=e.constructor,i=r.prototype.attributeChangedCallback;r.prototype.attributeChangedCallback=function(n,a,s){var l;let u=r.getPropertyOptions(t),m=typeof u.attribute=="string"?u.attribute:t;if(n===m){let c=u.converter||eo,h=(typeof c=="function"?c:(l=c?.fromAttribute)!=null?l:eo.fromAttribute)(s,u.type);this[t]!==h&&(this[o]=h)}i.call(this,n,a,s)}};var Xa=W` .form-control .form-control__label { display: none; } .form-control .form-control__help-text { display: none; } /* Label */ .form-control--has-label .form-control__label { display: inline-block; color: var(--sl-input-label-color); margin-bottom: var(--sl-spacing-3x-small); } .form-control--has-label.form-control--small .form-control__label { font-size: var(--sl-input-label-font-size-small); } .form-control--has-label.form-control--medium .form-control__label { font-size: var(--sl-input-label-font-size-medium); } .form-control--has-label.form-control--large .form-control__label { font-size: var(--sl-input-label-font-size-large); } :host([required]) .form-control--has-label .form-control__label::after { content: var(--sl-input-required-content); margin-inline-start: var(--sl-input-required-content-offset); color: var(--sl-input-required-content-color); } /* Help text */ .form-control--has-help-text .form-control__help-text { display: block; color: var(--sl-input-help-text-color); margin-top: var(--sl-spacing-3x-small); } .form-control--has-help-text.form-control--small .form-control__help-text { font-size: var(--sl-input-help-text-font-size-small); } .form-control--has-help-text.form-control--medium .form-control__help-text { font-size: var(--sl-input-help-text-font-size-medium); } .form-control--has-help-text.form-control--large .form-control__help-text { font-size: var(--sl-input-help-text-font-size-large); } .form-control--has-help-text.form-control--radio-group .form-control__help-text { margin-top: var(--sl-spacing-2x-small); } `;var Ya=Ke(class extends Oe{constructor(t){if(super(t),t.type!==ue.PROPERTY&&t.type!==ue.ATTRIBUTE&&t.type!==ue.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!_i(t))throw Error("`live` bindings can only contain a single expression")}render(t){return t}update(t,[e]){if(e===Ut||e===_t)return e;let o=t.element,r=t.name;if(t.type===ue.PROPERTY){if(e===o[r])return Ut}else if(t.type===ue.BOOLEAN_ATTRIBUTE){if(!!e===o.hasAttribute(r))return Ut}else if(t.type===ue.ATTRIBUTE&&o.getAttribute(r)===e+"")return Ut;return La(t),e}});var U=class extends X{constructor(){super(...arguments),this.formControlController=new Qo(this,{assumeInteractionOn:["sl-blur","sl-input"]}),this.hasSlotController=new Ie(this,"help-text","label"),this.localize=new Tt(this),this.hasFocus=!1,this.title="",this.__numberInput=Object.assign(document.createElement("input"),{type:"number"}),this.__dateInput=Object.assign(document.createElement("input"),{type:"date"}),this.type="text",this.name="",this.value="",this.defaultValue="",this.size="medium",this.filled=!1,this.pill=!1,this.label="",this.helpText="",this.clearable=!1,this.disabled=!1,this.placeholder="",this.readonly=!1,this.passwordToggle=!1,this.passwordVisible=!1,this.noSpinButtons=!1,this.form="",this.required=!1,this.spellcheck=!0}get valueAsDate(){var t;return this.__dateInput.type=this.type,this.__dateInput.value=this.value,((t=this.input)==null?void 0:t.valueAsDate)||this.__dateInput.valueAsDate}set valueAsDate(t){this.__dateInput.type=this.type,this.__dateInput.valueAsDate=t,this.value=this.__dateInput.value}get valueAsNumber(){var t;return this.__numberInput.value=this.value,((t=this.input)==null?void 0:t.valueAsNumber)||this.__numberInput.valueAsNumber}set valueAsNumber(t){this.__numberInput.valueAsNumber=t,this.value=this.__numberInput.value}get validity(){return this.input.validity}get validationMessage(){return this.input.validationMessage}firstUpdated(){this.formControlController.updateValidity()}handleBlur(){this.hasFocus=!1,this.emit("sl-blur")}handleChange(){this.value=this.input.value,this.emit("sl-change")}handleClearClick(t){t.preventDefault(),this.value!==""&&(this.value="",this.emit("sl-clear"),this.emit("sl-input"),this.emit("sl-change")),this.input.focus()}handleFocus(){this.hasFocus=!0,this.emit("sl-focus")}handleInput(){this.value=this.input.value,this.formControlController.updateValidity(),this.emit("sl-input")}handleInvalid(t){this.formControlController.setValidity(!1),this.formControlController.emitInvalidEvent(t)}handleKeyDown(t){let e=t.metaKey||t.ctrlKey||t.shiftKey||t.altKey;t.key==="Enter"&&!e&&setTimeout(()=>{!t.defaultPrevented&&!t.isComposing&&this.formControlController.submit()})}handlePasswordToggle(){this.passwordVisible=!this.passwordVisible}handleDisabledChange(){this.formControlController.setValidity(this.disabled)}handleStepChange(){this.input.step=String(this.step),this.formControlController.updateValidity()}async handleValueChange(){await this.updateComplete,this.formControlController.updateValidity()}focus(t){this.input.focus(t)}blur(){this.input.blur()}select(){this.input.select()}setSelectionRange(t,e,o="none"){this.input.setSelectionRange(t,e,o)}setRangeText(t,e,o,r="preserve"){let i=e??this.input.selectionStart,n=o??this.input.selectionEnd;this.input.setRangeText(t,i,n,r),this.value!==this.input.value&&(this.value=this.input.value)}showPicker(){"showPicker"in HTMLInputElement.prototype&&this.input.showPicker()}stepUp(){this.input.stepUp(),this.value!==this.input.value&&(this.value=this.input.value)}stepDown(){this.input.stepDown(),this.value!==this.input.value&&(this.value=this.input.value)}checkValidity(){return this.input.checkValidity()}getForm(){return this.formControlController.getForm()}reportValidity(){return this.input.reportValidity()}setCustomValidity(t){this.input.setCustomValidity(t),this.formControlController.updateValidity()}render(){let t=this.hasSlotController.test("label"),e=this.hasSlotController.test("help-text"),o=this.label?!0:!!t,r=this.helpText?!0:!!e,n=this.clearable&&!this.disabled&&!this.readonly&&(typeof this.value=="number"||this.value.length>0);return R`<div part="form-control" class=${mt({"form-control":!0,"form-control--small":this.size==="small","form-control--medium":this.size==="medium","form-control--large":this.size==="large","form-control--has-label":o,"form-control--has-help-text":r})} ><label part="form-control-label" class="form-control__label" for="input" aria-hidden=${o?"false":"true"} ><slot name="label">${this.label}</slot></label><div part="form-control-input" class="form-control-input"><div part="base" class=${mt({input:!0,"input--small":this.size==="small","input--medium":this.size==="medium","input--large":this.size==="large","input--pill":this.pill,"input--standard":!this.filled,"input--filled":this.filled,"input--disabled":this.disabled,"input--focused":this.hasFocus,"input--empty":!this.value,"input--no-spin-buttons":this.noSpinButtons})} ><span part="prefix" class="input__prefix"><slot name="prefix"></slot></span><input part="input" id="input" class="input__control" type=${this.type==="password"&&this.passwordVisible?"text":this.type} title=${this.title} name=${z(this.name)} ?disabled=${this.disabled} ?readonly=${this.readonly} ?required=${this.required} placeholder=${z(this.placeholder)} minlength=${z(this.minlength)} maxlength=${z(this.maxlength)} min=${z(this.min)} max=${z(this.max)} step=${z(this.step)} .value=${Ya(this.value)} autocapitalize=${z(this.autocapitalize)} autocomplete=${z(this.autocomplete)} autocorrect=${z(this.autocorrect)} ?autofocus=${this.autofocus} spellcheck=${this.spellcheck} pattern=${z(this.pattern)} enterkeyhint=${z(this.enterkeyhint)} inputmode=${z(this.inputmode)} aria-describedby="help-text" @change=${this.handleChange} @input=${this.handleInput} @invalid=${this.handleInvalid} @keydown=${this.handleKeyDown} @focus=${this.handleFocus} @blur=${this.handleBlur} />${n?R`<button part="clear-button" class="input__clear" type="button" aria-label=${this.localize.term("clearEntry")} @click=${this.handleClearClick} tabindex="-1" ><slot name="clear-icon"><sl-icon name="x-circle-fill" library="system"></sl-icon></slot></button>`:""} ${this.passwordToggle&&!this.disabled?R`<button part="password-toggle-button" class="input__password-toggle" type="button" aria-label=${this.localize.term(this.passwordVisible?"hidePassword":"showPassword")} @click=${this.handlePasswordToggle} tabindex="-1" >${this.passwordVisible?R`<slot name="show-password-icon"><sl-icon name="eye-slash" library="system"></sl-icon></slot>`:R`<slot name="hide-password-icon"><sl-icon name="eye" library="system"></sl-icon></slot>`}</button>`:""}<span part="suffix" class="input__suffix"><slot name="suffix"></slot></span></div></div><div part="form-control-help-text" id="help-text" class="form-control__help-text" aria-hidden=${r?"false":"true"} ><slot name="help-text">${this.helpText}</slot></div></div>`}};U.styles=[ot,Xa,Za];U.dependencies={"sl-icon":Pt};p([Z(".input__control")],U.prototype,"input",2);p([At()],U.prototype,"hasFocus",2);p([y()],U.prototype,"title",2);p([y({reflect:!0})],U.prototype,"type",2);p([y()],U.prototype,"name",2);p([y()],U.prototype,"value",2);p([Ei()],U.prototype,"defaultValue",2);p([y({reflect:!0})],U.prototype,"size",2);p([y({type:Boolean,reflect:!0})],U.prototype,"filled",2);p([y({type:Boolean,reflect:!0})],U.prototype,"pill",2);p([y()],U.prototype,"label",2);p([y({attribute:"help-text"})],U.prototype,"helpText",2);p([y({type:Boolean})],U.prototype,"clearable",2);p([y({type:Boolean,reflect:!0})],U.prototype,"disabled",2);p([y()],U.prototype,"placeholder",2);p([y({type:Boolean,reflect:!0})],U.prototype,"readonly",2);p([y({attribute:"password-toggle",type:Boolean})],U.prototype,"passwordToggle",2);p([y({attribute:"password-visible",type:Boolean})],U.prototype,"passwordVisible",2);p([y({attribute:"no-spin-buttons",type:Boolean})],U.prototype,"noSpinButtons",2);p([y({reflect:!0})],U.prototype,"form",2);p([y({type:Boolean,reflect:!0})],U.prototype,"required",2);p([y()],U.prototype,"pattern",2);p([y({type:Number})],U.prototype,"minlength",2);p([y({type:Number})],U.prototype,"maxlength",2);p([y()],U.prototype,"min",2);p([y()],U.prototype,"max",2);p([y()],U.prototype,"step",2);p([y()],U.prototype,"autocapitalize",2);p([y()],U.prototype,"autocorrect",2);p([y()],U.prototype,"autocomplete",2);p([y({type:Boolean})],U.prototype,"autofocus",2);p([y()],U.prototype,"enterkeyhint",2);p([y({type:Boolean,converter:{fromAttribute:t=>!(!t||t==="false"),toAttribute:t=>t?"true":"false"}})],U.prototype,"spellcheck",2);p([y()],U.prototype,"inputmode",2);p([dt("disabled",{waitUntilFirstUpdate:!0})],U.prototype,"handleDisabledChange",1);p([dt("step",{waitUntilFirstUpdate:!0})],U.prototype,"handleStepChange",1);p([dt("value",{waitUntilFirstUpdate:!0})],U.prototype,"handleValueChange",1);function Ci(t,e){function o(i){let n=t.getBoundingClientRect(),a=t.ownerDocument.defaultView,s=n.left+a.scrollX,l=n.top+a.scrollY,u=i.pageX-s,m=i.pageY-l;e?.onMove&&e.onMove(u,m)}function r(){document.removeEventListener("pointermove",o),document.removeEventListener("pointerup",r),e?.onStop&&e.onStop()}document.addEventListener("pointermove",o,{passive:!0}),document.addEventListener("pointerup",r),e?.initialEvent instanceof PointerEvent&&o(e.initialEvent)}var Qa=W` :host { display: inline-block; } .dropdown::part(popup) { z-index: var(--sl-z-index-dropdown); } .dropdown[data-current-placement^='top']::part(popup) { transform-origin: bottom; } .dropdown[data-current-placement^='bottom']::part(popup) { transform-origin: top; } .dropdown[data-current-placement^='left']::part(popup) { transform-origin: right; } .dropdown[data-current-placement^='right']::part(popup) { transform-origin: left; } .dropdown__trigger { display: block; } .dropdown__panel { font-family: var(--sl-font-sans); font-size: var(--sl-font-size-medium); font-weight: var(--sl-font-weight-normal); box-shadow: var(--sl-shadow-large); border-radius: var(--sl-border-radius-medium); pointer-events: none; } .dropdown--open .dropdown__panel { display: block; pointer-events: all; } /* When users slot a menu, make sure it conforms to the popup's auto-size */ ::slotted(sl-menu) { max-width: var(--auto-size-available-width) !important; max-height: var(--auto-size-available-height) !important; } `;function*Ai(t=document.activeElement){t!=null&&(yield t,"shadowRoot"in t&&t.shadowRoot&&t.shadowRoot.mode!=="closed"&&(yield*Pa(Ai(t.shadowRoot.activeElement))))}function Pi(){return[...Ai()].pop()}var Ja=new WeakMap;function tl(t){let e=Ja.get(t);return e||(e=window.getComputedStyle(t,null),Ja.set(t,e)),e}function $d(t){if(typeof t.checkVisibility=="function")return t.checkVisibility({checkOpacity:!1,checkVisibilityCSS:!0});let e=tl(t);return e.visibility!=="hidden"&&e.display!=="none"}function Dd(t){let e=tl(t),{overflowY:o,overflowX:r}=e;return o==="scroll"||r==="scroll"?!0:o!=="auto"||r!=="auto"?!1:t.scrollHeight>t.clientHeight&&o==="auto"||t.scrollWidth>t.clientWidth&&r==="auto"}function Od(t){let e=t.tagName.toLowerCase(),o=Number(t.getAttribute("tabindex"));if(t.hasAttribute("tabindex")&&(isNaN(o)||o<=-1)||t.hasAttribute("disabled")||t.closest("[inert]"))return!1;if(e==="input"&&t.getAttribute("type")==="radio"){let n=t.getRootNode(),a=`input[type='radio'][name="${t.getAttribute("name")}"]`,s=n.querySelector(`${a}:checked`);return s?s===t:n.querySelector(a)===t}return $d(t)?(e==="audio"||e==="video")&&t.hasAttribute("controls")||t.hasAttribute("tabindex")||t.hasAttribute("contenteditable")&&t.getAttribute("contenteditable")!=="false"||["button","input","select","textarea","a","audio","video","summary","iframe"].includes(e)?!0:Dd(t):!1}function el(t){var e,o;let r=Ti(t),i=(e=r[0])!=null?e:null,n=(o=r[r.length-1])!=null?o:null;return{start:i,end:n}}function Id(t,e){var o;return((o=t.getRootNode({composed:!0}))==null?void 0:o.host)!==e}function Ti(t){let e=new WeakMap,o=[];function r(i){if(i instanceof Element){if(i.hasAttribute("inert")||i.closest("[inert]")||e.has(i))return;e.set(i,!0),!o.includes(i)&&Od(i)&&o.push(i),i instanceof HTMLSlotElement&&Id(i,t)&&i.assignedElements({flatten:!0}).forEach(n=>{r(n)}),i.shadowRoot!==null&&i.shadowRoot.mode==="open"&&r(i.shadowRoot)}for(let n of i.children)r(n)}return r(t),o.sort((i,n)=>{let a=Number(i.getAttribute("tabindex"))||0;return(Number(n.getAttribute("tabindex"))||0)-a})}var ol=W` :host { --arrow-color: var(--sl-color-neutral-1000); --arrow-size: 6px; /* * These properties are computed to account for the arrow's dimensions after being rotated 45. The constant * 0.7071 is derived from sin(45), which is the diagonal size of the arrow's container after rotating. */ --arrow-size-diagonal: calc(var(--arrow-size) * 0.7071); --arrow-padding-offset: calc(var(--arrow-size-diagonal) - var(--arrow-size)); display: contents; } .popup { position: absolute; isolation: isolate; max-width: var(--auto-size-available-width, none); max-height: var(--auto-size-available-height, none); } .popup--fixed { position: fixed; } .popup:not(.popup--active) { display: none; } .popup__arrow { position: absolute; width: calc(var(--arrow-size-diagonal) * 2); height: calc(var(--arrow-size-diagonal) * 2); rotate: 45deg; background: var(--arrow-color); z-index: -1; } /* Hover bridge */ .popup-hover-bridge:not(.popup-hover-bridge--visible) { display: none; } .popup-hover-bridge { position: fixed; z-index: calc(var(--sl-z-index-dropdown) - 1); top: 0; right: 0; bottom: 0; left: 0; clip-path: polygon( var(--hover-bridge-top-left-x, 0) var(--hover-bridge-top-left-y, 0), var(--hover-bridge-top-right-x, 0) var(--hover-bridge-top-right-y, 0), var(--hover-bridge-bottom-right-x, 0) var(--hover-bridge-bottom-right-y, 0), var(--hover-bridge-bottom-left-x, 0) var(--hover-bridge-bottom-left-y, 0) ); } `;var il=["top","right","bottom","left"],rl=["start","end"],Jn=il.reduce((t,e)=>t.concat(e,e+"-"+rl[0],e+"-"+rl[1]),[]),Re=Math.min,Jt=Math.max,Br=Math.round,Fr=Math.floor,Ce=t=>({x:t,y:t}),Rd={left:"right",right:"left",bottom:"top",top:"bottom"},Bd={start:"end",end:"start"};function Mi(t,e,o){return Jt(t,Re(e,o))}function no(t,e){return typeof t=="function"?t(e):t}function Ae(t){return t.split("-")[0]}function ye(t){return t.split("-")[1]}function ts(t){return t==="x"?"y":"x"}function Li(t){return t==="y"?"height":"width"}function so(t){return["top","bottom"].includes(Ae(t))?"y":"x"}function $i(t){return ts(so(t))}function es(t,e,o){o===void 0&&(o=!1);let r=ye(t),i=$i(t),n=Li(i),a=i==="x"?r===(o?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[n]>e.floating[n]&&(a=Rr(a)),[a,Rr(a)]}function nl(t){let e=Rr(t);return[Ir(t),e,Ir(e)]}function Ir(t){return t.replace(/start|end/g,e=>Bd[e])}function Fd(t,e,o){let r=["left","right"],i=["right","left"],n=["top","bottom"],a=["bottom","top"];switch(t){case"top":case"bottom":return o?e?i:r:e?r:i;case"left":case"right":return e?n:a;default:return[]}}function sl(t,e,o,r){let i=ye(t),n=Fd(Ae(t),o==="start",r);return i&&(n=n.map(a=>a+"-"+i),e&&(n=n.concat(n.map(Ir)))),n}function Rr(t){return t.replace(/left|right|bottom|top/g,e=>Rd[e])}function zd(t){return{top:0,right:0,bottom:0,left:0,...t}}function os(t){return typeof t!="number"?zd(t):{top:t,right:t,bottom:t,left:t}}function Lo(t){let{x:e,y:o,width:r,height:i}=t;return{width:r,height:i,top:o,left:e,right:e+r,bottom:o+i,x:e,y:o}}function al(t,e,o){let{reference:r,floating:i}=t,n=so(e),a=$i(e),s=Li(a),l=Ae(e),u=n==="y",m=r.x+r.width/2-i.width/2,c=r.y+r.height/2-i.height/2,f=r[s]/2-i[s]/2,h;switch(l){case"top":h={x:m,y:r.y-i.height};break;case"bottom":h={x:m,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:c};break;case"left":h={x:r.x-i.width,y:c};break;default:h={x:r.x,y:r.y}}switch(ye(e)){case"start":h[a]-=f*(o&&u?-1:1);break;case"end":h[a]+=f*(o&&u?-1:1);break}return h}var ll=async(t,e,o)=>{let{placement:r="bottom",strategy:i="absolute",middleware:n=[],platform:a}=o,s=n.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(e)),u=await a.getElementRects({reference:t,floating:e,strategy:i}),{x:m,y:c}=al(u,r,l),f=r,h={},g=0;for(let b=0;b<s.length;b++){let{name:w,fn:_}=s[b],{x,y:E,data:$,reset:O}=await _({x:m,y:c,initialPlacement:r,placement:f,strategy:i,middlewareData:h,rects:u,platform:a,elements:{reference:t,floating:e}});m=x??m,c=E??c,h={...h,[w]:{...h[w],...$}},O&&g<=50&&(g++,typeof O=="object"&&(O.placement&&(f=O.placement),O.rects&&(u=O.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:i}):O.rects),{x:m,y:c}=al(u,f,l)),b=-1)}return{x:m,y:c,placement:f,strategy:i,middlewareData:h}};async function zr(t,e){var o;e===void 0&&(e={});let{x:r,y:i,platform:n,rects:a,elements:s,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:m="viewport",elementContext:c="floating",altBoundary:f=!1,padding:h=0}=no(e,t),g=os(h),w=s[f?c==="floating"?"reference":"floating":c],_=Lo(await n.getClippingRect({element:(o=await(n.isElement==null?void 0:n.isElement(w)))==null||o?w:w.contextElement||await(n.getDocumentElement==null?void 0:n.getDocumentElement(s.floating)),boundary:u,rootBoundary:m,strategy:l})),x=c==="floating"?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,E=await(n.getOffsetParent==null?void 0:n.getOffsetParent(s.floating)),$=await(n.isElement==null?void 0:n.isElement(E))?await(n.getScale==null?void 0:n.getScale(E))||{x:1,y:1}:{x:1,y:1},O=Lo(n.convertOffsetParentRelativeRectToViewportRelativeRect?await n.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:x,offsetParent:E,strategy:l}):x);return{top:(_.top-O.top+g.top)/$.y,bottom:(O.bottom-_.bottom+g.bottom)/$.y,left:(_.left-O.left+g.left)/$.x,right:(O.right-_.right+g.right)/$.x}}var cl=t=>({name:"arrow",options:t,async fn(e){let{x:o,y:r,placement:i,rects:n,platform:a,elements:s,middlewareData:l}=e,{element:u,padding:m=0}=no(t,e)||{};if(u==null)return{};let c=os(m),f={x:o,y:r},h=$i(i),g=Li(h),b=await a.getDimensions(u),w=h==="y",_=w?"top":"left",x=w?"bottom":"right",E=w?"clientHeight":"clientWidth",$=n.reference[g]+n.reference[h]-f[h]-n.floating[g],O=f[h]-n.reference[h],K=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u)),G=K?K[E]:0;(!G||!await(a.isElement==null?void 0:a.isElement(K)))&&(G=s.floating[E]||n.floating[g]);let J=$/2-O/2,I=G/2-b[g]/2-1,H=Re(c[_],I),k=Re(c[x],I),it=H,pt=G-b[g]-k,tt=G/2-b[g]/2+J,Lt=Mi(it,tt,pt),xt=!l.arrow&&ye(i)!=null&&tt!==Lt&&n.reference[g]/2-(tt<it?H:k)-b[g]/2<0,Q=xt?tt<it?tt-it:tt-pt:0;return{[h]:f[h]+Q,data:{[h]:Lt,centerOffset:tt-Lt-Q,...xt&&{alignmentOffset:Q}},reset:xt}}});function Nd(t,e,o){return(t?[...o.filter(i=>ye(i)===t),...o.filter(i=>ye(i)!==t)]:o.filter(i=>Ae(i)===i)).filter(i=>t?ye(i)===t||(e?Ir(i)!==i:!1):!0)}var ul=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var o,r,i;let{rects:n,middlewareData:a,placement:s,platform:l,elements:u}=e,{crossAxis:m=!1,alignment:c,allowedPlacements:f=Jn,autoAlignment:h=!0,...g}=no(t,e),b=c!==void 0||f===Jn?Nd(c||null,h,f):f,w=await zr(e,g),_=((o=a.autoPlacement)==null?void 0:o.index)||0,x=b[_];if(x==null)return{};let E=es(x,n,await(l.isRTL==null?void 0:l.isRTL(u.floating)));if(s!==x)return{reset:{placement:b[0]}};let $=[w[Ae(x)],w[E[0]],w[E[1]]],O=[...((r=a.autoPlacement)==null?void 0:r.overflows)||[],{placement:x,overflows:$}],K=b[_+1];if(K)return{data:{index:_+1,overflows:O},reset:{placement:K}};let G=O.map(H=>{let k=ye(H.placement);return[H.placement,k&&m?H.overflows.slice(0,2).reduce((it,pt)=>it+pt,0):H.overflows[0],H.overflows]}).sort((H,k)=>H[1]-k[1]),I=((i=G.filter(H=>H[2].slice(0,ye(H[0])?2:3).every(k=>k<=0))[0])==null?void 0:i[0])||G[0][0];return I!==s?{data:{index:_+1,overflows:O},reset:{placement:I}}:{}}}},dl=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var o,r;let{placement:i,middlewareData:n,rects:a,initialPlacement:s,platform:l,elements:u}=e,{mainAxis:m=!0,crossAxis:c=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:b=!0,...w}=no(t,e);if((o=n.arrow)!=null&&o.alignmentOffset)return{};let _=Ae(i),x=so(s),E=Ae(s)===s,$=await(l.isRTL==null?void 0:l.isRTL(u.floating)),O=f||(E||!b?[Rr(s)]:nl(s)),K=g!=="none";!f&&K&&O.push(...sl(s,b,g,$));let G=[s,...O],J=await zr(e,w),I=[],H=((r=n.flip)==null?void 0:r.overflows)||[];if(m&&I.push(J[_]),c){let tt=es(i,a,$);I.push(J[tt[0]],J[tt[1]])}if(H=[...H,{placement:i,overflows:I}],!I.every(tt=>tt<=0)){var k,it;let tt=(((k=n.flip)==null?void 0:k.index)||0)+1,Lt=G[tt];if(Lt)return{data:{index:tt,overflows:H},reset:{placement:Lt}};let xt=(it=H.filter(Q=>Q.overflows[0]<=0).sort((Q,$t)=>Q.overflows[1]-$t.overflows[1])[0])==null?void 0:it.placement;if(!xt)switch(h){case"bestFit":{var pt;let Q=(pt=H.filter($t=>{if(K){let Rt=so($t.placement);return Rt===x||Rt==="y"}return!0}).map($t=>[$t.placement,$t.overflows.filter(Rt=>Rt>0).reduce((Rt,Vt)=>Rt+Vt,0)]).sort(($t,Rt)=>$t[1]-Rt[1])[0])==null?void 0:pt[0];Q&&(xt=Q);break}case"initialPlacement":xt=s;break}if(i!==xt)return{reset:{placement:xt}}}return{}}}};async function Hd(t,e){let{placement:o,platform:r,elements:i}=t,n=await(r.isRTL==null?void 0:r.isRTL(i.floating)),a=Ae(o),s=ye(o),l=so(o)==="y",u=["left","top"].includes(a)?-1:1,m=n&&l?-1:1,c=no(e,t),{mainAxis:f,crossAxis:h,alignmentAxis:g}=typeof c=="number"?{mainAxis:c,crossAxis:0,alignmentAxis:null}:{mainAxis:c.mainAxis||0,crossAxis:c.crossAxis||0,alignmentAxis:c.alignmentAxis};return s&&typeof g=="number"&&(h=s==="end"?g*-1:g),l?{x:h*m,y:f*u}:{x:f*u,y:h*m}}var hl=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var o,r;let{x:i,y:n,placement:a,middlewareData:s}=e,l=await Hd(e,t);return a===((o=s.offset)==null?void 0:o.placement)&&(r=s.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:n+l.y,data:{...l,placement:a}}}}},pl=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){let{x:o,y:r,placement:i}=e,{mainAxis:n=!0,crossAxis:a=!1,limiter:s={fn:w=>{let{x:_,y:x}=w;return{x:_,y:x}}},...l}=no(t,e),u={x:o,y:r},m=await zr(e,l),c=so(Ae(i)),f=ts(c),h=u[f],g=u[c];if(n){let w=f==="y"?"top":"left",_=f==="y"?"bottom":"right",x=h+m[w],E=h-m[_];h=Mi(x,h,E)}if(a){let w=c==="y"?"top":"left",_=c==="y"?"bottom":"right",x=g+m[w],E=g-m[_];g=Mi(x,g,E)}let b=s.fn({...e,[f]:h,[c]:g});return{...b,data:{x:b.x-o,y:b.y-r,enabled:{[f]:n,[c]:a}}}}}};var fl=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var o,r;let{placement:i,rects:n,platform:a,elements:s}=e,{apply:l=()=>{},...u}=no(t,e),m=await zr(e,u),c=Ae(i),f=ye(i),h=so(i)==="y",{width:g,height:b}=n.floating,w,_;c==="top"||c==="bottom"?(w=c,_=f===(await(a.isRTL==null?void 0:a.isRTL(s.floating))?"start":"end")?"left":"right"):(_=c,w=f==="end"?"top":"bottom");let x=b-m.top-m.bottom,E=g-m.left-m.right,$=Re(b-m[w],x),O=Re(g-m[_],E),K=!e.middlewareData.shift,G=$,J=O;if((o=e.middlewareData.shift)!=null&&o.enabled.x&&(J=E),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(G=x),K&&!f){let H=Jt(m.left,0),k=Jt(m.right,0),it=Jt(m.top,0),pt=Jt(m.bottom,0);h?J=g-2*(H!==0||k!==0?H+k:Jt(m.left,m.right)):G=b-2*(it!==0||pt!==0?it+pt:Jt(m.top,m.bottom))}await l({...e,availableWidth:J,availableHeight:G});let I=await a.getDimensions(s.floating);return g!==I.width||b!==I.height?{reset:{rects:!0}}:{}}}};function Di(){return typeof window<"u"}function $o(t){return gl(t)?(t.nodeName||"").toLowerCase():"#document"}function re(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Pe(t){var e;return(e=(gl(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function gl(t){return Di()?t instanceof Node||t instanceof re(t).Node:!1}function ve(t){return Di()?t instanceof Element||t instanceof re(t).Element:!1}function Te(t){return Di()?t instanceof HTMLElement||t instanceof re(t).HTMLElement:!1}function ml(t){return!Di()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof re(t).ShadowRoot}function tr(t){let{overflow:e,overflowX:o,overflowY:r,display:i}=_e(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+o)&&!["inline","contents"].includes(i)}function bl(t){return["table","td","th"].includes($o(t))}function Nr(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function er(t){let e=Oi(),o=ve(t)?_e(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>o[r]?o[r]!=="none":!1)||(o.containerType?o.containerType!=="normal":!1)||!e&&(o.backdropFilter?o.backdropFilter!=="none":!1)||!e&&(o.filter?o.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(o.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(o.contain||"").includes(r))}function yl(t){let e=je(t);for(;Te(e)&&!Do(e);){if(er(e))return e;if(Nr(e))return null;e=je(e)}return null}function Oi(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Do(t){return["html","body","#document"].includes($o(t))}function _e(t){return re(t).getComputedStyle(t)}function Hr(t){return ve(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function je(t){if($o(t)==="html")return t;let e=t.assignedSlot||t.parentNode||ml(t)&&t.host||Pe(t);return ml(e)?e.host:e}function vl(t){let e=je(t);return Do(e)?t.ownerDocument?t.ownerDocument.body:t.body:Te(e)&&tr(e)?e:vl(e)}function Jo(t,e,o){var r;e===void 0&&(e=[]),o===void 0&&(o=!0);let i=vl(t),n=i===((r=t.ownerDocument)==null?void 0:r.body),a=re(i);if(n){let s=Ii(a);return e.concat(a,a.visualViewport||[],tr(i)?i:[],s&&o?Jo(s):[])}return e.concat(i,Jo(i,[],o))}function Ii(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function kl(t){let e=_e(t),o=parseFloat(e.width)||0,r=parseFloat(e.height)||0,i=Te(t),n=i?t.offsetWidth:o,a=i?t.offsetHeight:r,s=Br(o)!==n||Br(r)!==a;return s&&(o=n,r=a),{width:o,height:r,$:s}}function is(t){return ve(t)?t:t.contextElement}function or(t){let e=is(t);if(!Te(e))return Ce(1);let o=e.getBoundingClientRect(),{width:r,height:i,$:n}=kl(e),a=(n?Br(o.width):o.width)/r,s=(n?Br(o.height):o.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!s||!Number.isFinite(s))&&(s=1),{x:a,y:s}}var Vd=Ce(0);function xl(t){let e=re(t);return!Oi()||!e.visualViewport?Vd:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Gd(t,e,o){return e===void 0&&(e=!1),!o||e&&o!==re(t)?!1:e}function Oo(t,e,o,r){e===void 0&&(e=!1),o===void 0&&(o=!1);let i=t.getBoundingClientRect(),n=is(t),a=Ce(1);e&&(r?ve(r)&&(a=or(r)):a=or(t));let s=Gd(n,o,r)?xl(n):Ce(0),l=(i.left+s.x)/a.x,u=(i.top+s.y)/a.y,m=i.width/a.x,c=i.height/a.y;if(n){let f=re(n),h=r&&ve(r)?re(r):r,g=f,b=Ii(g);for(;b&&r&&h!==g;){let w=or(b),_=b.getBoundingClientRect(),x=_e(b),E=_.left+(b.clientLeft+parseFloat(x.paddingLeft))*w.x,$=_.top+(b.clientTop+parseFloat(x.paddingTop))*w.y;l*=w.x,u*=w.y,m*=w.x,c*=w.y,l+=E,u+=$,g=re(b),b=Ii(g)}}return Lo({width:m,height:c,x:l,y:u})}function ns(t,e){let o=Hr(t).scrollLeft;return e?e.left+o:Oo(Pe(t)).left+o}function Sl(t,e,o){o===void 0&&(o=!1);let r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(o?0:ns(t,r)),n=r.top+e.scrollTop;return{x:i,y:n}}function Ud(t){let{elements:e,rect:o,offsetParent:r,strategy:i}=t,n=i==="fixed",a=Pe(r),s=e?Nr(e.floating):!1;if(r===a||s&&n)return o;let l={scrollLeft:0,scrollTop:0},u=Ce(1),m=Ce(0),c=Te(r);if((c||!c&&!n)&&(($o(r)!=="body"||tr(a))&&(l=Hr(r)),Te(r))){let h=Oo(r);u=or(r),m.x=h.x+r.clientLeft,m.y=h.y+r.clientTop}let f=a&&!c&&!n?Sl(a,l,!0):Ce(0);return{width:o.width*u.x,height:o.height*u.y,x:o.x*u.x-l.scrollLeft*u.x+m.x+f.x,y:o.y*u.y-l.scrollTop*u.y+m.y+f.y}}function Kd(t){return Array.from(t.getClientRects())}function jd(t){let e=Pe(t),o=Hr(t),r=t.ownerDocument.body,i=Jt(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),n=Jt(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight),a=-o.scrollLeft+ns(t),s=-o.scrollTop;return _e(r).direction==="rtl"&&(a+=Jt(e.clientWidth,r.clientWidth)-i),{width:i,height:n,x:a,y:s}}function Wd(t,e){let o=re(t),r=Pe(t),i=o.visualViewport,n=r.clientWidth,a=r.clientHeight,s=0,l=0;if(i){n=i.width,a=i.height;let u=Oi();(!u||u&&e==="fixed")&&(s=i.offsetLeft,l=i.offsetTop)}return{width:n,height:a,x:s,y:l}}function qd(t,e){let o=Oo(t,!0,e==="fixed"),r=o.top+t.clientTop,i=o.left+t.clientLeft,n=Te(t)?or(t):Ce(1),a=t.clientWidth*n.x,s=t.clientHeight*n.y,l=i*n.x,u=r*n.y;return{width:a,height:s,x:l,y:u}}function _l(t,e,o){let r;if(e==="viewport")r=Wd(t,o);else if(e==="document")r=jd(Pe(t));else if(ve(e))r=qd(e,o);else{let i=xl(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Lo(r)}function El(t,e){let o=je(t);return o===e||!ve(o)||Do(o)?!1:_e(o).position==="fixed"||El(o,e)}function Zd(t,e){let o=e.get(t);if(o)return o;let r=Jo(t,[],!1).filter(s=>ve(s)&&$o(s)!=="body"),i=null,n=_e(t).position==="fixed",a=n?je(t):t;for(;ve(a)&&!Do(a);){let s=_e(a),l=er(a);!l&&s.position==="fixed"&&(i=null),(n?!l&&!i:!l&&s.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||tr(a)&&!l&&El(t,a))?r=r.filter(m=>m!==a):i=s,a=je(a)}return e.set(t,r),r}function Xd(t){let{element:e,boundary:o,rootBoundary:r,strategy:i}=t,a=[...o==="clippingAncestors"?Nr(e)?[]:Zd(e,this._c):[].concat(o),r],s=a[0],l=a.reduce((u,m)=>{let c=_l(e,m,i);return u.top=Jt(c.top,u.top),u.right=Re(c.right,u.right),u.bottom=Re(c.bottom,u.bottom),u.left=Jt(c.left,u.left),u},_l(e,s,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Yd(t){let{width:e,height:o}=kl(t);return{width:e,height:o}}function Qd(t,e,o){let r=Te(e),i=Pe(e),n=o==="fixed",a=Oo(t,!0,n,e),s={scrollLeft:0,scrollTop:0},l=Ce(0);if(r||!r&&!n)if(($o(e)!=="body"||tr(i))&&(s=Hr(e)),r){let f=Oo(e,!0,n,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else i&&(l.x=ns(i));let u=i&&!r&&!n?Sl(i,s):Ce(0),m=a.left+s.scrollLeft-l.x-u.x,c=a.top+s.scrollTop-l.y-u.y;return{x:m,y:c,width:a.width,height:a.height}}function rs(t){return _e(t).position==="static"}function wl(t,e){if(!Te(t)||_e(t).position==="fixed")return null;if(e)return e(t);let o=t.offsetParent;return Pe(t)===o&&(o=o.ownerDocument.body),o}function Cl(t,e){let o=re(t);if(Nr(t))return o;if(!Te(t)){let i=je(t);for(;i&&!Do(i);){if(ve(i)&&!rs(i))return i;i=je(i)}return o}let r=wl(t,e);for(;r&&bl(r)&&rs(r);)r=wl(r,e);return r&&Do(r)&&rs(r)&&!er(r)?o:r||yl(t)||o}var Jd=async function(t){let e=this.getOffsetParent||Cl,o=this.getDimensions,r=await o(t.floating);return{reference:Qd(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function th(t){return _e(t).direction==="rtl"}var Vr={convertOffsetParentRelativeRectToViewportRelativeRect:Ud,getDocumentElement:Pe,getClippingRect:Xd,getOffsetParent:Cl,getElementRects:Jd,getClientRects:Kd,getDimensions:Yd,getScale:or,isElement:ve,isRTL:th};function Al(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function eh(t,e){let o=null,r,i=Pe(t);function n(){var s;clearTimeout(r),(s=o)==null||s.disconnect(),o=null}function a(s,l){s===void 0&&(s=!1),l===void 0&&(l=1),n();let u=t.getBoundingClientRect(),{left:m,top:c,width:f,height:h}=u;if(s||e(),!f||!h)return;let g=Fr(c),b=Fr(i.clientWidth-(m+f)),w=Fr(i.clientHeight-(c+h)),_=Fr(m),E={rootMargin:-g+"px "+-b+"px "+-w+"px "+-_+"px",threshold:Jt(0,Re(1,l))||1},$=!0;function O(K){let G=K[0].intersectionRatio;if(G!==l){if(!$)return a();G?a(!1,G):r=setTimeout(()=>{a(!1,1e-7)},1e3)}G===1&&!Al(u,t.getBoundingClientRect())&&a(),$=!1}try{o=new IntersectionObserver(O,{...E,root:i.ownerDocument})}catch{o=new IntersectionObserver(O,E)}o.observe(t)}return a(!0),n}function Pl(t,e,o,r){r===void 0&&(r={});let{ancestorScroll:i=!0,ancestorResize:n=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=is(t),m=i||n?[...u?Jo(u):[],...Jo(e)]:[];m.forEach(_=>{i&&_.addEventListener("scroll",o,{passive:!0}),n&&_.addEventListener("resize",o)});let c=u&&s?eh(u,o):null,f=-1,h=null;a&&(h=new ResizeObserver(_=>{let[x]=_;x&&x.target===u&&h&&(h.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var E;(E=h)==null||E.observe(e)})),o()}),u&&!l&&h.observe(u),h.observe(e));let g,b=l?Oo(t):null;l&&w();function w(){let _=Oo(t);b&&!Al(b,_)&&o(),b=_,g=requestAnimationFrame(w)}return o(),()=>{var _;m.forEach(x=>{i&&x.removeEventListener("scroll",o),n&&x.removeEventListener("resize",o)}),c?.(),(_=h)==null||_.disconnect(),h=null,l&&cancelAnimationFrame(g)}}var Ri=hl,Tl=ul,Bi=pl,Ml=dl,ss=fl;var Fi=cl;var zi=(t,e,o)=>{let r=new Map,i={platform:Vr,...o},n={...i.platform,_c:r};return ll(t,e,{...i,platform:n})};function Ll(t){return oh(t)}function as(t){return t.assignedSlot?t.assignedSlot:t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}function oh(t){for(let e=t;e;e=as(e))if(e instanceof Element&&getComputedStyle(e).display==="none")return null;for(let e=as(t);e;e=as(e)){if(!(e instanceof Element))continue;let o=getComputedStyle(e);if(o.display!=="contents"&&(o.position!=="static"||er(o)||e.tagName==="BODY"))return e}return null}function rh(t){return t!==null&&typeof t=="object"&&"getBoundingClientRect"in t&&("contextElement"in t?t.contextElement instanceof Element:!0)}var ut=class extends X{constructor(){super(...arguments),this.localize=new Tt(this),this.active=!1,this.placement="top",this.strategy="absolute",this.distance=0,this.skidding=0,this.arrow=!1,this.arrowPlacement="anchor",this.arrowPadding=10,this.flip=!1,this.flipFallbackPlacements="",this.flipFallbackStrategy="best-fit",this.flipPadding=0,this.shift=!1,this.shiftPadding=0,this.autoSizePadding=0,this.hoverBridge=!1,this.updateHoverBridge=()=>{if(this.hoverBridge&&this.anchorEl){let t=this.anchorEl.getBoundingClientRect(),e=this.popup.getBoundingClientRect(),o=this.placement.includes("top")||this.placement.includes("bottom"),r=0,i=0,n=0,a=0,s=0,l=0,u=0,m=0;o?t.top<e.top?(r=t.left,i=t.bottom,n=t.right,a=t.bottom,s=e.left,l=e.top,u=e.right,m=e.top):(r=e.left,i=e.bottom,n=e.right,a=e.bottom,s=t.left,l=t.top,u=t.right,m=t.top):t.left<e.left?(r=t.right,i=t.top,n=e.left,a=e.top,s=t.right,l=t.bottom,u=e.left,m=e.bottom):(r=e.right,i=e.top,n=t.left,a=t.top,s=e.right,l=e.bottom,u=t.left,m=t.bottom),this.style.setProperty("--hover-bridge-top-left-x",`${r}px`),this.style.setProperty("--hover-bridge-top-left-y",`${i}px`),this.style.setProperty("--hover-bridge-top-right-x",`${n}px`),this.style.setProperty("--hover-bridge-top-right-y",`${a}px`),this.style.setProperty("--hover-bridge-bottom-left-x",`${s}px`),this.style.setProperty("--hover-bridge-bottom-left-y",`${l}px`),this.style.setProperty("--hover-bridge-bottom-right-x",`${u}px`),this.style.setProperty("--hover-bridge-bottom-right-y",`${m}px`)}}}async connectedCallback(){super.connectedCallback(),await this.updateComplete,this.start()}disconnectedCallback(){super.disconnectedCallback(),this.stop()}async updated(t){super.updated(t),t.has("active")&&(this.active?this.start():this.stop()),t.has("anchor")&&this.handleAnchorChange(),this.active&&(await this.updateComplete,this.reposition())}async handleAnchorChange(){if(await this.stop(),this.anchor&&typeof this.anchor=="string"){let t=this.getRootNode();this.anchorEl=t.getElementById(this.anchor)}else this.anchor instanceof Element||rh(this.anchor)?this.anchorEl=this.anchor:this.anchorEl=this.querySelector('[slot="anchor"]');this.anchorEl instanceof HTMLSlotElement&&(this.anchorEl=this.anchorEl.assignedElements({flatten:!0})[0]),this.anchorEl&&this.active&&this.start()}start(){!this.anchorEl||!this.active||(this.cleanup=Pl(this.anchorEl,this.popup,()=>{this.reposition()}))}async stop(){return new Promise(t=>{this.cleanup?(this.cleanup(),this.cleanup=void 0,this.removeAttribute("data-current-placement"),this.style.removeProperty("--auto-size-available-width"),this.style.removeProperty("--auto-size-available-height"),requestAnimationFrame(()=>t())):t()})}reposition(){if(!this.active||!this.anchorEl)return;let t=[Ri({mainAxis:this.distance,crossAxis:this.skidding})];this.sync?t.push(ss({apply:({rects:o})=>{let r=this.sync==="width"||this.sync==="both",i=this.sync==="height"||this.sync==="both";this.popup.style.width=r?`${o.reference.width}px`:"",this.popup.style.height=i?`${o.reference.height}px`:""}})):(this.popup.style.width="",this.popup.style.height=""),this.flip&&t.push(Ml({boundary:this.flipBoundary,fallbackPlacements:this.flipFallbackPlacements,fallbackStrategy:this.flipFallbackStrategy==="best-fit"?"bestFit":"initialPlacement",padding:this.flipPadding})),this.shift&&t.push(Bi({boundary:this.shiftBoundary,padding:this.shiftPadding})),this.autoSize?t.push(ss({boundary:this.autoSizeBoundary,padding:this.autoSizePadding,apply:({availableWidth:o,availableHeight:r})=>{this.autoSize==="vertical"||this.autoSize==="both"?this.style.setProperty("--auto-size-available-height",`${r}px`):this.style.removeProperty("--auto-size-available-height"),this.autoSize==="horizontal"||this.autoSize==="both"?this.style.setProperty("--auto-size-available-width",`${o}px`):this.style.removeProperty("--auto-size-available-width")}})):(this.style.removeProperty("--auto-size-available-width"),this.style.removeProperty("--auto-size-available-height")),this.arrow&&t.push(Fi({element:this.arrowEl,padding:this.arrowPadding}));let e=this.strategy==="absolute"?o=>Vr.getOffsetParent(o,Ll):Vr.getOffsetParent;zi(this.anchorEl,this.popup,{placement:this.placement,middleware:t,strategy:this.strategy,platform:ro(ce({},Vr),{getOffsetParent:e})}).then(({x:o,y:r,middlewareData:i,placement:n})=>{let a=this.localize.dir()==="rtl",s={top:"bottom",right:"left",bottom:"top",left:"right"}[n.split("-")[0]];if(this.setAttribute("data-current-placement",n),Object.assign(this.popup.style,{left:`${o}px`,top:`${r}px`}),this.arrow){let l=i.arrow.x,u=i.arrow.y,m="",c="",f="",h="";if(this.arrowPlacement==="start"){let g=typeof l=="number"?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"";m=typeof u=="number"?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"",c=a?g:"",h=a?"":g}else if(this.arrowPlacement==="end"){let g=typeof l=="number"?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"";c=a?"":g,h=a?g:"",f=typeof u=="number"?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:""}else this.arrowPlacement==="center"?(h=typeof l=="number"?"calc(50% - var(--arrow-size-diagonal))":"",m=typeof u=="number"?"calc(50% - var(--arrow-size-diagonal))":""):(h=typeof l=="number"?`${l}px`:"",m=typeof u=="number"?`${u}px`:"");Object.assign(this.arrowEl.style,{top:m,right:c,bottom:f,left:h,[s]:"calc(var(--arrow-size-diagonal) * -1)"})}}),requestAnimationFrame(()=>this.updateHoverBridge()),this.emit("sl-reposition")}render(){return R`<slot name="anchor" @slotchange=${this.handleAnchorChange}></slot><span part="hover-bridge" class=${mt({"popup-hover-bridge":!0,"popup-hover-bridge--visible":this.hoverBridge&&this.active})} ></span><div part="popup" class=${mt({popup:!0,"popup--active":this.active,"popup--fixed":this.strategy==="fixed","popup--has-arrow":this.arrow})} ><slot></slot>${this.arrow?R`<div part="arrow" class="popup__arrow" role="presentation"></div>`:""}</div>`}};ut.styles=[ot,ol];p([Z(".popup")],ut.prototype,"popup",2);p([Z(".popup__arrow")],ut.prototype,"arrowEl",2);p([y()],ut.prototype,"anchor",2);p([y({type:Boolean,reflect:!0})],ut.prototype,"active",2);p([y({reflect:!0})],ut.prototype,"placement",2);p([y({reflect:!0})],ut.prototype,"strategy",2);p([y({type:Number})],ut.prototype,"distance",2);p([y({type:Number})],ut.prototype,"skidding",2);p([y({type:Boolean})],ut.prototype,"arrow",2);p([y({attribute:"arrow-placement"})],ut.prototype,"arrowPlacement",2);p([y({attribute:"arrow-padding",type:Number})],ut.prototype,"arrowPadding",2);p([y({type:Boolean})],ut.prototype,"flip",2);p([y({attribute:"flip-fallback-placements",converter:{fromAttribute:t=>t.split(" ").map(e=>e.trim()).filter(e=>e!==""),toAttribute:t=>t.join(" ")}})],ut.prototype,"flipFallbackPlacements",2);p([y({attribute:"flip-fallback-strategy"})],ut.prototype,"flipFallbackStrategy",2);p([y({type:Object})],ut.prototype,"flipBoundary",2);p([y({attribute:"flip-padding",type:Number})],ut.prototype,"flipPadding",2);p([y({type:Boolean})],ut.prototype,"shift",2);p([y({type:Object})],ut.prototype,"shiftBoundary",2);p([y({attribute:"shift-padding",type:Number})],ut.prototype,"shiftPadding",2);p([y({attribute:"auto-size"})],ut.prototype,"autoSize",2);p([y()],ut.prototype,"sync",2);p([y({type:Object})],ut.prototype,"autoSizeBoundary",2);p([y({attribute:"auto-size-padding",type:Number})],ut.prototype,"autoSizePadding",2);p([y({attribute:"hover-bridge",type:Boolean})],ut.prototype,"hoverBridge",2);var Bt=class extends X{constructor(){super(...arguments),this.localize=new Tt(this),this.open=!1,this.placement="bottom-start",this.disabled=!1,this.stayOpenOnSelect=!1,this.distance=0,this.skidding=0,this.hoist=!1,this.sync=void 0,this.handleKeyDown=t=>{this.open&&t.key==="Escape"&&(t.stopPropagation(),this.hide(),this.focusOnTrigger())},this.handleDocumentKeyDown=t=>{var e;if(t.key==="Escape"&&this.open&&!this.closeWatcher){t.stopPropagation(),this.focusOnTrigger(),this.hide();return}if(t.key==="Tab"){if(this.open&&((e=document.activeElement)==null?void 0:e.tagName.toLowerCase())==="sl-menu-item"){t.preventDefault(),this.hide(),this.focusOnTrigger();return}let o=(r,i)=>{if(!r)return null;let n=r.closest(i);if(n)return n;let a=r.getRootNode();return a instanceof ShadowRoot?o(a.host,i):null};setTimeout(()=>{var r;let i=((r=this.containingElement)==null?void 0:r.getRootNode())instanceof ShadowRoot?Pi():document.activeElement;(!this.containingElement||o(i,this.containingElement.tagName.toLowerCase())!==this.containingElement)&&this.hide()})}},this.handleDocumentMouseDown=t=>{let e=t.composedPath();this.containingElement&&!e.includes(this.containingElement)&&this.hide()},this.handlePanelSelect=t=>{let e=t.target;!this.stayOpenOnSelect&&e.tagName.toLowerCase()==="sl-menu"&&(this.hide(),this.focusOnTrigger())}}connectedCallback(){super.connectedCallback(),this.containingElement||(this.containingElement=this)}firstUpdated(){this.panel.hidden=!this.open,this.open&&(this.addOpenListeners(),this.popup.active=!0)}disconnectedCallback(){super.disconnectedCallback(),this.removeOpenListeners(),this.hide()}focusOnTrigger(){let t=this.trigger.assignedElements({flatten:!0})[0];typeof t?.focus=="function"&&t.focus()}getMenu(){return this.panel.assignedElements({flatten:!0}).find(t=>t.tagName.toLowerCase()==="sl-menu")}handleTriggerClick(){this.open?this.hide():(this.show(),this.focusOnTrigger())}async handleTriggerKeyDown(t){if([" ","Enter"].includes(t.key)){t.preventDefault(),this.handleTriggerClick();return}let e=this.getMenu();if(e){let o=e.getAllItems(),r=o[0],i=o[o.length-1];["ArrowDown","ArrowUp","Home","End"].includes(t.key)&&(t.preventDefault(),this.open||(this.show(),await this.updateComplete),o.length>0&&this.updateComplete.then(()=>{(t.key==="ArrowDown"||t.key==="Home")&&(e.setCurrentItem(r),r.focus()),(t.key==="ArrowUp"||t.key==="End")&&(e.setCurrentItem(i),i.focus())}))}}handleTriggerKeyUp(t){t.key===" "&&t.preventDefault()}handleTriggerSlotChange(){this.updateAccessibleTrigger()}updateAccessibleTrigger(){let e=this.trigger.assignedElements({flatten:!0}).find(r=>el(r).start),o;if(e){switch(e.tagName.toLowerCase()){case"sl-button":case"sl-icon-button":o=e.button;break;default:o=e}o.setAttribute("aria-haspopup","true"),o.setAttribute("aria-expanded",this.open?"true":"false")}}async show(){if(!this.open)return this.open=!0,be(this,"sl-after-show")}async hide(){if(this.open)return this.open=!1,be(this,"sl-after-hide")}reposition(){this.popup.reposition()}addOpenListeners(){var t;this.panel.addEventListener("sl-select",this.handlePanelSelect),"CloseWatcher"in window?((t=this.closeWatcher)==null||t.destroy(),this.closeWatcher=new CloseWatcher,this.closeWatcher.onclose=()=>{this.hide(),this.focusOnTrigger()}):this.panel.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keydown",this.handleDocumentKeyDown),document.addEventListener("mousedown",this.handleDocumentMouseDown)}removeOpenListeners(){var t;this.panel&&(this.panel.removeEventListener("sl-select",this.handlePanelSelect),this.panel.removeEventListener("keydown",this.handleKeyDown)),document.removeEventListener("keydown",this.handleDocumentKeyDown),document.removeEventListener("mousedown",this.handleDocumentMouseDown),(t=this.closeWatcher)==null||t.destroy()}async handleOpenChange(){if(this.disabled){this.open=!1;return}if(this.updateAccessibleTrigger(),this.open){this.emit("sl-show"),this.addOpenListeners(),await oe(this),this.panel.hidden=!1,this.popup.active=!0;let{keyframes:t,options:e}=Yt(this,"dropdown.show",{dir:this.localize.dir()});await Qt(this.popup.popup,t,e),this.emit("sl-after-show")}else{this.emit("sl-hide"),this.removeOpenListeners(),await oe(this);let{keyframes:t,options:e}=Yt(this,"dropdown.hide",{dir:this.localize.dir()});await Qt(this.popup.popup,t,e),this.panel.hidden=!0,this.popup.active=!1,this.emit("sl-after-hide")}}render(){return R`<sl-popup part="base" exportparts="popup:base__popup" id="dropdown" placement=${this.placement} distance=${this.distance} skidding=${this.skidding} strategy=${this.hoist?"fixed":"absolute"} flip shift auto-size="vertical" auto-size-padding="10" sync=${z(this.sync?this.sync:void 0)} class=${mt({dropdown:!0,"dropdown--open":this.open})} ><slot name="trigger" slot="anchor" part="trigger" class="dropdown__trigger" @click=${this.handleTriggerClick} @keydown=${this.handleTriggerKeyDown} @keyup=${this.handleTriggerKeyUp} @slotchange=${this.handleTriggerSlotChange} ></slot><div aria-hidden=${this.open?"false":"true"} aria-labelledby="dropdown"><slot part="panel" class="dropdown__panel"></slot></div></sl-popup>`}};Bt.styles=[ot,Qa];Bt.dependencies={"sl-popup":ut};p([Z(".dropdown")],Bt.prototype,"popup",2);p([Z(".dropdown__trigger")],Bt.prototype,"trigger",2);p([Z(".dropdown__panel")],Bt.prototype,"panel",2);p([y({type:Boolean,reflect:!0})],Bt.prototype,"open",2);p([y({reflect:!0})],Bt.prototype,"placement",2);p([y({type:Boolean,reflect:!0})],Bt.prototype,"disabled",2);p([y({attribute:"stay-open-on-select",type:Boolean,reflect:!0})],Bt.prototype,"stayOpenOnSelect",2);p([y({attribute:!1})],Bt.prototype,"containingElement",2);p([y({type:Number})],Bt.prototype,"distance",2);p([y({type:Number})],Bt.prototype,"skidding",2);p([y({type:Boolean})],Bt.prototype,"hoist",2);p([y({reflect:!0})],Bt.prototype,"sync",2);p([dt("open",{waitUntilFirstUpdate:!0})],Bt.prototype,"handleOpenChange",1);Xt("dropdown.show",{keyframes:[{opacity:0,scale:.9},{opacity:1,scale:1}],options:{duration:100,easing:"ease"}});Xt("dropdown.hide",{keyframes:[{opacity:1,scale:1},{opacity:0,scale:.9}],options:{duration:100,easing:"ease"}});var $l=W` :host { --grid-width: 280px; --grid-height: 200px; --grid-handle-size: 16px; --slider-height: 15px; --slider-handle-size: 17px; --swatch-size: 25px; display: inline-block; } .color-picker { width: var(--grid-width); font-family: var(--sl-font-sans); font-size: var(--sl-font-size-medium); font-weight: var(--sl-font-weight-normal); color: var(--color); background-color: var(--sl-panel-background-color); border-radius: var(--sl-border-radius-medium); user-select: none; -webkit-user-select: none; } .color-picker--inline { border: solid var(--sl-panel-border-width) var(--sl-panel-border-color); } .color-picker--inline:focus-visible { outline: var(--sl-focus-ring); outline-offset: var(--sl-focus-ring-offset); } .color-picker__grid { position: relative; height: var(--grid-height); background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 1) 100%), linear-gradient(to right, #fff 0%, rgba(255, 255, 255, 0) 100%); border-top-left-radius: var(--sl-border-radius-medium); border-top-right-radius: var(--sl-border-radius-medium); cursor: crosshair; forced-color-adjust: none; } .color-picker__grid-handle { position: absolute; width: var(--grid-handle-size); height: var(--grid-handle-size); border-radius: 50%; box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.25); border: solid 2px white; margin-top: calc(var(--grid-handle-size) / -2); margin-left: calc(var(--grid-handle-size) / -2); transition: var(--sl-transition-fast) scale; } .color-picker__grid-handle--dragging { cursor: none; scale: 1.5; } .color-picker__grid-handle:focus-visible { outline: var(--sl-focus-ring); } .color-picker__controls { padding: var(--sl-spacing-small); display: flex; align-items: center; } .color-picker__sliders { flex: 1 1 auto; } .color-picker__slider { position: relative; height: var(--slider-height); border-radius: var(--sl-border-radius-pill); box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.2); forced-color-adjust: none; } .color-picker__slider:not(:last-of-type) { margin-bottom: var(--sl-spacing-small); } .color-picker__slider-handle { position: absolute; top: calc(50% - var(--slider-handle-size) / 2); width: var(--slider-handle-size); height: var(--slider-handle-size); background-color: white; border-radius: 50%; box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.25); margin-left: calc(var(--slider-handle-size) / -2); } .color-picker__slider-handle:focus-visible { outline: var(--sl-focus-ring); } .color-picker__hue { background-image: linear-gradient( to right, rgb(255, 0, 0) 0%, rgb(255, 255, 0) 17%, rgb(0, 255, 0) 33%, rgb(0, 255, 255) 50%, rgb(0, 0, 255) 67%, rgb(255, 0, 255) 83%, rgb(255, 0, 0) 100% ); } .color-picker__alpha .color-picker__alpha-gradient { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: inherit; } .color-picker__preview { flex: 0 0 auto; display: inline-flex; align-items: center; justify-content: center; position: relative; width: 2.25rem; height: 2.25rem; border: none; border-radius: var(--sl-border-radius-circle); background: none; margin-left: var(--sl-spacing-small); cursor: copy; forced-color-adjust: none; } .color-picker__preview:before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: inherit; box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.2); /* We use a custom property in lieu of currentColor because of https://bugs.webkit.org/show_bug.cgi?id=216780 */ background-color: var(--preview-color); } .color-picker__preview:focus-visible { outline: var(--sl-focus-ring); outline-offset: var(--sl-focus-ring-offset); } .color-picker__preview-color { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: solid 1px rgba(0, 0, 0, 0.125); } .color-picker__preview-color--copied { animation: pulse 0.75s; } @keyframes pulse { 0% { box-shadow: 0 0 0 0 var(--sl-color-primary-500); } 70% { box-shadow: 0 0 0 0.5rem transparent; } 100% { box-shadow: 0 0 0 0 transparent; } } .color-picker__user-input { display: flex; padding: 0 var(--sl-spacing-small) var(--sl-spacing-small) var(--sl-spacing-small); } .color-picker__user-input sl-input { min-width: 0; /* fix input width in Safari */ flex: 1 1 auto; } .color-picker__user-input sl-button-group { margin-left: var(--sl-spacing-small); } .color-picker__user-input sl-button { min-width: 3.25rem; max-width: 3.25rem; font-size: 1rem; } .color-picker__swatches { display: grid; grid-template-columns: repeat(8, 1fr); grid-gap: 0.5rem; justify-items: center; border-top: solid 1px var(--sl-color-neutral-200); padding: var(--sl-spacing-small); forced-color-adjust: none; } .color-picker__swatch { position: relative; width: var(--swatch-size); height: var(--swatch-size); border-radius: var(--sl-border-radius-small); } .color-picker__swatch .color-picker__swatch-color { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: solid 1px rgba(0, 0, 0, 0.125); border-radius: inherit; cursor: pointer; } .color-picker__swatch:focus-visible { outline: var(--sl-focus-ring); outline-offset: var(--sl-focus-ring-offset); } .color-picker__transparent-bg { background-image: linear-gradient(45deg, var(--sl-color-neutral-300) 25%, transparent 25%), linear-gradient(45deg, transparent 75%, var(--sl-color-neutral-300) 75%), linear-gradient(45deg, transparent 75%, var(--sl-color-neutral-300) 75%), linear-gradient(45deg, var(--sl-color-neutral-300) 25%, transparent 25%); background-size: 10px 10px; background-position: 0 0, 0 0, -5px -5px, 5px 5px; } .color-picker--disabled { opacity: 0.5; cursor: not-allowed; } .color-picker--disabled .color-picker__grid, .color-picker--disabled .color-picker__grid-handle, .color-picker--disabled .color-picker__slider, .color-picker--disabled .color-picker__slider-handle, .color-picker--disabled .color-picker__preview, .color-picker--disabled .color-picker__swatch, .color-picker--disabled .color-picker__swatch-color { pointer-events: none; } /* * Color dropdown */ .color-dropdown::part(panel) { max-height: none; background-color: var(--sl-panel-background-color); border: solid var(--sl-panel-border-width) var(--sl-panel-border-color); border-radius: var(--sl-border-radius-medium); overflow: visible; } .color-dropdown__trigger { display: inline-block; position: relative; background-color: transparent; border: none; cursor: pointer; forced-color-adjust: none; } .color-dropdown__trigger.color-dropdown__trigger--small { width: var(--sl-input-height-small); height: var(--sl-input-height-small); border-radius: var(--sl-border-radius-circle); } .color-dropdown__trigger.color-dropdown__trigger--medium { width: var(--sl-input-height-medium); height: var(--sl-input-height-medium); border-radius: var(--sl-border-radius-circle); } .color-dropdown__trigger.color-dropdown__trigger--large { width: var(--sl-input-height-large); height: var(--sl-input-height-large); border-radius: var(--sl-border-radius-circle); } .color-dropdown__trigger:before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: inherit; background-color: currentColor; box-shadow: inset 0 0 0 2px var(--sl-input-border-color), inset 0 0 0 4px var(--sl-color-neutral-0); } .color-dropdown__trigger--empty:before { background-color: transparent; } .color-dropdown__trigger:focus-visible { outline: none; } .color-dropdown__trigger:focus-visible:not(.color-dropdown__trigger--disabled) { outline: var(--sl-focus-ring); outline-offset: var(--sl-focus-ring-offset); } .color-dropdown__trigger.color-dropdown__trigger--disabled { opacity: 0.5; cursor: not-allowed; } `;function he(t,e,o){let r=i=>Object.is(i,-0)?0:i;return t<e?r(e):t>o?r(o):r(t)}var Dl="important",ih=" !"+Dl,We=Ke(class extends Oe{constructor(t){if(super(t),t.type!==ue.ATTRIBUTE||t.name!=="style"||t.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce(((e,o)=>{let r=t[o];return r==null?e:e+`${o=o.includes("-")?o:o.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`}),"")}update(t,[e]){let{style:o}=t.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(e)),this.render(e);for(let r of this.ft)e[r]==null&&(this.ft.delete(r),r.includes("-")?o.removeProperty(r):o[r]=null);for(let r in e){let i=e[r];if(i!=null){this.ft.add(r);let n=typeof i=="string"&&i.endsWith(ih);r.includes("-")||n?o.setProperty(r,n?i.slice(0,-11):i,n?Dl:""):o[r]=i}}return Ut}});function Ft(t,e){nh(t)&&(t="100%");let o=sh(t);return t=e===360?t:Math.min(e,Math.max(0,parseFloat(t))),o&&(t=parseInt(String(t*e),10)/100),Math.abs(t-e)<1e-6?1:(e===360?t=(t<0?t%e+e:t%e)/parseFloat(String(e)):t=t%e/parseFloat(String(e)),t)}function Gr(t){return Math.min(1,Math.max(0,t))}function nh(t){return typeof t=="string"&&t.indexOf(".")!==-1&&parseFloat(t)===1}function sh(t){return typeof t=="string"&&t.indexOf("%")!==-1}function Ni(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function Ur(t){return Number(t)<=1?`${Number(t)*100}%`:t}function ao(t){return t.length===1?"0"+t:String(t)}function Ol(t,e,o){return{r:Ft(t,255)*255,g:Ft(e,255)*255,b:Ft(o,255)*255}}function cs(t,e,o){t=Ft(t,255),e=Ft(e,255),o=Ft(o,255);let r=Math.max(t,e,o),i=Math.min(t,e,o),n=0,a=0,s=(r+i)/2;if(r===i)a=0,n=0;else{let l=r-i;switch(a=s>.5?l/(2-r-i):l/(r+i),r){case t:n=(e-o)/l+(e<o?6:0);break;case e:n=(o-t)/l+2;break;case o:n=(t-e)/l+4;break;default:break}n/=6}return{h:n,s:a,l:s}}function ls(t,e,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?t+(e-t)*(6*o):o<1/2?e:o<2/3?t+(e-t)*(2/3-o)*6:t}function Il(t,e,o){let r,i,n;if(t=Ft(t,360),e=Ft(e,100),o=Ft(o,100),e===0)i=o,n=o,r=o;else{let a=o<.5?o*(1+e):o+e-o*e,s=2*o-a;r=ls(s,a,t+1/3),i=ls(s,a,t),n=ls(s,a,t-1/3)}return{r:r*255,g:i*255,b:n*255}}function us(t,e,o){t=Ft(t,255),e=Ft(e,255),o=Ft(o,255);let r=Math.max(t,e,o),i=Math.min(t,e,o),n=0,a=r,s=r-i,l=r===0?0:s/r;if(r===i)n=0;else{switch(r){case t:n=(e-o)/s+(e<o?6:0);break;case e:n=(o-t)/s+2;break;case o:n=(t-e)/s+4;break;default:break}n/=6}return{h:n,s:l,v:a}}function Rl(t,e,o){t=Ft(t,360)*6,e=Ft(e,100),o=Ft(o,100);let r=Math.floor(t),i=t-r,n=o*(1-e),a=o*(1-i*e),s=o*(1-(1-i)*e),l=r%6,u=[o,a,n,n,s,o][l],m=[s,o,o,a,n,n][l],c=[n,n,s,o,o,a][l];return{r:u*255,g:m*255,b:c*255}}function ds(t,e,o,r){let i=[ao(Math.round(t).toString(16)),ao(Math.round(e).toString(16)),ao(Math.round(o).toString(16))];return r&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function Bl(t,e,o,r,i){let n=[ao(Math.round(t).toString(16)),ao(Math.round(e).toString(16)),ao(Math.round(o).toString(16)),ao(ah(r))];return i&&n[0].startsWith(n[0].charAt(1))&&n[1].startsWith(n[1].charAt(1))&&n[2].startsWith(n[2].charAt(1))&&n[3].startsWith(n[3].charAt(1))?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0)+n[3].charAt(0):n.join("")}function Fl(t,e,o,r){let i=t/100,n=e/100,a=o/100,s=r/100,l=255*(1-i)*(1-s),u=255*(1-n)*(1-s),m=255*(1-a)*(1-s);return{r:l,g:u,b:m}}function hs(t,e,o){let r=1-t/255,i=1-e/255,n=1-o/255,a=Math.min(r,i,n);return a===1?(r=0,i=0,n=0):(r=(r-a)/(1-a)*100,i=(i-a)/(1-a)*100,n=(n-a)/(1-a)*100),a*=100,{c:Math.round(r),m:Math.round(i),y:Math.round(n),k:Math.round(a)}}function ah(t){return Math.round(parseFloat(t)*255).toString(16)}function ps(t){return ie(t)/255}function ie(t){return parseInt(t,16)}function zl(t){return{r:t>>16,g:(t&65280)>>8,b:t&255}}var Kr={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Nl(t){let e={r:0,g:0,b:0},o=1,r=null,i=null,n=null,a=!1,s=!1;return typeof t=="string"&&(t=uh(t)),typeof t=="object"&&(pe(t.r)&&pe(t.g)&&pe(t.b)?(e=Ol(t.r,t.g,t.b),a=!0,s=String(t.r).substr(-1)==="%"?"prgb":"rgb"):pe(t.h)&&pe(t.s)&&pe(t.v)?(r=Ur(t.s),i=Ur(t.v),e=Rl(t.h,r,i),a=!0,s="hsv"):pe(t.h)&&pe(t.s)&&pe(t.l)?(r=Ur(t.s),n=Ur(t.l),e=Il(t.h,r,n),a=!0,s="hsl"):pe(t.c)&&pe(t.m)&&pe(t.y)&&pe(t.k)&&(e=Fl(t.c,t.m,t.y,t.k),a=!0,s="cmyk"),Object.prototype.hasOwnProperty.call(t,"a")&&(o=t.a)),o=Ni(o),{ok:a,format:t.format||s,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:o}}var lh="[-\\+]?\\d+%?",ch="[-\\+]?\\d*\\.\\d+%?",lo="(?:"+ch+")|(?:"+lh+")",fs="[\\s|\\(]+("+lo+")[,|\\s]+("+lo+")[,|\\s]+("+lo+")\\s*\\)?",Hi="[\\s|\\(]+("+lo+")[,|\\s]+("+lo+")[,|\\s]+("+lo+")[,|\\s]+("+lo+")\\s*\\)?",we={CSS_UNIT:new RegExp(lo),rgb:new RegExp("rgb"+fs),rgba:new RegExp("rgba"+Hi),hsl:new RegExp("hsl"+fs),hsla:new RegExp("hsla"+Hi),hsv:new RegExp("hsv"+fs),hsva:new RegExp("hsva"+Hi),cmyk:new RegExp("cmyk"+Hi),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function uh(t){if(t=t.trim().toLowerCase(),t.length===0)return!1;let e=!1;if(Kr[t])t=Kr[t],e=!0;else if(t==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};let o=we.rgb.exec(t);return o?{r:o[1],g:o[2],b:o[3]}:(o=we.rgba.exec(t),o?{r:o[1],g:o[2],b:o[3],a:o[4]}:(o=we.hsl.exec(t),o?{h:o[1],s:o[2],l:o[3]}:(o=we.hsla.exec(t),o?{h:o[1],s:o[2],l:o[3],a:o[4]}:(o=we.hsv.exec(t),o?{h:o[1],s:o[2],v:o[3]}:(o=we.hsva.exec(t),o?{h:o[1],s:o[2],v:o[3],a:o[4]}:(o=we.cmyk.exec(t),o?{c:o[1],m:o[2],y:o[3],k:o[4]}:(o=we.hex8.exec(t),o?{r:ie(o[1]),g:ie(o[2]),b:ie(o[3]),a:ps(o[4]),format:e?"name":"hex8"}:(o=we.hex6.exec(t),o?{r:ie(o[1]),g:ie(o[2]),b:ie(o[3]),format:e?"name":"hex"}:(o=we.hex4.exec(t),o?{r:ie(o[1]+o[1]),g:ie(o[2]+o[2]),b:ie(o[3]+o[3]),a:ps(o[4]+o[4]),format:e?"name":"hex8"}:(o=we.hex3.exec(t),o?{r:ie(o[1]+o[1]),g:ie(o[2]+o[2]),b:ie(o[3]+o[3]),format:e?"name":"hex"}:!1))))))))))}function pe(t){return typeof t=="number"?!Number.isNaN(t):we.CSS_UNIT.test(t)}var jr=class t{constructor(e="",o={}){if(e instanceof t)return e;typeof e=="number"&&(e=zl(e)),this.originalInput=e;let r=Nl(e);this.originalInput=e,this.r=r.r,this.g=r.g,this.b=r.b,this.a=r.a,this.roundA=Math.round(100*this.a)/100,this.format=o.format??r.format,this.gradientType=o.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=r.ok}isDark(){return this.getBrightness()<128}isLight(){return!this.isDark()}getBrightness(){let e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3}getLuminance(){let e=this.toRgb(),o,r,i,n=e.r/255,a=e.g/255,s=e.b/255;return n<=.03928?o=n/12.92:o=Math.pow((n+.055)/1.055,2.4),a<=.03928?r=a/12.92:r=Math.pow((a+.055)/1.055,2.4),s<=.03928?i=s/12.92:i=Math.pow((s+.055)/1.055,2.4),.2126*o+.7152*r+.0722*i}getAlpha(){return this.a}setAlpha(e){return this.a=Ni(e),this.roundA=Math.round(100*this.a)/100,this}isMonochrome(){let{s:e}=this.toHsl();return e===0}toHsv(){let e=us(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}}toHsvString(){let e=us(this.r,this.g,this.b),o=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.v*100);return this.a===1?`hsv(${o}, ${r}%, ${i}%)`:`hsva(${o}, ${r}%, ${i}%, ${this.roundA})`}toHsl(){let e=cs(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}}toHslString(){let e=cs(this.r,this.g,this.b),o=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.l*100);return this.a===1?`hsl(${o}, ${r}%, ${i}%)`:`hsla(${o}, ${r}%, ${i}%, ${this.roundA})`}toHex(e=!1){return ds(this.r,this.g,this.b,e)}toHexString(e=!1){return"#"+this.toHex(e)}toHex8(e=!1){return Bl(this.r,this.g,this.b,this.a,e)}toHex8String(e=!1){return"#"+this.toHex8(e)}toHexShortString(e=!1){return this.a===1?this.toHexString(e):this.toHex8String(e)}toRgb(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}}toRgbString(){let e=Math.round(this.r),o=Math.round(this.g),r=Math.round(this.b);return this.a===1?`rgb(${e}, ${o}, ${r})`:`rgba(${e}, ${o}, ${r}, ${this.roundA})`}toPercentageRgb(){let e=o=>`${Math.round(Ft(o,255)*100)}%`;return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}}toPercentageRgbString(){let e=o=>Math.round(Ft(o,255)*100);return this.a===1?`rgb(${e(this.r)}%, ${e(this.g)}%, ${e(this.b)}%)`:`rgba(${e(this.r)}%, ${e(this.g)}%, ${e(this.b)}%, ${this.roundA})`}toCmyk(){return{...hs(this.r,this.g,this.b)}}toCmykString(){let{c:e,m:o,y:r,k:i}=hs(this.r,this.g,this.b);return`cmyk(${e}, ${o}, ${r}, ${i})`}toName(){if(this.a===0)return"transparent";if(this.a<1)return!1;let e="#"+ds(this.r,this.g,this.b,!1);for(let[o,r]of Object.entries(Kr))if(e===r)return o;return!1}toString(e){let o=!!e;e=e??this.format;let r=!1,i=this.a<1&&this.a>=0;return!o&&i&&(e.startsWith("hex")||e==="name")?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),e==="cmyk"&&(r=this.toCmykString()),r||this.toHexString())}toNumber(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)}clone(){return new t(this.toString())}lighten(e=10){let o=this.toHsl();return o.l+=e/100,o.l=Gr(o.l),new t(o)}brighten(e=10){let o=this.toRgb();return o.r=Math.max(0,Math.min(255,o.r-Math.round(255*-(e/100)))),o.g=Math.max(0,Math.min(255,o.g-Math.round(255*-(e/100)))),o.b=Math.max(0,Math.min(255,o.b-Math.round(255*-(e/100)))),new t(o)}darken(e=10){let o=this.toHsl();return o.l-=e/100,o.l=Gr(o.l),new t(o)}tint(e=10){return this.mix("white",e)}shade(e=10){return this.mix("black",e)}desaturate(e=10){let o=this.toHsl();return o.s-=e/100,o.s=Gr(o.s),new t(o)}saturate(e=10){let o=this.toHsl();return o.s+=e/100,o.s=Gr(o.s),new t(o)}greyscale(){return this.desaturate(100)}spin(e){let o=this.toHsl(),r=(o.h+e)%360;return o.h=r<0?360+r:r,new t(o)}mix(e,o=50){let r=this.toRgb(),i=new t(e).toRgb(),n=o/100,a={r:(i.r-r.r)*n+r.r,g:(i.g-r.g)*n+r.g,b:(i.b-r.b)*n+r.b,a:(i.a-r.a)*n+r.a};return new t(a)}analogous(e=6,o=30){let r=this.toHsl(),i=360/o,n=[this];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,n.push(new t(r));return n}complement(){let e=this.toHsl();return e.h=(e.h+180)%360,new t(e)}monochromatic(e=6){let o=this.toHsv(),{h:r}=o,{s:i}=o,{v:n}=o,a=[],s=1/e;for(;e--;)a.push(new t({h:r,s:i,v:n})),n=(n+s)%1;return a}splitcomplement(){let e=this.toHsl(),{h:o}=e;return[this,new t({h:(o+72)%360,s:e.s,l:e.l}),new t({h:(o+216)%360,s:e.s,l:e.l})]}onBackground(e){let o=this.toRgb(),r=new t(e).toRgb(),i=o.a+r.a*(1-o.a);return new t({r:(o.r*o.a+r.r*r.a*(1-o.a))/i,g:(o.g*o.a+r.g*r.a*(1-o.a))/i,b:(o.b*o.a+r.b*r.a*(1-o.a))/i,a:i})}triad(){return this.polyad(3)}tetrad(){return this.polyad(4)}polyad(e){let o=this.toHsl(),{h:r}=o,i=[this],n=360/e;for(let a=1;a<e;a++)i.push(new t({h:(r+a*n)%360,s:o.s,l:o.l}));return i}equals(e){let o=new t(e);return this.format==="cmyk"||o.format==="cmyk"?this.toCmykString()===o.toCmykString():this.toRgbString()===o.toRgbString()}};var Hl="EyeDropper"in window,rt=class extends X{constructor(){super(),this.formControlController=new Qo(this),this.isSafeValue=!1,this.localize=new Tt(this),this.hasFocus=!1,this.isDraggingGridHandle=!1,this.isEmpty=!1,this.inputValue="",this.hue=0,this.saturation=100,this.brightness=100,this.alpha=100,this.value="",this.defaultValue="",this.label="",this.format="hex",this.inline=!1,this.size="medium",this.noFormatToggle=!1,this.name="",this.disabled=!1,this.hoist=!1,this.opacity=!1,this.uppercase=!1,this.swatches="",this.form="",this.required=!1,this.handleFocusIn=()=>{this.hasFocus=!0,this.emit("sl-focus")},this.handleFocusOut=()=>{this.hasFocus=!1,this.emit("sl-blur")},this.addEventListener("focusin",this.handleFocusIn),this.addEventListener("focusout",this.handleFocusOut)}get validity(){return this.input.validity}get validationMessage(){return this.input.validationMessage}firstUpdated(){this.input.updateComplete.then(()=>{this.formControlController.updateValidity()})}handleCopy(){this.input.select(),document.execCommand("copy"),this.previewButton.focus(),this.previewButton.classList.add("color-picker__preview-color--copied"),this.previewButton.addEventListener("animationend",()=>{this.previewButton.classList.remove("color-picker__preview-color--copied")})}handleFormatToggle(){let t=["hex","rgb","hsl","hsv"],e=(t.indexOf(this.format)+1)%t.length;this.format=t[e],this.setColor(this.value),this.emit("sl-change"),this.emit("sl-input")}handleAlphaDrag(t){let e=this.shadowRoot.querySelector(".color-picker__slider.color-picker__alpha"),o=e.querySelector(".color-picker__slider-handle"),{width:r}=e.getBoundingClientRect(),i=this.value,n=this.value;o.focus(),t.preventDefault(),Ci(e,{onMove:a=>{this.alpha=he(a/r*100,0,100),this.syncValues(),this.value!==n&&(n=this.value,this.emit("sl-input"))},onStop:()=>{this.value!==i&&(i=this.value,this.emit("sl-change"))},initialEvent:t})}handleHueDrag(t){let e=this.shadowRoot.querySelector(".color-picker__slider.color-picker__hue"),o=e.querySelector(".color-picker__slider-handle"),{width:r}=e.getBoundingClientRect(),i=this.value,n=this.value;o.focus(),t.preventDefault(),Ci(e,{onMove:a=>{this.hue=he(a/r*360,0,360),this.syncValues(),this.value!==n&&(n=this.value,this.emit("sl-input"))},onStop:()=>{this.value!==i&&(i=this.value,this.emit("sl-change"))},initialEvent:t})}handleGridDrag(t){let e=this.shadowRoot.querySelector(".color-picker__grid"),o=e.querySelector(".color-picker__grid-handle"),{width:r,height:i}=e.getBoundingClientRect(),n=this.value,a=this.value;o.focus(),t.preventDefault(),this.isDraggingGridHandle=!0,Ci(e,{onMove:(s,l)=>{this.saturation=he(s/r*100,0,100),this.brightness=he(100-l/i*100,0,100),this.syncValues(),this.value!==a&&(a=this.value,this.emit("sl-input"))},onStop:()=>{this.isDraggingGridHandle=!1,this.value!==n&&(n=this.value,this.emit("sl-change"))},initialEvent:t})}handleAlphaKeyDown(t){let e=t.shiftKey?10:1,o=this.value;t.key==="ArrowLeft"&&(t.preventDefault(),this.alpha=he(this.alpha-e,0,100),this.syncValues()),t.key==="ArrowRight"&&(t.preventDefault(),this.alpha=he(this.alpha+e,0,100),this.syncValues()),t.key==="Home"&&(t.preventDefault(),this.alpha=0,this.syncValues()),t.key==="End"&&(t.preventDefault(),this.alpha=100,this.syncValues()),this.value!==o&&(this.emit("sl-change"),this.emit("sl-input"))}handleHueKeyDown(t){let e=t.shiftKey?10:1,o=this.value;t.key==="ArrowLeft"&&(t.preventDefault(),this.hue=he(this.hue-e,0,360),this.syncValues()),t.key==="ArrowRight"&&(t.preventDefault(),this.hue=he(this.hue+e,0,360),this.syncValues()),t.key==="Home"&&(t.preventDefault(),this.hue=0,this.syncValues()),t.key==="End"&&(t.preventDefault(),this.hue=360,this.syncValues()),this.value!==o&&(this.emit("sl-change"),this.emit("sl-input"))}handleGridKeyDown(t){let e=t.shiftKey?10:1,o=this.value;t.key==="ArrowLeft"&&(t.preventDefault(),this.saturation=he(this.saturation-e,0,100),this.syncValues()),t.key==="ArrowRight"&&(t.preventDefault(),this.saturation=he(this.saturation+e,0,100),this.syncValues()),t.key==="ArrowUp"&&(t.preventDefault(),this.brightness=he(this.brightness+e,0,100),this.syncValues()),t.key==="ArrowDown"&&(t.preventDefault(),this.brightness=he(this.brightness-e,0,100),this.syncValues()),this.value!==o&&(this.emit("sl-change"),this.emit("sl-input"))}handleInputChange(t){let e=t.target,o=this.value;t.stopPropagation(),this.input.value?(this.setColor(e.value),e.value=this.value):this.value="",this.value!==o&&(this.emit("sl-change"),this.emit("sl-input"))}handleInputInput(t){this.formControlController.updateValidity(),t.stopPropagation()}handleInputKeyDown(t){if(t.key==="Enter"){let e=this.value;this.input.value?(this.setColor(this.input.value),this.input.value=this.value,this.value!==e&&(this.emit("sl-change"),this.emit("sl-input")),setTimeout(()=>this.input.select())):this.hue=0}}handleInputInvalid(t){this.formControlController.setValidity(!1),this.formControlController.emitInvalidEvent(t)}handleTouchMove(t){t.preventDefault()}parseColor(t){let e=new jr(t);if(!e.isValid)return null;let o=e.toHsl(),r={h:o.h,s:o.s*100,l:o.l*100,a:o.a},i=e.toRgb(),n=e.toHexString(),a=e.toHex8String(),s=e.toHsv(),l={h:s.h,s:s.s*100,v:s.v*100,a:s.a};return{hsl:{h:r.h,s:r.s,l:r.l,string:this.setLetterCase(`hsl(${Math.round(r.h)}, ${Math.round(r.s)}%, ${Math.round(r.l)}%)`)},hsla:{h:r.h,s:r.s,l:r.l,a:r.a,string:this.setLetterCase(`hsla(${Math.round(r.h)}, ${Math.round(r.s)}%, ${Math.round(r.l)}%, ${r.a.toFixed(2).toString()})`)},hsv:{h:l.h,s:l.s,v:l.v,string:this.setLetterCase(`hsv(${Math.round(l.h)}, ${Math.round(l.s)}%, ${Math.round(l.v)}%)`)},hsva:{h:l.h,s:l.s,v:l.v,a:l.a,string:this.setLetterCase(`hsva(${Math.round(l.h)}, ${Math.round(l.s)}%, ${Math.round(l.v)}%, ${l.a.toFixed(2).toString()})`)},rgb:{r:i.r,g:i.g,b:i.b,string:this.setLetterCase(`rgb(${Math.round(i.r)}, ${Math.round(i.g)}, ${Math.round(i.b)})`)},rgba:{r:i.r,g:i.g,b:i.b,a:i.a,string:this.setLetterCase(`rgba(${Math.round(i.r)}, ${Math.round(i.g)}, ${Math.round(i.b)}, ${i.a.toFixed(2).toString()})`)},hex:this.setLetterCase(n),hexa:this.setLetterCase(a)}}setColor(t){let e=this.parseColor(t);return e===null?!1:(this.hue=e.hsva.h,this.saturation=e.hsva.s,this.brightness=e.hsva.v,this.alpha=this.opacity?e.hsva.a*100:100,this.syncValues(),!0)}setLetterCase(t){return typeof t!="string"?"":this.uppercase?t.toUpperCase():t.toLowerCase()}async syncValues(){let t=this.parseColor(`hsva(${this.hue}, ${this.saturation}%, ${this.brightness}%, ${this.alpha/100})`);t!==null&&(this.format==="hsl"?this.inputValue=this.opacity?t.hsla.string:t.hsl.string:this.format==="rgb"?this.inputValue=this.opacity?t.rgba.string:t.rgb.string:this.format==="hsv"?this.inputValue=this.opacity?t.hsva.string:t.hsv.string:this.inputValue=this.opacity?t.hexa:t.hex,this.isSafeValue=!0,this.value=this.inputValue,await this.updateComplete,this.isSafeValue=!1)}handleAfterHide(){this.previewButton.classList.remove("color-picker__preview-color--copied")}handleEyeDropper(){if(!Hl)return;new EyeDropper().open().then(e=>{let o=this.value;this.setColor(e.sRGBHex),this.value!==o&&(this.emit("sl-change"),this.emit("sl-input"))}).catch(()=>{})}selectSwatch(t){let e=this.value;this.disabled||(this.setColor(t),this.value!==e&&(this.emit("sl-change"),this.emit("sl-input")))}getHexString(t,e,o,r=100){let i=new jr(`hsva(${t}, ${e}%, ${o}%, ${r/100})`);return i.isValid?i.toHex8String():""}stopNestedEventPropagation(t){t.stopImmediatePropagation()}handleFormatChange(){this.syncValues()}handleOpacityChange(){this.alpha=100}handleValueChange(t,e){if(this.isEmpty=!e,e||(this.hue=0,this.saturation=0,this.brightness=100,this.alpha=100),!this.isSafeValue){let o=this.parseColor(e);o!==null?(this.inputValue=this.value,this.hue=o.hsva.h,this.saturation=o.hsva.s,this.brightness=o.hsva.v,this.alpha=o.hsva.a*100,this.syncValues()):this.inputValue=t??""}}focus(t){this.inline?this.base.focus(t):this.trigger.focus(t)}blur(){var t;let e=this.inline?this.base:this.trigger;this.hasFocus&&(e.focus({preventScroll:!0}),e.blur()),(t=this.dropdown)!=null&&t.open&&this.dropdown.hide()}getFormattedValue(t="hex"){let e=this.parseColor(`hsva(${this.hue}, ${this.saturation}%, ${this.brightness}%, ${this.alpha/100})`);if(e===null)return"";switch(t){case"hex":return e.hex;case"hexa":return e.hexa;case"rgb":return e.rgb.string;case"rgba":return e.rgba.string;case"hsl":return e.hsl.string;case"hsla":return e.hsla.string;case"hsv":return e.hsv.string;case"hsva":return e.hsva.string;default:return""}}checkValidity(){return this.input.checkValidity()}getForm(){return this.formControlController.getForm()}reportValidity(){return!this.inline&&!this.validity.valid?(this.dropdown.show(),this.addEventListener("sl-after-show",()=>this.input.reportValidity(),{once:!0}),this.disabled||this.formControlController.emitInvalidEvent(),!1):this.input.reportValidity()}setCustomValidity(t){this.input.setCustomValidity(t),this.formControlController.updateValidity()}render(){let t=this.saturation,e=100-this.brightness,o=Array.isArray(this.swatches)?this.swatches:this.swatches.split(";").filter(i=>i.trim()!==""),r=R`<div part="base" class=${mt({"color-picker":!0,"color-picker--inline":this.inline,"color-picker--disabled":this.disabled,"color-picker--focused":this.hasFocus})} aria-disabled=${this.disabled?"true":"false"} aria-labelledby="label" tabindex=${this.inline?"0":"-1"} >${this.inline?R`<sl-visually-hidden id="label"><slot name="label">${this.label}</slot></sl-visually-hidden>`:null}<div part="grid" class="color-picker__grid" style=${We({backgroundColor:this.getHexString(this.hue,100,100)})} @pointerdown=${this.handleGridDrag} @touchmove=${this.handleTouchMove} ><span part="grid-handle" class=${mt({"color-picker__grid-handle":!0,"color-picker__grid-handle--dragging":this.isDraggingGridHandle})} style=${We({top:`${e}%`,left:`${t}%`,backgroundColor:this.getHexString(this.hue,this.saturation,this.brightness,this.alpha)})} role="application" aria-label="HSV" tabindex=${z(this.disabled?void 0:"0")} @keydown=${this.handleGridKeyDown} ></span></div><div class="color-picker__controls"><div class="color-picker__sliders"><div part="slider hue-slider" class="color-picker__hue color-picker__slider" @pointerdown=${this.handleHueDrag} @touchmove=${this.handleTouchMove} ><span part="slider-handle hue-slider-handle" class="color-picker__slider-handle" style=${We({left:`${this.hue===0?0:100/(360/this.hue)}%`})} role="slider" aria-label="hue" aria-orientation="horizontal" aria-valuemin="0" aria-valuemax="360" aria-valuenow=${`${Math.round(this.hue)}`} tabindex=${z(this.disabled?void 0:"0")} @keydown=${this.handleHueKeyDown} ></span></div>${this.opacity?R`<div part="slider opacity-slider" class="color-picker__alpha color-picker__slider color-picker__transparent-bg" @pointerdown="${this.handleAlphaDrag}" @touchmove=${this.handleTouchMove} ><div class="color-picker__alpha-gradient" style=${We({backgroundImage:`linear-gradient(
                          to right,
                          ${this.getHexString(this.hue,this.saturation,this.brightness,0)} 0%,
                          ${this.getHexString(this.hue,this.saturation,this.brightness,100)} 100%
                        )`})} ></div><span part="slider-handle opacity-slider-handle" class="color-picker__slider-handle" style=${We({left:`${this.alpha}%`})} role="slider" aria-label="alpha" aria-orientation="horizontal" aria-valuemin="0" aria-valuemax="100" aria-valuenow=${Math.round(this.alpha)} tabindex=${z(this.disabled?void 0:"0")} @keydown=${this.handleAlphaKeyDown} ></span></div>`:""}</div><button type="button" part="preview" class="color-picker__preview color-picker__transparent-bg" aria-label=${this.localize.term("copy")} style=${We({"--preview-color":this.getHexString(this.hue,this.saturation,this.brightness,this.alpha)})} @click=${this.handleCopy} ></button></div><div class="color-picker__user-input" aria-live="polite"><sl-input part="input" type="text" name=${this.name} autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" value=${this.isEmpty?"":this.inputValue} ?required=${this.required} ?disabled=${this.disabled} aria-label=${this.localize.term("currentValue")} @keydown=${this.handleInputKeyDown} @sl-change=${this.handleInputChange} @sl-input=${this.handleInputInput} @sl-invalid=${this.handleInputInvalid} @sl-blur=${this.stopNestedEventPropagation} @sl-focus=${this.stopNestedEventPropagation} ></sl-input><sl-button-group>${this.noFormatToggle?"":R`<sl-button part="format-button" aria-label=${this.localize.term("toggleColorFormat")} exportparts=" base:format-button__base, prefix:format-button__prefix, label:format-button__label, suffix:format-button__suffix, caret:format-button__caret " @click=${this.handleFormatToggle} @sl-blur=${this.stopNestedEventPropagation} @sl-focus=${this.stopNestedEventPropagation} >${this.setLetterCase(this.format)}</sl-button>`} ${Hl?R`<sl-button part="eye-dropper-button" exportparts=" base:eye-dropper-button__base, prefix:eye-dropper-button__prefix, label:eye-dropper-button__label, suffix:eye-dropper-button__suffix, caret:eye-dropper-button__caret " @click=${this.handleEyeDropper} @sl-blur=${this.stopNestedEventPropagation} @sl-focus=${this.stopNestedEventPropagation} ><sl-icon library="system" name="eyedropper" label=${this.localize.term("selectAColorFromTheScreen")} ></sl-icon></sl-button>`:""}</sl-button-group></div>${o.length>0?R`<div part="swatches" class="color-picker__swatches">${o.map(i=>{let n=this.parseColor(i);return n?R`<div part="swatch" class="color-picker__swatch color-picker__transparent-bg" tabindex=${z(this.disabled?void 0:"0")} role="button" aria-label=${i} @click=${()=>this.selectSwatch(i)} @keydown=${a=>!this.disabled&&a.key==="Enter"&&this.setColor(n.hexa)} ><div class="color-picker__swatch-color" style=${We({backgroundColor:n.hexa})} ></div></div>`:""})}</div>`:""}</div>`;return this.inline?r:R`<sl-dropdown class="color-dropdown" aria-disabled=${this.disabled?"true":"false"} .containingElement=${this} ?disabled=${this.disabled} ?hoist=${this.hoist} @sl-after-hide=${this.handleAfterHide} ><button part="trigger" slot="trigger" class=${mt({"color-dropdown__trigger":!0,"color-dropdown__trigger--disabled":this.disabled,"color-dropdown__trigger--small":this.size==="small","color-dropdown__trigger--medium":this.size==="medium","color-dropdown__trigger--large":this.size==="large","color-dropdown__trigger--empty":this.isEmpty,"color-dropdown__trigger--focused":this.hasFocus,"color-picker__transparent-bg":!0})} style=${We({color:this.getHexString(this.hue,this.saturation,this.brightness,this.alpha)})} type="button" ><sl-visually-hidden><slot name="label">${this.label}</slot></sl-visually-hidden></button>${r}</sl-dropdown>`}};rt.styles=[ot,$l];rt.dependencies={"sl-button-group":io,"sl-button":lt,"sl-dropdown":Bt,"sl-icon":Pt,"sl-input":U,"sl-visually-hidden":Or};p([Z('[part~="base"]')],rt.prototype,"base",2);p([Z('[part~="input"]')],rt.prototype,"input",2);p([Z(".color-dropdown")],rt.prototype,"dropdown",2);p([Z('[part~="preview"]')],rt.prototype,"previewButton",2);p([Z('[part~="trigger"]')],rt.prototype,"trigger",2);p([At()],rt.prototype,"hasFocus",2);p([At()],rt.prototype,"isDraggingGridHandle",2);p([At()],rt.prototype,"isEmpty",2);p([At()],rt.prototype,"inputValue",2);p([At()],rt.prototype,"hue",2);p([At()],rt.prototype,"saturation",2);p([At()],rt.prototype,"brightness",2);p([At()],rt.prototype,"alpha",2);p([y()],rt.prototype,"value",2);p([Ei()],rt.prototype,"defaultValue",2);p([y()],rt.prototype,"label",2);p([y()],rt.prototype,"format",2);p([y({type:Boolean,reflect:!0})],rt.prototype,"inline",2);p([y({reflect:!0})],rt.prototype,"size",2);p([y({attribute:"no-format-toggle",type:Boolean})],rt.prototype,"noFormatToggle",2);p([y()],rt.prototype,"name",2);p([y({type:Boolean,reflect:!0})],rt.prototype,"disabled",2);p([y({type:Boolean})],rt.prototype,"hoist",2);p([y({type:Boolean})],rt.prototype,"opacity",2);p([y({type:Boolean})],rt.prototype,"uppercase",2);p([y()],rt.prototype,"swatches",2);p([y({reflect:!0})],rt.prototype,"form",2);p([y({type:Boolean,reflect:!0})],rt.prototype,"required",2);p([Ta({passive:!1})],rt.prototype,"handleTouchMove",1);p([dt("format",{waitUntilFirstUpdate:!0})],rt.prototype,"handleFormatChange",1);p([dt("opacity",{waitUntilFirstUpdate:!0})],rt.prototype,"handleOpacityChange",1);p([dt("value")],rt.prototype,"handleValueChange",1);rt.define("sl-color-picker");var Wr=[],Vl=class{constructor(t){this.tabDirection="forward",this.handleFocusIn=()=>{this.isActive()&&this.checkFocus()},this.handleKeyDown=e=>{var o;if(e.key!=="Tab"||this.isExternalActivated||!this.isActive())return;let r=Pi();if(this.previousFocus=r,this.previousFocus&&this.possiblyHasTabbableChildren(this.previousFocus))return;e.shiftKey?this.tabDirection="backward":this.tabDirection="forward";let i=Ti(this.element),n=i.findIndex(s=>s===r);this.previousFocus=this.currentFocus;let a=this.tabDirection==="forward"?1:-1;for(;;){n+a>=i.length?n=0:n+a<0?n=i.length-1:n+=a,this.previousFocus=this.currentFocus;let s=i[n];if(this.tabDirection==="backward"&&this.previousFocus&&this.possiblyHasTabbableChildren(this.previousFocus)||s&&this.possiblyHasTabbableChildren(s))return;e.preventDefault(),this.currentFocus=s,(o=this.currentFocus)==null||o.focus({preventScroll:!1});let l=[...Ai()];if(l.includes(this.currentFocus)||!l.includes(this.previousFocus))break}setTimeout(()=>this.checkFocus())},this.handleKeyUp=()=>{this.tabDirection="forward"},this.element=t,this.elementsWithTabbableControls=["iframe"]}activate(){Wr.push(this.element),document.addEventListener("focusin",this.handleFocusIn),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}deactivate(){Wr=Wr.filter(t=>t!==this.element),this.currentFocus=null,document.removeEventListener("focusin",this.handleFocusIn),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)}isActive(){return Wr[Wr.length-1]===this.element}activateExternal(){this.isExternalActivated=!0}deactivateExternal(){this.isExternalActivated=!1}checkFocus(){if(this.isActive()&&!this.isExternalActivated){let t=Ti(this.element);if(!this.element.matches(":focus-within")){let e=t[0],o=t[t.length-1],r=this.tabDirection==="forward"?e:o;typeof r?.focus=="function"&&(this.currentFocus=r,r.focus({preventScroll:!1}))}}}possiblyHasTabbableChildren(t){return this.elementsWithTabbableControls.includes(t.tagName.toLowerCase())||t.hasAttribute("controls")}};var ms=new Set;function dh(){let t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}function hh(){let t=Number(getComputedStyle(document.body).paddingRight.replace(/px/,""));return isNaN(t)||!t?0:t}function gs(t){if(ms.add(t),!document.documentElement.classList.contains("sl-scroll-lock")){let e=dh()+hh(),o=getComputedStyle(document.documentElement).scrollbarGutter;(!o||o==="auto")&&(o="stable"),e<2&&(o=""),document.documentElement.style.setProperty("--sl-scroll-lock-gutter",o),document.documentElement.classList.add("sl-scroll-lock"),document.documentElement.style.setProperty("--sl-scroll-lock-size",`${e}px`)}}function bs(t){ms.delete(t),ms.size===0&&(document.documentElement.classList.remove("sl-scroll-lock"),document.documentElement.style.removeProperty("--sl-scroll-lock-size"))}var Gl=W` :host { --width: 31rem; --header-spacing: var(--sl-spacing-large); --body-spacing: var(--sl-spacing-large); --footer-spacing: var(--sl-spacing-large); display: contents; } .dialog { display: flex; align-items: center; justify-content: center; position: fixed; top: 0; right: 0; bottom: 0; left: 0; z-index: var(--sl-z-index-dialog); } .dialog__panel { display: flex; flex-direction: column; z-index: 2; width: var(--width); max-width: calc(100% - var(--sl-spacing-2x-large)); max-height: calc(100% - var(--sl-spacing-2x-large)); background-color: var(--sl-panel-background-color); border-radius: var(--sl-border-radius-medium); box-shadow: var(--sl-shadow-x-large); } .dialog__panel:focus { outline: none; } /* Ensure there's enough vertical padding for phones that don't update vh when chrome appears (e.g. iPhone) */ @media screen and (max-width: 420px) { .dialog__panel { max-height: 80vh; } } .dialog--open .dialog__panel { display: flex; opacity: 1; } .dialog__header { flex: 0 0 auto; display: flex; } .dialog__title { flex: 1 1 auto; font: inherit; font-size: var(--sl-font-size-large); line-height: var(--sl-line-height-dense); padding: var(--header-spacing); margin: 0; } .dialog__header-actions { flex-shrink: 0; display: flex; flex-wrap: wrap; justify-content: end; gap: var(--sl-spacing-2x-small); padding: 0 var(--header-spacing); } .dialog__header-actions sl-icon-button, .dialog__header-actions ::slotted(sl-icon-button) { flex: 0 0 auto; display: flex; align-items: center; font-size: var(--sl-font-size-medium); } .dialog__body { flex: 1 1 auto; display: block; padding: var(--body-spacing); overflow: auto; -webkit-overflow-scrolling: touch; } .dialog__footer { flex: 0 0 auto; text-align: right; padding: var(--footer-spacing); } .dialog__footer ::slotted(sl-button:not(:first-of-type)) { margin-inline-start: var(--sl-spacing-x-small); } .dialog:not(.dialog--has-footer) .dialog__footer { display: none; } .dialog__overlay { position: fixed; top: 0; right: 0; bottom: 0; left: 0; background-color: var(--sl-overlay-background-color); } @media (forced-colors: active) { .dialog__panel { border: solid 1px var(--sl-color-neutral-0); } } `;var Me=class extends X{constructor(){super(...arguments),this.hasSlotController=new Ie(this,"footer"),this.localize=new Tt(this),this.modal=new Vl(this),this.open=!1,this.label="",this.noHeader=!1,this.handleDocumentKeyDown=t=>{t.key==="Escape"&&this.modal.isActive()&&this.open&&(t.stopPropagation(),this.requestClose("keyboard"))}}firstUpdated(){this.dialog.hidden=!this.open,this.open&&(this.addOpenListeners(),this.modal.activate(),gs(this))}disconnectedCallback(){super.disconnectedCallback(),this.modal.deactivate(),bs(this),this.removeOpenListeners()}requestClose(t){if(this.emit("sl-request-close",{cancelable:!0,detail:{source:t}}).defaultPrevented){let o=Yt(this,"dialog.denyClose",{dir:this.localize.dir()});Qt(this.panel,o.keyframes,o.options);return}this.hide()}addOpenListeners(){var t;"CloseWatcher"in window?((t=this.closeWatcher)==null||t.destroy(),this.closeWatcher=new CloseWatcher,this.closeWatcher.onclose=()=>this.requestClose("keyboard")):document.addEventListener("keydown",this.handleDocumentKeyDown)}removeOpenListeners(){var t;(t=this.closeWatcher)==null||t.destroy(),document.removeEventListener("keydown",this.handleDocumentKeyDown)}async handleOpenChange(){if(this.open){this.emit("sl-show"),this.addOpenListeners(),this.originalTrigger=document.activeElement,this.modal.activate(),gs(this);let t=this.querySelector("[autofocus]");t&&t.removeAttribute("autofocus"),await Promise.all([oe(this.dialog),oe(this.overlay)]),this.dialog.hidden=!1,requestAnimationFrame(()=>{this.emit("sl-initial-focus",{cancelable:!0}).defaultPrevented||(t?t.focus({preventScroll:!0}):this.panel.focus({preventScroll:!0})),t&&t.setAttribute("autofocus","")});let e=Yt(this,"dialog.show",{dir:this.localize.dir()}),o=Yt(this,"dialog.overlay.show",{dir:this.localize.dir()});await Promise.all([Qt(this.panel,e.keyframes,e.options),Qt(this.overlay,o.keyframes,o.options)]),this.emit("sl-after-show")}else{ai(this),this.emit("sl-hide"),this.removeOpenListeners(),this.modal.deactivate(),await Promise.all([oe(this.dialog),oe(this.overlay)]);let t=Yt(this,"dialog.hide",{dir:this.localize.dir()}),e=Yt(this,"dialog.overlay.hide",{dir:this.localize.dir()});await Promise.all([Qt(this.overlay,e.keyframes,e.options).then(()=>{this.overlay.hidden=!0}),Qt(this.panel,t.keyframes,t.options).then(()=>{this.panel.hidden=!0})]),this.dialog.hidden=!0,this.overlay.hidden=!1,this.panel.hidden=!1,bs(this);let o=this.originalTrigger;typeof o?.focus=="function"&&setTimeout(()=>o.focus()),this.emit("sl-after-hide")}}async show(){if(!this.open)return this.open=!0,be(this,"sl-after-show")}async hide(){if(this.open)return this.open=!1,be(this,"sl-after-hide")}render(){return R`<div part="base" class=${mt({dialog:!0,"dialog--open":this.open,"dialog--has-footer":this.hasSlotController.test("footer")})} ><div part="overlay" class="dialog__overlay" @click=${()=>this.requestClose("overlay")} tabindex="-1"></div><div part="panel" class="dialog__panel" role="dialog" aria-modal="true" aria-hidden=${this.open?"false":"true"} aria-label=${z(this.noHeader?this.label:void 0)} aria-labelledby=${z(this.noHeader?void 0:"title")} tabindex="-1" >${this.noHeader?"":R`<header part="header" class="dialog__header"><h2 part="title" class="dialog__title" id="title"><slot name="label">${this.label.length>0?this.label:"\uFEFF"}</slot></h2><div part="header-actions" class="dialog__header-actions"><slot name="header-actions"></slot><sl-icon-button part="close-button" exportparts="base:close-button__base" class="dialog__close" name="x-lg" label=${this.localize.term("close")} library="system" @click="${()=>this.requestClose("close-button")}" ></sl-icon-button></div></header>`} ${""}<div part="body" class="dialog__body" tabindex="-1"><slot></slot></div><footer part="footer" class="dialog__footer"><slot name="footer"></slot></footer></div></div>`}};Me.styles=[ot,Gl];Me.dependencies={"sl-icon-button":Kt};p([Z(".dialog")],Me.prototype,"dialog",2);p([Z(".dialog__panel")],Me.prototype,"panel",2);p([Z(".dialog__overlay")],Me.prototype,"overlay",2);p([y({type:Boolean,reflect:!0})],Me.prototype,"open",2);p([y({reflect:!0})],Me.prototype,"label",2);p([y({attribute:"no-header",type:Boolean,reflect:!0})],Me.prototype,"noHeader",2);p([dt("open",{waitUntilFirstUpdate:!0})],Me.prototype,"handleOpenChange",1);Xt("dialog.show",{keyframes:[{opacity:0,scale:.8},{opacity:1,scale:1}],options:{duration:250,easing:"ease"}});Xt("dialog.hide",{keyframes:[{opacity:1,scale:1},{opacity:0,scale:.8}],options:{duration:250,easing:"ease"}});Xt("dialog.denyClose",{keyframes:[{scale:1},{scale:1.02},{scale:1}],options:{duration:250}});Xt("dialog.overlay.show",{keyframes:[{opacity:0},{opacity:1}],options:{duration:250}});Xt("dialog.overlay.hide",{keyframes:[{opacity:1},{opacity:0}],options:{duration:250}});Me.define("sl-dialog");var Ul=W` :host { --color: var(--sl-panel-border-color); --width: var(--sl-panel-border-width); --spacing: var(--sl-spacing-medium); } :host(:not([vertical])) { display: block; border-top: solid var(--width) var(--color); margin: var(--spacing) 0; } :host([vertical]) { display: inline-block; height: 100%; border-left: solid var(--width) var(--color); margin: 0 var(--spacing); } `;var qr=class extends X{constructor(){super(...arguments),this.vertical=!1}connectedCallback(){super.connectedCallback(),this.setAttribute("role","separator")}handleVerticalChange(){this.setAttribute("aria-orientation",this.vertical?"vertical":"horizontal")}};qr.styles=[ot,Ul];p([y({type:Boolean,reflect:!0})],qr.prototype,"vertical",2);p([dt("vertical")],qr.prototype,"handleVerticalChange",1);qr.define("sl-divider");Bt.define("sl-dropdown");Pt.define("sl-icon");U.define("sl-input");var Kl=W` :host { display: block; position: relative; background: var(--sl-panel-background-color); border: solid var(--sl-panel-border-width) var(--sl-panel-border-color); border-radius: var(--sl-border-radius-medium); padding: var(--sl-spacing-x-small) 0; overflow: auto; overscroll-behavior: none; } ::slotted(sl-divider) { --spacing: var(--sl-spacing-x-small); } `;var Vi=class extends X{connectedCallback(){super.connectedCallback(),this.setAttribute("role","menu")}handleClick(t){let e=["menuitem","menuitemcheckbox"],o=t.composedPath(),r=o.find(s=>{var l;return e.includes(((l=s?.getAttribute)==null?void 0:l.call(s,"role"))||"")});if(!r||o.find(s=>{var l;return((l=s?.getAttribute)==null?void 0:l.call(s,"role"))==="menu"})!==this)return;let a=r;a.type==="checkbox"&&(a.checked=!a.checked),this.emit("sl-select",{detail:{item:a}})}handleKeyDown(t){if(t.key==="Enter"||t.key===" "){let e=this.getCurrentItem();t.preventDefault(),t.stopPropagation(),e?.click()}else if(["ArrowDown","ArrowUp","Home","End"].includes(t.key)){let e=this.getAllItems(),o=this.getCurrentItem(),r=o?e.indexOf(o):0;e.length>0&&(t.preventDefault(),t.stopPropagation(),t.key==="ArrowDown"?r++:t.key==="ArrowUp"?r--:t.key==="Home"?r=0:t.key==="End"&&(r=e.length-1),r<0&&(r=e.length-1),r>e.length-1&&(r=0),this.setCurrentItem(e[r]),e[r].focus())}}handleMouseDown(t){let e=t.target;this.isMenuItem(e)&&this.setCurrentItem(e)}handleSlotChange(){let t=this.getAllItems();t.length>0&&this.setCurrentItem(t[0])}isMenuItem(t){var e;return t.tagName.toLowerCase()==="sl-menu-item"||["menuitem","menuitemcheckbox","menuitemradio"].includes((e=t.getAttribute("role"))!=null?e:"")}getAllItems(){return[...this.defaultSlot.assignedElements({flatten:!0})].filter(t=>!(t.inert||!this.isMenuItem(t)))}getCurrentItem(){return this.getAllItems().find(t=>t.getAttribute("tabindex")==="0")}setCurrentItem(t){this.getAllItems().forEach(o=>{o.setAttribute("tabindex",o===t?"0":"-1")})}render(){return R`<slot @slotchange=${this.handleSlotChange} @click=${this.handleClick} @keydown=${this.handleKeyDown} @mousedown=${this.handleMouseDown} ></slot>`}};Vi.styles=[ot,Kl];p([Z("slot")],Vi.prototype,"defaultSlot",2);Vi.define("sl-menu");var jl=W` :host { --submenu-offset: -2px; display: block; } :host([inert]) { display: none; } .menu-item { position: relative; display: flex; align-items: stretch; font-family: var(--sl-font-sans); font-size: var(--sl-font-size-medium); font-weight: var(--sl-font-weight-normal); line-height: var(--sl-line-height-normal); letter-spacing: var(--sl-letter-spacing-normal); color: var(--sl-color-neutral-700); padding: var(--sl-spacing-2x-small) var(--sl-spacing-2x-small); transition: var(--sl-transition-fast) fill; user-select: none; -webkit-user-select: none; white-space: nowrap; cursor: pointer; } .menu-item.menu-item--disabled { outline: none; opacity: 0.5; cursor: not-allowed; } .menu-item.menu-item--loading { outline: none; cursor: wait; } .menu-item.menu-item--loading *:not(sl-spinner) { opacity: 0.5; } .menu-item--loading sl-spinner { --indicator-color: currentColor; --track-width: 1px; position: absolute; font-size: 0.75em; top: calc(50% - 0.5em); left: 0.65rem; opacity: 1; } .menu-item .menu-item__label { flex: 1 1 auto; display: inline-block; text-overflow: ellipsis; overflow: hidden; } .menu-item .menu-item__prefix { flex: 0 0 auto; display: flex; align-items: center; } .menu-item .menu-item__prefix::slotted(*) { margin-inline-end: var(--sl-spacing-x-small); } .menu-item .menu-item__suffix { flex: 0 0 auto; display: flex; align-items: center; } .menu-item .menu-item__suffix::slotted(*) { margin-inline-start: var(--sl-spacing-x-small); } /* Safe triangle */ .menu-item--submenu-expanded::after { content: ''; position: fixed; z-index: calc(var(--sl-z-index-dropdown) - 1); top: 0; right: 0; bottom: 0; left: 0; clip-path: polygon( var(--safe-triangle-cursor-x, 0) var(--safe-triangle-cursor-y, 0), var(--safe-triangle-submenu-start-x, 0) var(--safe-triangle-submenu-start-y, 0), var(--safe-triangle-submenu-end-x, 0) var(--safe-triangle-submenu-end-y, 0) ); } :host(:focus-visible) { outline: none; } :host(:hover:not([aria-disabled='true'], :focus-visible)) .menu-item, .menu-item--submenu-expanded { background-color: var(--sl-color-neutral-100); color: var(--sl-color-neutral-1000); } :host(:focus-visible) .menu-item { outline: none; background-color: var(--sl-color-primary-600); color: var(--sl-color-neutral-0); opacity: 1; } .menu-item .menu-item__check, .menu-item .menu-item__chevron { flex: 0 0 auto; display: flex; align-items: center; justify-content: center; width: 1.5em; visibility: hidden; } .menu-item--checked .menu-item__check, .menu-item--has-submenu .menu-item__chevron { visibility: visible; } /* Add elevation and z-index to submenus */ sl-popup::part(popup) { box-shadow: var(--sl-shadow-large); z-index: var(--sl-z-index-dropdown); margin-left: var(--submenu-offset); } .menu-item--rtl sl-popup::part(popup) { margin-left: calc(-1 * var(--submenu-offset)); } @media (forced-colors: active) { :host(:hover:not([aria-disabled='true'])) .menu-item, :host(:focus-visible) .menu-item { outline: dashed 1px SelectedItem; outline-offset: -1px; } } ::slotted(sl-menu) { max-width: var(--auto-size-available-width) !important; max-height: var(--auto-size-available-height) !important; } `;var Zr=(t,e)=>{let o=t._$AN;if(o===void 0)return!1;for(let r of o)r._$AO?.(e,!1),Zr(r,e);return!0},Gi=t=>{let e,o;do{if((e=t._$AM)===void 0)break;o=e._$AN,o.delete(t),t=e}while(o?.size===0)},Wl=t=>{for(let e;e=t._$AM;t=e){let o=e._$AN;if(o===void 0)e._$AN=o=new Set;else if(o.has(t))break;o.add(t),mh(e)}};function ph(t){this._$AN!==void 0?(Gi(this),this._$AM=t,Wl(this)):this._$AM=t}function fh(t,e=!1,o=0){let r=this._$AH,i=this._$AN;if(i!==void 0&&i.size!==0)if(e)if(Array.isArray(r))for(let n=o;n<r.length;n++)Zr(r[n],!1),Gi(r[n]);else r!=null&&(Zr(r,!1),Gi(r));else Zr(this,t)}var mh=t=>{t.type==ue.CHILD&&(t._$AP??=fh,t._$AQ??=ph)},Ui=class extends Oe{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,o,r){super._$AT(e,o,r),Wl(this),this.isConnected=e._$AU}_$AO(e,o=!0){e!==this.isConnected&&(this.isConnected=e,e?this.reconnected?.():this.disconnected?.()),o&&(Zr(this,e),Gi(this))}setValue(e){if(_i(this._$Ct))this._$Ct._$AI(e,this);else{let o=[...this._$Ct._$AH];o[this._$Ci]=e,this._$Ct._$AI(o,this,0)}}disconnected(){}reconnected(){}};var ql=()=>new vs,vs=class{},ys=new WeakMap,Zl=Ke(class extends Ui{render(t){return _t}update(t,[e]){let o=e!==this.Y;return o&&this.Y!==void 0&&this.rt(void 0),(o||this.lt!==this.ct)&&(this.Y=e,this.ht=t.options?.host,this.rt(this.ct=t.element)),_t}rt(t){if(this.isConnected||(t=void 0),typeof this.Y=="function"){let e=this.ht??globalThis,o=ys.get(e);o===void 0&&(o=new WeakMap,ys.set(e,o)),o.get(this.Y)!==void 0&&this.Y.call(this.ht,void 0),o.set(this.Y,t),t!==void 0&&this.Y.call(this.ht,t)}else this.Y.value=t}get lt(){return typeof this.Y=="function"?ys.get(this.ht??globalThis)?.get(this.Y):this.Y?.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}});var Xl=class{constructor(t,e){this.popupRef=ql(),this.enableSubmenuTimer=-1,this.isConnected=!1,this.isPopupConnected=!1,this.skidding=0,this.submenuOpenDelay=100,this.handleMouseMove=o=>{this.host.style.setProperty("--safe-triangle-cursor-x",`${o.clientX}px`),this.host.style.setProperty("--safe-triangle-cursor-y",`${o.clientY}px`)},this.handleMouseOver=()=>{this.hasSlotController.test("submenu")&&this.enableSubmenu()},this.handleKeyDown=o=>{switch(o.key){case"Escape":case"Tab":this.disableSubmenu();break;case"ArrowLeft":o.target!==this.host&&(o.preventDefault(),o.stopPropagation(),this.host.focus(),this.disableSubmenu());break;case"ArrowRight":case"Enter":case" ":this.handleSubmenuEntry(o);break;default:break}},this.handleClick=o=>{var r;o.target===this.host?(o.preventDefault(),o.stopPropagation()):o.target instanceof Element&&(o.target.tagName==="sl-menu-item"||(r=o.target.role)!=null&&r.startsWith("menuitem"))&&this.disableSubmenu()},this.handleFocusOut=o=>{o.relatedTarget&&o.relatedTarget instanceof Element&&this.host.contains(o.relatedTarget)||this.disableSubmenu()},this.handlePopupMouseover=o=>{o.stopPropagation()},this.handlePopupReposition=()=>{let o=this.host.renderRoot.querySelector("slot[name='submenu']"),r=o?.assignedElements({flatten:!0}).filter(u=>u.localName==="sl-menu")[0],i=getComputedStyle(this.host).direction==="rtl";if(!r)return;let{left:n,top:a,width:s,height:l}=r.getBoundingClientRect();this.host.style.setProperty("--safe-triangle-submenu-start-x",`${i?n+s:n}px`),this.host.style.setProperty("--safe-triangle-submenu-start-y",`${a}px`),this.host.style.setProperty("--safe-triangle-submenu-end-x",`${i?n+s:n}px`),this.host.style.setProperty("--safe-triangle-submenu-end-y",`${a+l}px`)},(this.host=t).addController(this),this.hasSlotController=e}hostConnected(){this.hasSlotController.test("submenu")&&!this.host.disabled&&this.addListeners()}hostDisconnected(){this.removeListeners()}hostUpdated(){this.hasSlotController.test("submenu")&&!this.host.disabled?(this.addListeners(),this.updateSkidding()):this.removeListeners()}addListeners(){this.isConnected||(this.host.addEventListener("mousemove",this.handleMouseMove),this.host.addEventListener("mouseover",this.handleMouseOver),this.host.addEventListener("keydown",this.handleKeyDown),this.host.addEventListener("click",this.handleClick),this.host.addEventListener("focusout",this.handleFocusOut),this.isConnected=!0),this.isPopupConnected||this.popupRef.value&&(this.popupRef.value.addEventListener("mouseover",this.handlePopupMouseover),this.popupRef.value.addEventListener("sl-reposition",this.handlePopupReposition),this.isPopupConnected=!0)}removeListeners(){this.isConnected&&(this.host.removeEventListener("mousemove",this.handleMouseMove),this.host.removeEventListener("mouseover",this.handleMouseOver),this.host.removeEventListener("keydown",this.handleKeyDown),this.host.removeEventListener("click",this.handleClick),this.host.removeEventListener("focusout",this.handleFocusOut),this.isConnected=!1),this.isPopupConnected&&this.popupRef.value&&(this.popupRef.value.removeEventListener("mouseover",this.handlePopupMouseover),this.popupRef.value.removeEventListener("sl-reposition",this.handlePopupReposition),this.isPopupConnected=!1)}handleSubmenuEntry(t){let e=this.host.renderRoot.querySelector("slot[name='submenu']");if(!e)return;let o=null;for(let r of e.assignedElements())if(o=r.querySelectorAll("sl-menu-item, [role^='menuitem']"),o.length!==0)break;if(!(!o||o.length===0)){o[0].setAttribute("tabindex","0");for(let r=1;r!==o.length;++r)o[r].setAttribute("tabindex","-1");this.popupRef.value&&(t.preventDefault(),t.stopPropagation(),this.popupRef.value.active?o[0]instanceof HTMLElement&&o[0].focus():(this.enableSubmenu(!1),this.host.updateComplete.then(()=>{o[0]instanceof HTMLElement&&o[0].focus()}),this.host.requestUpdate()))}}setSubmenuState(t){this.popupRef.value&&this.popupRef.value.active!==t&&(this.popupRef.value.active=t,this.host.requestUpdate())}enableSubmenu(t=!0){t?(window.clearTimeout(this.enableSubmenuTimer),this.enableSubmenuTimer=window.setTimeout(()=>{this.setSubmenuState(!0)},this.submenuOpenDelay)):this.setSubmenuState(!0)}disableSubmenu(){window.clearTimeout(this.enableSubmenuTimer),this.setSubmenuState(!1)}updateSkidding(){var t;if(!((t=this.host.parentElement)!=null&&t.computedStyleMap))return;let e=this.host.parentElement.computedStyleMap(),r=["padding-top","border-top-width","margin-top"].reduce((i,n)=>{var a;let s=(a=e.get(n))!=null?a:new CSSUnitValue(0,"px"),u=(s instanceof CSSUnitValue?s:new CSSUnitValue(0,"px")).to("px");return i-u.value},0);this.skidding=r}isExpanded(){return this.popupRef.value?this.popupRef.value.active:!1}renderSubmenu(){let t=getComputedStyle(this.host).direction==="rtl";return this.isConnected?R`<sl-popup ${Zl(this.popupRef)} placement=${t?"left-start":"right-start"} anchor="anchor" flip flip-fallback-strategy="best-fit" skidding="${this.skidding}" strategy="fixed" auto-size="vertical" auto-size-padding="10" ><slot name="submenu"></slot></sl-popup>`:R`<slot name="submenu" hidden></slot>`}};var ne=class extends X{constructor(){super(...arguments),this.localize=new Tt(this),this.type="normal",this.checked=!1,this.value="",this.loading=!1,this.disabled=!1,this.hasSlotController=new Ie(this,"submenu"),this.submenuController=new Xl(this,this.hasSlotController),this.handleHostClick=t=>{this.disabled&&(t.preventDefault(),t.stopImmediatePropagation())},this.handleMouseOver=t=>{this.focus(),t.stopPropagation()}}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.handleHostClick),this.addEventListener("mouseover",this.handleMouseOver)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.handleHostClick),this.removeEventListener("mouseover",this.handleMouseOver)}handleDefaultSlotChange(){let t=this.getTextLabel();if(typeof this.cachedTextLabel>"u"){this.cachedTextLabel=t;return}t!==this.cachedTextLabel&&(this.cachedTextLabel=t,this.emit("slotchange",{bubbles:!0,composed:!1,cancelable:!1}))}handleCheckedChange(){if(this.checked&&this.type!=="checkbox"){this.checked=!1;return}this.type==="checkbox"?this.setAttribute("aria-checked",this.checked?"true":"false"):this.removeAttribute("aria-checked")}handleDisabledChange(){this.setAttribute("aria-disabled",this.disabled?"true":"false")}handleTypeChange(){this.type==="checkbox"?(this.setAttribute("role","menuitemcheckbox"),this.setAttribute("aria-checked",this.checked?"true":"false")):(this.setAttribute("role","menuitem"),this.removeAttribute("aria-checked"))}getTextLabel(){return Ra(this.defaultSlot)}isSubmenu(){return this.hasSlotController.test("submenu")}render(){let t=this.localize.dir()==="rtl",e=this.submenuController.isExpanded();return R`<div id="anchor" part="base" class=${mt({"menu-item":!0,"menu-item--rtl":t,"menu-item--checked":this.checked,"menu-item--disabled":this.disabled,"menu-item--loading":this.loading,"menu-item--has-submenu":this.isSubmenu(),"menu-item--submenu-expanded":e})} ?aria-haspopup="${this.isSubmenu()}" ?aria-expanded="${!!e}" ><span part="checked-icon" class="menu-item__check"><sl-icon name="check" library="system" aria-hidden="true"></sl-icon></span><slot name="prefix" part="prefix" class="menu-item__prefix"></slot><slot part="label" class="menu-item__label" @slotchange=${this.handleDefaultSlotChange}></slot><slot name="suffix" part="suffix" class="menu-item__suffix"></slot><span part="submenu-icon" class="menu-item__chevron"><sl-icon name=${t?"chevron-left":"chevron-right"} library="system" aria-hidden="true"></sl-icon></span>${this.submenuController.renderSubmenu()} ${this.loading?R`<sl-spinner part="spinner" exportparts="base:spinner__base"></sl-spinner>`:""}</div>`}};ne.styles=[ot,jl];ne.dependencies={"sl-icon":Pt,"sl-popup":ut,"sl-spinner":Tr};p([Z("slot:not([name])")],ne.prototype,"defaultSlot",2);p([Z(".menu-item")],ne.prototype,"menuItem",2);p([y()],ne.prototype,"type",2);p([y({type:Boolean,reflect:!0})],ne.prototype,"checked",2);p([y()],ne.prototype,"value",2);p([y({type:Boolean,reflect:!0})],ne.prototype,"loading",2);p([y({type:Boolean,reflect:!0})],ne.prototype,"disabled",2);p([dt("checked")],ne.prototype,"handleCheckedChange",1);p([dt("disabled")],ne.prototype,"handleDisabledChange",1);p([dt("type")],ne.prototype,"handleTypeChange",1);ne.define("sl-menu-item");var Yl=W` :host { --max-width: 20rem; --hide-delay: 0ms; --show-delay: 150ms; display: contents; } .tooltip { --arrow-size: var(--sl-tooltip-arrow-size); --arrow-color: var(--sl-tooltip-background-color); } .tooltip::part(popup) { z-index: var(--sl-z-index-tooltip); } .tooltip[placement^='top']::part(popup) { transform-origin: bottom; } .tooltip[placement^='bottom']::part(popup) { transform-origin: top; } .tooltip[placement^='left']::part(popup) { transform-origin: right; } .tooltip[placement^='right']::part(popup) { transform-origin: left; } .tooltip__body { display: block; width: max-content; max-width: var(--max-width); border-radius: var(--sl-tooltip-border-radius); background-color: var(--sl-tooltip-background-color); font-family: var(--sl-tooltip-font-family); font-size: var(--sl-tooltip-font-size); font-weight: var(--sl-tooltip-font-weight); line-height: var(--sl-tooltip-line-height); text-align: start; white-space: normal; color: var(--sl-tooltip-color); padding: var(--sl-tooltip-padding); pointer-events: none; user-select: none; -webkit-user-select: none; } `;var zt=class extends X{constructor(){super(),this.localize=new Tt(this),this.content="",this.placement="top",this.disabled=!1,this.distance=8,this.open=!1,this.skidding=0,this.trigger="hover focus",this.hoist=!1,this.handleBlur=()=>{this.hasTrigger("focus")&&this.hide()},this.handleClick=()=>{this.hasTrigger("click")&&(this.open?this.hide():this.show())},this.handleFocus=()=>{this.hasTrigger("focus")&&this.show()},this.handleDocumentKeyDown=t=>{t.key==="Escape"&&(t.stopPropagation(),this.hide())},this.handleMouseOver=()=>{if(this.hasTrigger("hover")){let t=qn(getComputedStyle(this).getPropertyValue("--show-delay"));clearTimeout(this.hoverTimeout),this.hoverTimeout=window.setTimeout(()=>this.show(),t)}},this.handleMouseOut=()=>{if(this.hasTrigger("hover")){let t=qn(getComputedStyle(this).getPropertyValue("--hide-delay"));clearTimeout(this.hoverTimeout),this.hoverTimeout=window.setTimeout(()=>this.hide(),t)}},this.addEventListener("blur",this.handleBlur,!0),this.addEventListener("focus",this.handleFocus,!0),this.addEventListener("click",this.handleClick),this.addEventListener("mouseover",this.handleMouseOver),this.addEventListener("mouseout",this.handleMouseOut)}disconnectedCallback(){var t;super.disconnectedCallback(),(t=this.closeWatcher)==null||t.destroy(),document.removeEventListener("keydown",this.handleDocumentKeyDown)}firstUpdated(){this.body.hidden=!this.open,this.open&&(this.popup.active=!0,this.popup.reposition())}hasTrigger(t){return this.trigger.split(" ").includes(t)}async handleOpenChange(){var t,e;if(this.open){if(this.disabled)return;this.emit("sl-show"),"CloseWatcher"in window?((t=this.closeWatcher)==null||t.destroy(),this.closeWatcher=new CloseWatcher,this.closeWatcher.onclose=()=>{this.hide()}):document.addEventListener("keydown",this.handleDocumentKeyDown),await oe(this.body),this.body.hidden=!1,this.popup.active=!0;let{keyframes:o,options:r}=Yt(this,"tooltip.show",{dir:this.localize.dir()});await Qt(this.popup.popup,o,r),this.popup.reposition(),this.emit("sl-after-show")}else{this.emit("sl-hide"),(e=this.closeWatcher)==null||e.destroy(),document.removeEventListener("keydown",this.handleDocumentKeyDown),await oe(this.body);let{keyframes:o,options:r}=Yt(this,"tooltip.hide",{dir:this.localize.dir()});await Qt(this.popup.popup,o,r),this.popup.active=!1,this.body.hidden=!0,this.emit("sl-after-hide")}}async handleOptionsChange(){this.hasUpdated&&(await this.updateComplete,this.popup.reposition())}handleDisabledChange(){this.disabled&&this.open&&this.hide()}async show(){if(!this.open)return this.open=!0,be(this,"sl-after-show")}async hide(){if(this.open)return this.open=!1,be(this,"sl-after-hide")}render(){return R`<sl-popup part="base" exportparts=" popup:base__popup, arrow:base__arrow " class=${mt({tooltip:!0,"tooltip--open":this.open})} placement=${this.placement} distance=${this.distance} skidding=${this.skidding} strategy=${this.hoist?"fixed":"absolute"} flip shift arrow hover-bridge >${""}<slot slot="anchor" aria-describedby="tooltip"></slot>${""}<div part="body" id="tooltip" class="tooltip__body" role="tooltip" aria-live=${this.open?"polite":"off"}><slot name="content">${this.content}</slot></div></sl-popup>`}};zt.styles=[ot,Yl];zt.dependencies={"sl-popup":ut};p([Z("slot:not([name])")],zt.prototype,"defaultSlot",2);p([Z(".tooltip__body")],zt.prototype,"body",2);p([Z("sl-popup")],zt.prototype,"popup",2);p([y()],zt.prototype,"content",2);p([y()],zt.prototype,"placement",2);p([y({type:Boolean,reflect:!0})],zt.prototype,"disabled",2);p([y({type:Number})],zt.prototype,"distance",2);p([y({type:Boolean,reflect:!0})],zt.prototype,"open",2);p([y({type:Number})],zt.prototype,"skidding",2);p([y()],zt.prototype,"trigger",2);p([y({type:Boolean})],zt.prototype,"hoist",2);p([dt("open",{waitUntilFirstUpdate:!0})],zt.prototype,"handleOpenChange",1);p([dt(["content","distance","hoist","placement","skidding"])],zt.prototype,"handleOptionsChange",1);p([dt("disabled")],zt.prototype,"handleDisabledChange",1);Xt("tooltip.show",{keyframes:[{opacity:0,scale:.8},{opacity:1,scale:1}],options:{duration:150,easing:"ease"}});Xt("tooltip.hide",{keyframes:[{opacity:1,scale:1},{opacity:0,scale:.8}],options:{duration:150,easing:"ease"}});zt.define("sl-tooltip");Or.define("sl-visually-hidden");var gh=["0","1","2","3","4","5","6","7","8","9"],ME=gh.concat(["A","a","B","b","C","c","D","d","E","e","F","f"]);function*Ql(t,e,o=e>t?1:-1){if(o>0&&t<e)for(;t<e;)yield t,t+=o;else if(o<0&&t>e)for(;t>e;)yield t,t+=o}function Be(t,e,o){return t<e?e:t>o?o:t}function Jl(t,e){let o=e.indexOf(t)+1;return o==e.length&&(o=0),e[o]}function tc(t,e=""){return new URLSearchParams(window.parent.location.search).get(t)??e}function ec(t){return t*(Math.PI/180)}function oc(t,e={},o=null){let r=t.cloneNode(!0).content.children[0];for(let[i,n]of Object.entries(e))typeof n=="boolean"?r.toggleAttribute(i,n):r.setAttribute(i,n);return o!==null&&(r.children[0].innerText=o),r}function rc(){return navigator.userAgentData?navigator.userAgentData.mobile:/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)}function ic(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}var Dt=rc(),Ki=ic();function Fe(t,e=!0){t.toggleAttribute("disabled",e)}function Le(t,e=!0){t.toggleAttribute("hidden",e)}function ji(t,e=!0){t.toggleAttribute("checked",e)}function _s(t,e=!0){t.toggleAttribute("loading",e)}var Wi=class{#t=null;#o="";constructor(e,o){switch(e){case"local":this.#t=localStorage;break;case"session":this.#t=sessionStorage;break;default:throw Error(`Invalid storage type: "${e}".`)}o!=""&&(this.#o=o+"_"),this.#o.replace(" ","_")}#e(e){return this.#o+e}isAvailable(){try{let e="__storage_test__";return this.#t.setItem(e,e),this.#t.removeItem(e),!0}catch(e){return e instanceof DOMException&&e.name==="QuotaExceededError"&&this.#t&&this.#t.length!==0}}readString(e,o=""){try{if(!this.isAvailable())throw Error();let r=this.#t.getItem(this.#e(e));return r??o}catch{return o}}writeString(e,o){try{if(!this.isAvailable())throw Error();this.#t.setItem(this.#e(e),o)}catch{return!1}return!0}readNumber(e,o=0){let r=this.readString(e,o);return isNaN(r)?o:Number(r)}writeNumber(e,o){return isNaN(o)?!1:this.writeString(e,o.toString())}readBool(e,o=!1){return this.readString(e,o.toString())==="true"}writeBool(e,o){return o!=!0&&o!=!1?!1:this.writeString(e,o.toString())}remove(e){try{if(!this.isAvailable())throw Error();this.#t.removeItem(this.#e(e))}catch{return!1}return!0}has(e){return this.isAvailable()&&this.#t.getItem(this.#e(e))!==null}keys(){let e=[],o=this.#o.length;for(let r=0;r<this.#t.length;r++){let i=this.#t.key(r);i.startsWith(this.#o)&&e.push(i.substring(o))}return e}clear(){for(let e of this.keys())this.remove(e)}},qi=class extends Wi{constructor(e){super("local",e)}},Zi=class extends Wi{constructor(e){super("session",e)}};var ws="http://www.w3.org/2000/svg",bh={createElement(t,e={}){let o=document.createElementNS(ws,t);for(let[r,i]of Object.entries(e))o.setAttribute(r,i);return o},createRootElement(t={}){let e=document.createElementNS(ws,"svg");e.setAttribute("version","1.1"),e.setAttribute("xmlns",ws);for(let[o,r]of Object.entries(t))e.setAttribute(o,r);return e},createGroup(t={}){return this.createElement("g",t)},makeLine(t,e,o,r,i){let n=this.createElement("line",i);return n.setAttribute("x1",t),n.setAttribute("y1",e),n.setAttribute("x2",o),n.setAttribute("y2",r),n},makeCircle(t,e,o,r={}){let i=this.createElement("circle",r);return i.setAttribute("cx",t),i.setAttribute("cy",e),i.setAttribute("r",o),i},makeRect(t,e,o=null,r=null,i=null,n=null,a={}){let s=this.createElement("rect",a);return s.setAttribute("width",t),s.setAttribute("height",e),o&&s.setAttribute("x",o),r&&s.setAttribute("y",r),i&&s.setAttribute("rx",i),n&&s.setAttribute("ry",n),s},makePolygon(t,e={}){let o=t.length,r=this.createElement("path",e),i=["M",t[0].x,t[0].y];if(o>1){for(let n=1;n<o;n++)t[n]&&i.push("L",t[n].x,t[n].y);o>2&&i.push("Z"),r.setAttribute("d",i.join(" "))}return r},makePath(t,e={},o=null,r=null){let i=this.createElement("path",e);return Array.isArray(t)&&(t=t.filter(n=>n!=null).map(n=>Array.isArray(n)?n.join(" "):n).join(" ")),i.setAttribute("d",t),o!=null&&i.setAttribute("x",o.toString()),r!=null&&i.setAttribute("y",r.toString()),i},makeSimpleArrowMarker(t,e,o={}){let r=this.makePath(["M",0,0,"L",10,5,"L",0,10,"Z"],o),i=this.createElement("marker",{id:t,viewbox:[-5,-5,15,15].join(" "),refX:5,refY:5,markerWidth:e,markerHeight:e,orient:"auto-start-reverse"});return i.appendChild(r),i}},q=bh;var sc=500,rr=1.3,ac=1.8,ir=2.5,Xi=.13,Xr=1.01,yh=5,nc=3,nr=[,-Xi,,+Xi,,,-1.4*Xi,,0,,1.4*Xi];function lc(t,e,o={}){let r=sc,i=o.height_factor??1,n=o.first_key??to("a0"),a=o.last_key??to("c8"),s=a-n,l=(n+a)/2,u=r*i,m=u*(.14*i+.51),c=rr/2,f=ac/2,h=r*2.2/15.5,g=r*1.4/15.5,b=h/2,w=h/3,_=g/2,x=h/15,E=g/20,$=2,O=2,K={top:-4,height:7,get bottom(){return this.top+this.height}},G=K.bottom-1,J=K.bottom-5,I=K.bottom+1,H=J+(I-J)/4,k={bottom_height:g/1.8*(Math.max(i-.5,0)/2+.75),bottom_height1:0,side_width_bottom:nc*2,side_width_top:nc,side_width_min:0,side_width_max:0};k.side_width_min=Math.min(k.side_width_top,k.side_width_bottom),k.side_width_max=Math.max(k.side_width_top,k.side_width_bottom),k.bottom_height1=k.bottom_height/2;let it=u-b*i,pt=it*Xr,tt=m-k.bottom_height-w*i,Lt=m-k.bottom_height1-w*i,Q=h/4/2,$t=Q+w*i,Rt=$t*.8+k.bottom_height;t.innerHTML="";for(let V=0;V<128;V++)(V<n||V>a)&&(e[V]=null);let Vt=q.createGroup(),et=q.createGroup();function Ct(V,kt,ct,A,F,D){let at=ct+c+f,ge=ct+A-c-f,le=at+(ge-at)/2,Ht=F*Xr,Gt=m+c+ir,He=Gt*Xr,B=V>n&&[2,4,7,9,11].includes(kt),C=V<a&&[0,2,5,7,9].includes(kt),Zt=ct+c+(B?_+g*nr[kt-1]+ir:f),Ko=ct+A-c-(C?_-g*nr[kt+1]+ir:f),bt=A*.015,jo=bt*Gt/F,Sn=Zt+(le-Zt)/A*jo,En=Ko-(Ko-le)/A*jo,S={ax:Zt,ay:G,bx:Ko,by:G,cx:Ko,cy:Gt,dx:ge,dy:Gt,ex:ge,ey:F,fx:at,fy:F,gx:at,gy:Gt,hx:Zt,hy:Gt},P={ax:S.ax,ay:S.ay,bx:S.bx,by:S.by,cx:En,cy:He,dx:ge-jo,dy:He,ex:ge-bt,ey:Ht,fx:at+bt,fy:Ht,gx:at+jo,gy:He,hx:Sn,hy:He},yt=D/4,Ve=q.createGroup({id:`key${V}`,class:"key white-key",value:V}),Cn=q.makePath(["M",S.ax,S.ay,"H",S.bx,C?["V",S.cy,"H",S.dx]:null,"V",S.ey,"H",S.fx,B?["V",S.gy,"H",S.hx]:null,"Z"],{class:"key-touch-area invisible",value:V}),yr=$e(["M",S.ax,S.ay,"H",S.bx,C?["L",S.cx,S.cy,"H",S.dx]:null,"L",S.ex,S.ey-D,"Q",S.ex-yt,S.ey-yt,S.ex-D,S.ey,"H",S.fx+D,"Q",S.fx+yt,S.fy-yt,S.fx,S.fy-D,B?["L",S.gx,S.gy,"H",S.hx]:null,"Z"],["M",P.ax,P.ay,"H",P.bx,C?["L",P.cx,P.cy,"H",P.dx]:null,"L",P.ex,P.ey-D,"Q",P.ex-yt,P.ey-yt,P.ex-D,P.ey,"H",P.fx+D,"Q",P.fx+yt,P.fy-yt,P.fx,P.fy-D,B?["L",P.gx,P.gy,"H",P.hx]:null,"Z"],{class:"key-fill"}),j=$,Bu=$e(["M",S.ax+j,S.ay-c,"H",S.bx-j,C?["L",S.cx-j,S.cy+j,"H",S.dx-j]:null,"L",S.ex-j,S.ey-j-D+c,"Q",S.ex-yt-j+c,S.ey-yt-j,S.ex-D-j+c,S.ey-j,"H",S.fx+j+D-c,"Q",S.fx+yt+j,S.fy-j-yt+c,S.fx+j,S.fy-j-D+c,B?["L",S.gx+j,S.gy+j,"H",S.hx+j]:null,"Z"],["M",P.ax+j,P.ay-c,"H",P.bx-j,C?["L",P.cx-j,P.cy+j,"H",P.dx-j]:null,"L",P.ex-j,P.ey-j-D+c,"Q",P.ex-yt-j+c,P.ey-yt-j,P.ex-D-j+c,P.ey-j,"H",P.fx+j+D-c,"Q",P.fx+yt+j,P.fy-j-yt+c,P.fx+j,P.fy-j-D+c,B?["L",P.gx+j,P.gy+j,"H",P.hx+j]:null,"Z"],{class:"key-highlight"}),Fu=$e(["M",S.ax,S.ay+c,B?["L",S.hx,S.hy,"H",S.gx]:null,"L",S.fx,S.fy-D-c,C?["M",S.cx,S.cy,"H",S.dx]:null],["M",P.ax,P.ay+c,B?["L",P.hx,P.hy,"H",P.gx]:null,"L",P.fx,P.fy-D-c,C?["M",P.cx,P.cy,"H",P.dx]:null],{class:"key-light-border white-key-border"}),zu=$e(["M",S.fx,S.fy-D,"Q",S.fx+yt,S.fy-yt,S.fx+D,S.fy,"H",S.ex-D,"Q",S.ex-yt,S.ey-yt,S.ex,S.ey-D,C?["L",S.dx,S.dy,"M",S.cx,S.cy]:null,"L",S.bx,S.by+c],["M",P.fx,P.fy-D,"Q",P.fx+yt,P.fy-yt,P.fx+D,P.fy,"H",P.ex-D,"Q",P.ex-yt,P.ey-yt,P.ex,P.ey-D,C?["L",P.dx,P.dy,"M",P.cx,P.cy]:null,"L",P.bx,P.by+c],{class:"key-dark-border white-key-border"}),Nu=wt(V,ct),Hu=ct+A/2,Vu=u-$t,Gu=q.makeCircle(Hu,Vu,Q,{class:"key-sticker white-key-sticker"}),An=q.createGroup({class:"key-marker-group",press_transform:`translateY(${pt-it}px)`});return An.appendChild(Nu),An.appendChild(Gu),Ve.appendChild(yr),Ve.appendChild(Bu),Ve.appendChild(zu),Ve.appendChild(Fu),Ve.appendChild(An),Ve.appendChild(Cn),Ve}function ft(V){return!o.perspective||qe(V)?0:(V-l)/((88+s)/4)*k.side_width_max}function St(V,kt,ct,A,F){let D=kt,at=D+ct,ge=F/2,le=F/4,Ht=ft(V)*1.5,Gt=Ht/2,He=Ht/1.2,B=o.perspective?{left_top:Math.max(0,k.side_width_top+Ht),left_bottom:Math.max(0,k.side_width_bottom+Ht),right_top:Math.max(0,k.side_width_top-Ht),right_bottom:Math.max(0,k.side_width_bottom-Ht),left_top1:Math.max(0,k.side_width_top+He),left_bottom1:Math.max(0,k.side_width_bottom+Gt),right_top1:Math.max(0,k.side_width_top-He),right_bottom1:Math.max(0,k.side_width_bottom-Gt)}:{left_top:k.side_width_top,left_bottom:k.side_width_bottom,right_top:k.side_width_top,right_bottom:k.side_width_bottom,left_top1:k.side_width_top,left_bottom1:k.side_width_bottom,right_top1:k.side_width_top,right_bottom1:k.side_width_bottom},C=o.perspective?{left_top:Math.min(D,D+k.side_width_top+Ht),left_bottom:Math.min(D,D+k.side_width_bottom+Ht),right_top:Math.max(at,at-k.side_width_top+Ht),right_bottom:Math.max(at,at-k.side_width_bottom+Ht),left_top1:Math.min(D,D+k.side_width_top+He),left_bottom1:Math.min(D,D+k.side_width_bottom+Gt),right_top1:Math.max(at,at-k.side_width_top+He),right_bottom1:Math.max(at,at-k.side_width_bottom+Gt)}:{left_top:D,left_bottom:D,right_top:at,right_bottom:at,left_top1:D,left_bottom1:D,right_top1:at,right_bottom1:at},Zt=q.createGroup({id:`key${V}`,class:"key black-key",value:V}),Ko=q.makePath(["M",C.left_top1,I,"L",C.left_top1+B.left_top1,H,"H",C.right_top1-B.right_top1,"L",C.right_top1,I,"L",C.right_bottom1,A-k.bottom_height1-F,"L",at,A,"H",D,"L",C.left_bottom1,A-k.bottom_height1-F,"Z"],{class:"key-touch-area invisible",value:V}),Ks=$e(["M",C.left_top,I,"L",C.left_top+B.left_top,J,"H",C.right_top-B.right_top,"L",C.right_top,I,"L",C.right_bottom,A-k.bottom_height-F,"L",at,A,"H",D,"L",C.left_bottom,A-k.bottom_height-F,"Z"],["M",C.left_top1,I,"L",C.left_top1+B.left_top1,H,"H",C.right_top1-B.right_top1,"L",C.right_top1,I,"L",C.right_bottom1,A-k.bottom_height1-F,"L",at,A,"H",D,"L",C.left_bottom1,A-k.bottom_height1-F,"Z"],{class:"key-fill"}),bt=O,jo=$e(["M",C.left_top+bt,I,"L",Math.max(C.left_top+bt,C.left_top+B.left_top),J,"H",Math.min(C.right_top-bt,C.right_top-B.right_top),"L",C.right_top-bt,I,"L",C.right_bottom-bt,A-bt-k.bottom_height-ge,"L",at-bt,A-bt,"H",D+bt,"L",C.left_bottom+bt,A-bt-k.bottom_height-ge,"Z"],["M",C.left_top1+bt,I,"L",Math.max(C.left_top1+bt,C.left_top1+B.left_top1),H,"H",Math.min(C.right_top1-bt,C.right_top1-B.right_top1),"L",C.right_top1-bt,I,"L",C.right_bottom1-bt,A-bt-k.bottom_height1-ge,"L",at-bt,A-bt,"H",D+bt,"L",C.left_bottom1+bt,A-bt-k.bottom_height1-ge,"Z"],{class:"key-highlight"});if(Zt.appendChild(Ks),Zt.appendChild(jo),B.left_bottom>0||B.left_top>0){let j=$e(["M",C.left_top,I,"L",C.left_bottom,A,"L",C.left_bottom+B.left_bottom,A-k.bottom_height-F,"L",C.left_top+B.left_top,J,"Z"],["M",C.left_top1,I,"L",C.left_bottom1,A,"L",C.left_bottom1+B.left_bottom1,A-k.bottom_height1-F,"L",C.left_top1+B.left_top1,H,"Z"],{class:"key-left-bevel black-key-bevel"});Zt.appendChild(j)}if(B.right_bottom>0||B.right_top>0){let j=$e(["M",C.right_top,I,"L",C.right_bottom,A,"L",C.right_bottom-B.right_bottom,A-k.bottom_height-F,"L",C.right_top-B.right_top,J,"Z"],["M",C.right_top1,I,"L",C.right_bottom1,A,"L",C.right_bottom1-B.right_bottom1,A-k.bottom_height1-F,"L",C.right_top1-B.right_top1,H,"Z"],{class:"key-right-bevel black-key-bevel"});Zt.appendChild(j)}let Sn=$e(["M",D,A,"H",at,"L",C.right_bottom-B.right_bottom-F,A-k.bottom_height,"H",C.left_bottom+B.left_bottom+F,"Z"],["M",D,A,"H",at,"L",C.right_bottom1-B.right_bottom1-F,A-k.bottom_height1,"H",C.left_bottom1+B.left_bottom1+F,"Z"],{class:"key-bottom-bevel black-key-bevel"});Zt.appendChild(Sn);let En=$e(["M",D,A,"L",C.left_bottom+B.left_bottom,A-k.bottom_height-F,"Q",C.left_bottom+B.left_bottom+le,A-k.bottom_height-le,C.left_bottom+B.left_bottom+F,A-k.bottom_height,"Z"],["M",D,A,"L",C.left_bottom1+B.left_bottom1,A-k.bottom_height1-F,"Q",C.left_bottom1+B.left_bottom1+le,A-k.bottom_height1-le,C.left_bottom1+B.left_bottom1+F,A-k.bottom_height1,"Z"],{class:"key-left-round-bevel black-key-bevel"});Zt.appendChild(En);let S=$e(["M",at,A,"L",C.right_bottom-B.right_bottom,A-k.bottom_height-F,"Q",C.right_bottom-B.right_bottom-le,A-k.bottom_height-le,C.right_bottom-B.right_bottom-F,A-k.bottom_height,"Z"],["M",at,A,"L",C.right_bottom1-B.right_bottom1,A-k.bottom_height1-F,"Q",C.right_bottom1-B.right_bottom1-le,A-k.bottom_height1-le,C.right_bottom1-B.right_bottom1-F,A-k.bottom_height1,"Z"],{class:"key-right-round-bevel black-key-bevel"});Zt.appendChild(S);let P=se(V,kt),yt=kt+ct/2+Ht,Ve=m-Rt,Cn=q.makeCircle(yt,Ve,Q,{class:"key-sticker black-key-sticker"}),yr=q.createGroup({class:"key-marker-group",press_transform:`translateX(${(Gt-Ht)*.7}px) translateY(${Lt-tt}px)`});return yr.appendChild(P),yr.appendChild(Cn),Zt.appendChild(yr),Zt.appendChild(Ko),Zt}function wt(V,kt){let ct=kt+b,A=q.createElement("text",{x:ct,y:it,id:`keylabel${V}`,class:"key-label white-key-label"});return A.appendChild(q.createElement("tspan",{x:ct})),A}function se(V,kt){let ct=kt+_+ft(V)/2,A=q.createElement("text",{x:ct,y:tt,id:`keylabel${V}`,class:"key-label black-key-label"});return A.appendChild(q.createElement("tspan",{x:ct})),A.appendChild(q.createElement("tspan",{x:ct,dy:"-0.9lh"})),A.appendChild(q.createElement("tspan",{x:ct,dy:"-1.0lh"})),A}let ae=0,Se=0;for(let V=n;V<=a;V++){let kt=V%12;if(qe(kt)){let ct=Ct(V,kt,Se,h,u,x);Vt.appendChild(ct),e[V]=ct,ae+=h,Se+=h}else{let ct=Se-_+nr[kt]*g,A=St(V,ct,g,m,E,Se);et.appendChild(A),e[V]=A}}t.appendChild(Vt),t.appendChild(q.makeRect(ae,K.height,0,K.top,null,null,{id:"top-felt"})),t.appendChild(et);let qt={left:-2,top:-4,width:ae+rr+2,height:u*Math.max(Xr,1)+rr+yh};t.setAttribute("viewBox",`${qt.left} ${qt.top} ${qt.width} ${qt.height}`);function Ee(V,kt,ct=!1,A={}){let F=q.createElement("linearGradient",ct?{id:V,x2:"0%",y2:"100%"}:{id:V});for(let D of kt)F.appendChild(q.createElement("stop",D));for(let[D,at]of Object.entries(A))F.setAttribute(D,at);return F}let me=q.createElement("defs");me.appendChild(Ee("white-key-gradient",[{offset:"30%","stop-color":"color-mix(in oklch, var(--color-white-key), white 10%)"},{offset:"100%","stop-color":"color-mix(in oklch, var(--color-white-key), black 10%)"}],!1,{gradientTransform:"rotate(45)"})),me.appendChild(Ee("black-key-gradient",[{offset:"30%","stop-color":"color-mix(in oklch, var(--color-black-key), white 15%)"},{offset:"100%","stop-color":"color-mix(in oklch, var(--color-black-key), black 15%)"}],!1,{gradientTransform:"rotate(45)"})),me.appendChild(Ee("pressed-white-key-highlight-gradient",[{offset:"0%","stop-color":"var(--color-highlight-alpha)","stop-opacity":"60%"},{offset:"40%","stop-color":"var(--color-highlight-alpha)"}],!0)),me.appendChild(Ee("pressed-black-key-highlight-gradient",[{offset:"0%","stop-color":"var(--color-highlight-alpha)","stop-opacity":"60%"},{offset:"50%","stop-color":"var(--color-highlight-alpha)"}],!0)),me.appendChild(Ee("top-felt-gradient",[{offset:"50%","stop-color":"var(--color-felt-top)"},{offset:"100%","stop-color":"var(--color-felt-bottom)"}],!0)),t.appendChild(me)}function cc(t,e,o={}){let r=sc,i=o.height_factor??1,n=o.first_key??to("a0"),a=o.last_key??to("c8"),s=r*i,l=s*(.14*i+.51),u=rr/2,m=ac/2,c=r*2.2/15.5,f=r*1.4/15.5,h=c/2,g=c/3,b=f/2,w=c/17,_=2,x=2,E={top:-4,height:7,get bottom(){return this.top+this.height}},$=E.bottom-1,O=E.bottom-5,K=s-h*i,G=l-h*i,I=c/4/2,H=I+g*i,k=H;t.innerHTML="";for(let et=0;et<128;et++)(et<n||et>a)&&(e[et]=null);let it=q.createGroup(),pt=q.createGroup();function tt(et,Ct,ft,St,wt,se){let ae=ft+u+m,Se=ft+St-u-m,qt=l+u+ir,Ee=et>n&&[2,4,7,9,11].includes(Ct),me=et<a&&[0,2,5,7,9].includes(Ct),V=ft+u+(Ee?b+f*nr[Ct-1]+ir:m),kt=ft+St-u-(me?b-f*nr[Ct+1]+ir:m),ct=q.createGroup({id:`key${et}`,class:"key white-key lowperf",value:et}),A=q.makePath(["M",V,$,"H",kt,me?["V",qt,"H",Se]:null,"V",wt-se,"L",Se-se,wt,"H",ae+se,"L",ae,wt-se,Ee?["V",qt,"H",V]:null,"Z"],{class:"key-fill key-touch-area lowperf"}),F=_,D=q.makePath(["M",V+F,$-u,"H",kt-F,me?["V",qt+F,"H",Se-F]:null,"V",wt-F-se+u,"L",Se-se-F+u,wt-F,"H",ae+F+se-u,"L",ae+F,wt-F-se+u,Ee?["V",qt+F,"H",V+F]:null,"Z"],{class:"key-highlight lowperf"}),at=xt(et,ft),ge=ft+St/2,le=s-H,Ht=q.makeCircle(ge,le,I,{class:"key-sticker white-key-sticker lowperf"}),Gt=q.createGroup({class:"key-marker-group lowperf"});return Gt.appendChild(at),Gt.appendChild(Ht),ct.appendChild(A),ct.appendChild(D),ct.appendChild(Gt),ct}function Lt(et,Ct,ft,St){let wt=Ct,se=wt+ft,ae=q.createGroup({id:`key${et}`,class:"key black-key lowperf",value:et}),Se=q.makePath(["M",wt,O,"H",se,"V",St,"H",wt,"Z"],{class:"key-fill key-touch-area lowperf"}),qt=x,Ee=q.makePath(["M",wt+qt,O+qt,"H",se-qt,"V",St-qt,"H",wt+qt,"Z"],{class:"key-highlight lowperf"}),me=Q(et,Ct),V=Ct+ft/2,kt=l-k,ct=q.makeCircle(V,kt,I,{class:"key-sticker black-key-sticker lowperf"}),A=q.createGroup({class:"key-marker-group lowperf"});return A.appendChild(me),A.appendChild(ct),ae.appendChild(Se),ae.appendChild(Ee),ae.appendChild(A),ae}function xt(et,Ct){let ft=Ct+h,St=q.createElement("text",{x:ft,y:K,id:`keylabel${et}`,class:"key-label white-key-label lowperf"});return St.appendChild(q.createElement("tspan",{x:ft})),St}function Q(et,Ct){let ft=Ct+b,St=q.createElement("text",{x:ft,y:G,id:`keylabel${et}`,class:"key-label black-key-label lowperf"});return St.appendChild(q.createElement("tspan",{x:ft})),St.appendChild(q.createElement("tspan",{x:ft,dy:"-0.9lh"})),St.appendChild(q.createElement("tspan",{x:ft,dy:"-1.0lh"})),St}let $t=0,Rt=0;for(let et=n;et<=a;et++){let Ct=et%12;if(qe(Ct)){let ft=tt(et,Ct,Rt,c,s,w);it.appendChild(ft),e[et]=ft,$t+=c,Rt+=c}else{let ft=Rt-b+nr[Ct]*f,St=Lt(et,ft,f,l);pt.appendChild(St),e[et]=St}}t.appendChild(it),t.appendChild(q.makeRect($t,E.height,0,E.top,null,null,{id:"top-felt",class:"lowperf"})),t.appendChild(pt);let Vt={left:-2,top:-4,width:$t+rr+2,height:s*Xr+rr+4};t.setAttribute("viewBox",`${Vt.left} ${Vt.top} ${Vt.width} ${Vt.height}`)}function $e(t,e,o={}){let r=q.createElement("path",o);return t=t.filter(i=>i!=null).map(i=>Array.isArray(i)?i.join(" "):i).join(" "),e=e.filter(i=>i!=null).map(i=>Array.isArray(i)?i.join(" "):i).join(" "),r.setAttribute("d0",t),r.setAttribute("d1",e),r}var vh=[!0,!1,!0,!1,!0,!0,!1,!0,!1,!0,!1,!0];function qe(t){return vh[t%12]}var te={onKeyPress:null,onKeyRelease:null,onSustain:null,onReset:null,get enabled(){return gt.enabled},get velocity(){return gt.velocity},set velocity(t){t<0&&(t=0),t>127&&(t=127),gt.velocity=t},enable(t=null,e=null,o=null,r=null){t&&(this.onKeyPress=t),e&&(this.onKeyRelease=e),o&&(this.onSustain=o),r&&(this.onReset=r),_h()},disable(){wh()},isNotePressed(t){return gt.pressed_keys.has(t)},isNoteSustained(t,e=!0){return gt.pressed_keys.has(t)||e&&gt.sustain_keys.has(t)},isSustainActive(){return gt.sustain},resetState(){gt.reset(),this.onReset?.()}},gt={enabled:!1,pressed_keys:new Set([]),sustain_keys:new Set([]),sustain:!1,velocity:88,map:new Map([["KeyZ",48],["KeyS",49],["KeyX",50],["KeyD",51],["KeyC",52],["KeyV",53],["KeyG",54],["KeyB",55],["KeyH",56],["KeyN",57],["KeyJ",58],["KeyM",59],["KeyW",60],["Digit3",61],["KeyE",62],["Digit4",63],["KeyR",64],["KeyT",65],["Digit6",66],["KeyY",67],["Digit7",68],["KeyU",69],["Digit8",70],["KeyI",71],["KeyO",72],["Digit0",73],["KeyP",74],["KeyQ",59],["Digit1",58],["Comma",60],["KeyL",61],["Period",62],["Semicolon",63],["Slash",64],["IntlRo",65],["Backslash",66],["Minus",75],["BracketLeft",76],["BracketRight",77],["IntlBackslash",47]]),reset(){this.pressed_keys.clear(),this.sustain_keys.clear(),this.sustain=!1}};function _h(){gt.enabled||(gt.enabled=!0,window.addEventListener("keydown",dc),window.addEventListener("keyup",hc))}function wh(){gt.enabled&&(window.removeEventListener("keydown",dc),window.removeEventListener("keyup",hc),gt.enabled=!1,gt.reset())}function kh(t){gt.pressed_keys.add(t),gt.sustain&&gt.sustain_keys.add(t),te.onKeyPress?.(t,gt.velocity)}function xh(t){gt.pressed_keys.delete(t),te.onKeyRelease?.(t)}function uc(t){if(gt.sustain!=t){if(gt.sustain=t,t)for(let e of gt.pressed_keys)gt.sustain_keys.add(e);else gt.sustain_keys.clear();te.onSustain(t)}}function dc(t){if(!(t.ctrlKey||t.altKey)){if(t.code.startsWith("Shift"))t.preventDefault(),uc(!0);else if(gt.map.has(t.code)){if(t.preventDefault(),t.repeat)return;let e=gt.map.get(t.code);kh(e)}}}function hc(t){if(t.code.startsWith("Shift")&&!t.shiftKey&&(t.preventDefault(),uc(!1)),gt.map.has(t.code)){if(t.preventDefault(),t.repeat)return;let e=gt.map.get(t.code);xh(e)}}var Io=te;var Yi=class{#t;#o;#e=[];#r=[];#l=[];#n;#s=!1;#i=!1;get visible(){return this.#i}onshow=void 0;onhide=void 0;onmenuenter=void 0;onoptionenter=void 0;constructor(e,o,r="alt"){this.#t=e,this.#o=o,this.#n=r,this.enable()}enable(){this.#s||(this.#s=!0,window.addEventListener("keydown",e=>this.#c(e)),window.addEventListener("keyup",e=>this.#u(e)),window.addEventListener("blur",()=>this.#d()))}disable(){this.#s&&(window.removeEventListener("keydown",e=>this.#c(e)),window.removeEventListener("keyup",e=>this.#u(e)),window.removeEventListener("blur",()=>this.#d()),this.#s=!1)}get container(){return this.#t}replaceStructure(e){this.#o=e,this.#i&&this.#a()}show(){this.#i==!1&&(this.#i=!0,this.#e=[0],this.onshow?.(),this.#t.hidden=!1,this.#t.focus()),this.#a()}#p(e){this.#e.push(e),this.onmenuenter?.(this.#r[e].text)}#f(){this.#e.length>1&&(this.#e.pop(),this.onmenuenter?.(this.#l.text))}#a(){this.#t.innerHTML="";let e=document.createElement("sl-breadcrumb");this.#t.appendChild(e);let o=this.#o;for(let n of this.#e){let a=document.createElement("sl-breadcrumb-item");a.innerHTML=fc(o[n][0]),o=o[n][1],e.appendChild(a)}this.#r=[];for(let[n,a]of o.entries()){this.#l=this.#r;let s=a[1]===null||a[2]?.noindex?a[0]:`&${n+1}: ${a[0]}`;this.#r.push({html:pc(s),text:fc(a[0]),action:Array.isArray(a[1])?n:a[1],keys:a[2]?.key?mc(s).concat([a[2].key]):mc(s),checkbox:a[2]?Object.hasOwn(a[2],"checked"):!1,checked:a[2]?.checked})}this.#e.length>1&&this.#r.push({html:pc("&0: Back"),text:"Back",action:()=>this.#f(),keys:["0"]});let r=this.#r.map(n=>n.checkbox?`<span check-item${n.checked?" checked":""}><span class="checkbox">${n.checked?"\u{1F5F9}":"\u2610"}</span> ${n.html}</span>`:`<span>${n.html}</span>`).join("|"),i=document.createElement("sl-breadcrumb-item");i.innerHTML="&nbsp;"+r,e.appendChild(i)}hide(){this.#i&&(this.#i=!1,this.#t.hidden=!0,this.onhide?.())}#c(e){if(!e.repeat){if(this.#h(e))e.preventDefault(),this.show();else if(this.#m(e)){let o=!1,r=e.key.toLowerCase();for(let i of this.#r)i.keys.includes(r)&&i.action!==null&&(o=!0,typeof i.action=="number"?this.#p(i.action):typeof i.action=="function"&&(i.action(),this.onoptionenter?.()));this.#a(),(o||r.length==1)&&e.preventDefault()}}}#u(e){this.#h(e)&&(e.preventDefault(),this.hide())}#d(){this.#i&&this.hide()}#h(e){return e.key.toLowerCase()==this.#n||e.code.toLowerCase().startsWith(this.#n)}#m(e){return[this.#n=="ctrl"&&e.ctrlKey,this.#n=="alt"&&e.altKey,this.#n=="shift"&&e.shiftKey].filter(o=>o).length==1}};function pc(t){return t.replace(/&(.)/g,"<u>$1</u>")}function fc(t){return t.replaceAll("&","")}function mc(t){return t.match(/(?<=&)./g)?.map(o=>o.toLowerCase())??[]}var Sh=Object.defineProperty,Eh=Object.defineProperties,Ch=Object.getOwnPropertyDescriptors,gc=Object.getOwnPropertySymbols,Ah=Object.prototype.hasOwnProperty,Ph=Object.prototype.propertyIsEnumerable,_c=t=>{throw TypeError(t)},bc=(t,e,o)=>e in t?Sh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,De=(t,e)=>{for(var o in e||(e={}))Ah.call(e,o)&&bc(t,o,e[o]);if(gc)for(var o of gc(e))Ph.call(e,o)&&bc(t,o,e[o]);return t},uo=(t,e)=>Eh(t,Ch(e)),Ss=(t,e,o)=>e.has(t)||_c("Cannot "+o),L=(t,e,o)=>(Ss(t,e,"read from private field"),o?o.call(t):e.get(t)),Ot=(t,e,o)=>e.has(t)?_c("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,o),Et=(t,e,o,r)=>(Ss(t,e,"write to private field"),r?r.call(t,o):e.set(t,o),o),No=(t,e,o)=>(Ss(t,e,"access private method"),o),jt=(t,e,o)=>new Promise((r,i)=>{var n=l=>{try{s(o.next(l))}catch(u){i(u)}},a=l=>{try{s(o.throw(l))}catch(u){i(u)}},s=l=>l.done?r(l.value):Promise.resolve(l.value).then(n,a);s((o=o.apply(t,e)).next())});function Qi(t){let e=t.filter(o=>!!o);return e.reduce((o,r)=>{let i="output"in o?o.output:o,n="input"in r?r.input:r;return i.connect(n),r}),()=>{e.reduce((o,r)=>{let i="output"in o?o.output:o,n="input"in r?r.input:r;return i.disconnect(n),r})}}function wc(t){let e=t,o=new Set;function r(a){return o.add(a),a(e),()=>{o.delete(a)}}function i(a){e=a,o.forEach(s=>s(e))}function n(){return e}return{subscribe:r,set:i,get:n}}function Th(){let t=new Set;function e(r){return t.add(r),()=>{t.delete(r)}}function o(r){t.forEach(i=>i(r))}return{subscribe:e,trigger:o}}function Mh(t){let e=!1;return()=>{e||(e=!0,t.forEach(o=>o?.()))}}function Es(t){return t*t/16129}function Lh(t){return Math.pow(10,t/20)}var Ro,co,ar,lr,Ji,Bo,Fo,kc=class{constructor(t,e){this.context=t,Ot(this,Ro),Ot(this,co),Ot(this,ar),Ot(this,lr),Ot(this,Ji),Ot(this,Bo),Ot(this,Fo,!1);var o,r,i;Et(this,Bo,{destination:(o=e?.destination)!=null?o:t.destination,volume:(r=e?.volume)!=null?r:100,volumeToGain:(i=e?.volumeToGain)!=null?i:Es}),this.input=t.createGain(),Et(this,Ro,t.createGain()),Et(this,lr,Qi([this.input,L(this,Ro),L(this,Bo).destination]));let n=wc(L(this,Bo).volume);this.setVolume=n.set,Et(this,Ji,n.subscribe(a=>{L(this,Ro).gain.value=L(this,Bo).volumeToGain(a)}))}addInsert(t){var e;if(L(this,Fo))throw Error("Can't add insert to disconnected channel");(e=L(this,ar))!=null||Et(this,ar,[]),L(this,ar).push(t),L(this,lr).call(this),Et(this,lr,Qi([this.input,...L(this,ar),L(this,Ro),L(this,Bo).destination]))}addEffect(t,e,o){var r;if(L(this,Fo))throw Error("Can't add effect to disconnected channel");let i=this.context.createGain();i.gain.value=o;let n="input"in e?e.input:e,a=Qi([L(this,Ro),i,n]);(r=L(this,co))!=null||Et(this,co,[]),L(this,co).push({name:t,mix:i,disconnect:a})}sendEffect(t,e){var o;if(L(this,Fo))throw Error("Can't send effect to disconnected channel");let r=(o=L(this,co))==null?void 0:o.find(i=>i.name===t);r&&(r.mix.gain.value=e)}disconnect(){var t;L(this,Fo)||(Et(this,Fo,!0),L(this,lr).call(this),L(this,Ji).call(this),(t=L(this,co))==null||t.forEach(e=>e.disconnect()),Et(this,co,void 0))}};Ro=new WeakMap;co=new WeakMap;ar=new WeakMap;lr=new WeakMap;Ji=new WeakMap;Bo=new WeakMap;Fo=new WeakMap;var fe,$h=class{constructor(t){this.compare=t,Ot(this,fe,[])}push(t){let e=L(this,fe).length,o=0,r=e-1,i=e;for(;o<=r;){let n=Math.floor((o+r)/2);this.compare(t,L(this,fe)[n])<0?(i=n,r=n-1):o=n+1}L(this,fe).splice(i,0,t)}pop(){return L(this,fe).shift()}peek(){return L(this,fe)[0]}removeAll(t){let e=L(this,fe).length;return Et(this,fe,L(this,fe).filter(o=>!t(o))),L(this,fe).length!==e}clear(){Et(this,fe,[])}size(){return L(this,fe).length}};fe=new WeakMap;function yc(t,e){return t&&e?o=>{t(o),e(o)}:t??e}function Dh(t){var e,o,r;let i={disableScheduler:(e=t.disableScheduler)!=null?e:!1,scheduleLookaheadMs:(o=t.scheduleLookaheadMs)!=null?o:200,scheduleIntervalMs:(r=t.scheduleIntervalMs)!=null?r:50,onStart:t.onStart,onEnded:t.onEnded};if(i.scheduleLookaheadMs<1)throw Error("scheduleLookaheadMs must be greater than 0");if(i.scheduleIntervalMs<1)throw Error("scheduleIntervalMs must be greater than 0");if(i.scheduleLookaheadMs<i.scheduleIntervalMs)throw Error("scheduleLookaheadMs must be greater than scheduleIntervalMs");return i}var Ze,ke,zo,xc=class{constructor(t,e={}){Ot(this,Ze),Ot(this,ke),Ot(this,zo),Et(this,Ze,Dh(e)),Et(this,ke,new $h((o,r)=>o.time-r.time)),this.player=t}get context(){return this.player.context}get buffers(){return this.player.buffers}get isRunning(){return L(this,zo)!==void 0}start(t){var e;if(L(this,Ze).disableScheduler)return this.player.start(t);let o=this.player.context,r=o.currentTime,i=(e=t.time)!=null?e:r,n=L(this,Ze).scheduleLookaheadMs/1e3;return t.onStart=yc(t.onStart,L(this,Ze).onStart),t.onEnded=yc(t.onEnded,L(this,Ze).onEnded),i<r+n?this.player.start(t):(L(this,ke).push(uo(De({},t),{time:i})),L(this,zo)||Et(this,zo,setInterval(()=>{let a=o.currentTime+n;for(;L(this,ke).size()&&L(this,ke).peek().time<=a;){let s=L(this,ke).pop();s&&this.player.start(s)}L(this,ke).size()||(clearInterval(L(this,zo)),Et(this,zo,void 0))},L(this,Ze).scheduleIntervalMs)),a=>{!a||a<i?L(this,ke).removeAll(s=>s===t)||this.player.stop(uo(De({},t),{time:a})):this.player.stop(uo(De({},t),{time:a}))})}stop(t){var e;if(L(this,Ze).disableScheduler)return this.player.stop(t);if(this.player.stop(t),!t){L(this,ke).clear();return}let o=(e=t?.time)!=null?e:0,r=t?.stopId;r?L(this,ke).removeAll(i=>i.time>=o&&i.stopId?i.stopId===r:i.note===r):L(this,ke).removeAll(i=>i.time>=o)}disconnect(){this.player.disconnect()}};Ze=new WeakMap;ke=new WeakMap;zo=new WeakMap;var Yr,cr,Qr,Sc=class{constructor(t,e){this.context=t,this.options=e,Ot(this,Yr),Ot(this,cr,!1),Ot(this,Qr);var o,r;Et(this,Yr,{velocityToGain:(o=e.velocityToGain)!=null?o:Es,destination:(r=e.destination)!=null?r:t.destination}),this.buffers={},Et(this,Qr,Th())}start(t){var e,o,r,i,n,a,s,l,u,m,c,f,h,g;if(L(this,cr))throw new Error("Can't start a sample on disconnected player");let b=this.context,w=t.name&&this.buffers[t.name]||this.buffers[t.note];if(!w)return()=>{};let _=b.createBufferSource();_.buffer=w;let x=(o=(e=t.detune)!=null?e:this.options.detune)!=null?o:0;_.detune?_.detune.value=x:_.playbackRate&&(_.playbackRate.value=Math.pow(2,x/1200));let E=(r=t.lpfCutoffHz)!=null?r:this.options.lpfCutoffHz,$=E?b.createBiquadFilter():void 0;E&&$&&($.type="lowpass",$.frequency.value=E);let O=b.createGain(),K=(n=(i=t.velocity)!=null?i:this.options.velocity)!=null?n:100;O.gain.value=L(this,Yr).velocityToGain(K),((a=t.loop)!=null?a:this.options.loop)&&(_.loop=!0,_.loopStart=(s=t.loopStart)!=null?s:0,_.loopEnd=(l=t.loopEnd)!=null?l:w.duration);let J=(u=t.decayTime)!=null?u:this.options.decayTime,[I,H]=Oh(b,J);function k(Q){if(Q??(Q=b.currentTime),Q<=Lt)_.stop(Q);else{let $t=H(Q);_.stop($t)}}let it=t.gainOffset?b.createGain():void 0;it&&t.gainOffset&&(it.gain.value=t.gainOffset);let pt=(m=t.stopId)!=null?m:t.note,tt=Mh([Qi([_,$,O,I,it,L(this,Yr).destination]),(c=t.stop)==null?void 0:c.call(t,k),L(this,Qr).subscribe(Q=>{(!Q||Q.stopId===void 0||Q.stopId===pt)&&k(Q?.time)})]);_.onended=()=>{var Q;tt(),(Q=t.onEnded)==null||Q.call(t,t)},(f=t.onStart)==null||f.call(t,t);let Lt=Math.max((h=t.time)!=null?h:0,b.currentTime);_.start(t.time);let xt=(g=t.duration)!=null?g:w.duration;return typeof t.duration=="number"&&k(Lt+xt),k}stop(t){L(this,Qr).trigger(t)}disconnect(){L(this,cr)||(Et(this,cr,!0),this.stop(),Object.keys(this.buffers).forEach(t=>{delete this.buffers[t]}))}get connected(){return!L(this,cr)}};Yr=new WeakMap;cr=new WeakMap;Qr=new WeakMap;function Oh(t,e=.2){let o=0,r=t.createGain();r.gain.value=1;function i(n){if(o)return o;r.gain.cancelScheduledValues(n);let a=n||t.currentTime;return o=a+e,r.gain.setValueAtTime(1,a),r.gain.linearRampToValueAtTime(0,o),o}return[r,i]}var Ec=class{constructor(t,e){this.context=t;let o=new kc(t,e);this.player=new xc(new Sc(t,uo(De({},e),{destination:o.input})),e),this.output=o}get buffers(){return this.player.buffers}start(t){return this.player.start(t)}stop(t){this.player.stop(typeof t=="object"?t:t!==void 0?{stopId:t}:void 0)}disconnect(){this.output.disconnect(),this.player.disconnect()}};function Cs(t,e,o){return jt(this,null,function*(){e=e.replace(/#/g,"%23").replace(/([^:]\/)\/+/g,"$1");let r=yield o.fetch(e);if(r.status===200)try{let i=yield r.arrayBuffer();return yield t.decodeAudioData(i)}catch{}})}function As(t){if(typeof document>"u")return null;let e=document.createElement("audio");for(let o=0;o<t.length;o++){let r=t[o],i=e.canPlayType(`audio/${r}`);if(i==="probably"||i==="maybe")return r;if(r==="m4a"){let n=e.canPlayType("audio/aac");if(n==="probably"||n==="maybe")return r}}return null}function Ih(){var t;return"."+((t=As(["ogg","m4a"]))!=null?t:"ogg")}var Ps={fetch(t){return fetch(t)}},dr,tn,Cc,Ac,Pc=class{constructor(t="smplr"){Ot(this,tn),Ot(this,dr),typeof window>"u"||!("caches"in window)?Et(this,dr,Promise.reject("CacheStorage not supported")):Et(this,dr,caches.open(t))}fetch(t){return jt(this,null,function*(){let e=new Request(t);try{return yield No(this,tn,Cc).call(this,e)}catch{let r=yield fetch(e);return yield No(this,tn,Ac).call(this,e,r),r}})}};dr=new WeakMap;tn=new WeakSet;Cc=function(t){return jt(this,null,function*(){let o=yield(yield L(this,dr)).match(t);if(o)return o;throw Error("Not found")})};Ac=function(t,e){return jt(this,null,function*(){try{yield(yield L(this,dr)).put(t,e.clone())}catch{}})};var Rh;Rh=new WeakMap;function Bh(t){let o=/^([a-gA-G]?)(#{1,}|b{1,}|)(-?\d+)$/.exec(t);if(!o)return;let r=o[1].toUpperCase();if(!r)return;let i=o[2],n=i[0]==="b"?-i.length:i.length,a=o[3]?+o[3]:4,s=(r.charCodeAt(0)+3)%7;return[0,2,4,5,7,9,11][s]+n+12*(a+1)}function hr(t){return t===void 0?void 0:typeof t=="number"?t:Bh(t)}function Fh(t,e,o,r){return jt(this,null,function*(){o.groups.forEach(i=>{let n=Hh(o,i);return Nh(t,e,n,r)})})}function zh(t,e){return jt(this,null,function*(){var o;let r=n=>"global"in n,i=n=>"websfzUrl"in n;if(typeof t=="string")return vc(t,e);if(r(t))return t;if(i(t)){let n=yield vc(t.websfzUrl,e);return(o=n.meta)!=null||(n.meta={}),t.name&&(n.meta.name=t.name),t.baseUrl&&(n.meta.baseUrl=t.baseUrl),t.formats&&(n.meta.formats=t.formats),n}else throw new Error("Invalid instrument: "+JSON.stringify(t))})}function Nh(t,e,o,r){return jt(this,null,function*(){yield Promise.all(Object.keys(o).map(i=>jt(this,null,function*(){if(e[i])return;let n=yield Cs(t,o[i],r);return n&&(e[i]=n),e})))})}function vc(t,e){return jt(this,null,function*(){try{return yield(yield fetch(t)).json()}catch{throw new Error(`Can't load SFZ file ${t}`)}})}function Hh(t,e){var o,r,i,n;let a={},s=(o=t.meta.baseUrl)!=null?o:"",l=(i=As((r=t.meta.formats)!=null?r:[]))!=null?i:"ogg",u=(n=t.global.default_path)!=null?n:"";return e?e.regions.reduce((m,c)=>(c.sample&&(m[c.sample]=`${s}/${u}${c.sample}.${l}`),m),a):a}function sr(t,e,o){let r=e===void 0||t!==void 0&&t>=e,i=o===void 0||t!==void 0&&t<=o;return r&&i}function Vh(t,e){let o=[];for(let r of t.groups)if(sr(e.midi,r.lokey,r.hikey)&&sr(e.velocity,r.lovel,r.hivel)&&sr(e.cc64,r.locc64,r.hicc64))for(let i of r.regions)sr(e.midi,i.lokey,i.hikey)&&sr(e.velocity,i.lovel,i.hivel)&&sr(e.cc64,r.locc64,r.hicc64)&&o.push([r,i]);return o}var Gh=Object.freeze({meta:{},global:{},groups:[]}),ur,ks,Tc,Uh=class{constructor(t,e){this.context=t,Ot(this,ks),Ot(this,ur),this.options=Object.freeze(Object.assign({volume:100,velocity:100,storage:Ps,detune:0,destination:t.destination},e)),this.player=new Ec(t,e),Et(this,ur,Gh),this.load=zh(e.instrument,this.options.storage).then(o=>(Et(this,ur,Object.freeze(o)),Fh(t,this.player.buffers,L(this,ur),this.options.storage))).then(()=>this)}get output(){return this.player.output}loaded(){return jt(this,null,function*(){return this.load})}start(t){No(this,ks,Tc).call(this,typeof t=="object"?t:{note:t})}stop(t){this.player.stop(t)}disconnect(){this.player.disconnect()}};ur=new WeakMap;ks=new WeakSet;Tc=function(t){var e;let o=hr(t.note);if(o===void 0)return()=>{};let r=(e=t.velocity)!=null?e:this.options.velocity,i=Vh(L(this,ur),{midi:o,velocity:r}),n=()=>{var s;(s=t.onEnded)==null||s.call(t,t)},a=i.map(([s,l])=>{var u,m,c;let f=(m=(u=l.pitch_keycenter)!=null?u:l.key)!=null?m:o,h=(o-f)*100;return this.player.start(uo(De({},t),{note:l.sample,decayTime:t.decayTime,detune:h+((c=t.detune)!=null?c:this.options.detune),onEnded:n,stopId:o}))});switch(a.length){case 0:return()=>{};case 1:return a[0];default:return s=>a.forEach(l=>l(s))}};function Kh(t,e){let o=t.createGain(),r=t.createGain();o.channelCount=2,o.channelCountMode="explicit";let i=t.createChannelSplitter(2),n=t.createGain(),a=t.createGain(),s=t.createChannelMerger(2),l=t.createOscillator();l.type="sine",l.frequency.value=1,l.start();let u=t.createGain(),m=t.createOscillator();m.type="sine",m.frequency.value=1.1,m.start();let c=t.createGain();o.connect(i),i.connect(n,0),i.connect(a,1),n.connect(s,0,0),a.connect(s,0,1),l.connect(u),u.connect(n.gain),m.connect(c),c.connect(a.gain),s.connect(r);let f=e(h=>{u.gain.value=h,c.gain.value=h});return o.disconnect=()=>{f(),l.stop(),m.stop(),o.disconnect(i),i.disconnect(n,0),i.disconnect(a,1),n.disconnect(s,0,0),a.disconnect(s,0,1),l.disconnect(n),m.disconnect(a),s.disconnect(r)},{input:o,output:r}}var jh={CP80:"https://danigb.github.io/samples/gs-e-pianos/CP80/cp80.websfz.json",PianetT:"https://danigb.github.io/samples/gs-e-pianos/Pianet T/pianet-t.websfz.json",WurlitzerEP200:"https://danigb.github.io/samples/gs-e-pianos/Wurlitzer EP200/wurlitzer-ep200.websfz.json",TX81Z:"https://danigb.github.io/samples/vcsl/TX81Z/tx81z-fm-piano.websfz.json"},nn=class extends Uh{constructor(t,e){var o;super(t,uo(De({},e),{instrument:(o=jh[e.instrument])!=null?o:e.instrument}));let r=wc(0);this.tremolo={level:n=>r.set(Es(n))};let i=Kh(t,r.subscribe);this.output.addInsert(i)}};function Wh(t={}){return{groups:[],options:t}}function qh(){return{regions:[]}}function Zh(t,e,o,r){let i=[],n=hr(e.note);if(n===void 0)return i;for(let a of t.regions){let s=Xh(n,o??0,e,a,r);s&&i.push(s)}return i}function Xh(t,e,o,r,i){var n,a,s,l,u,m,c,f,h,g,b,w,_,x,E,$,O,K,G,J,I,H,k,it,pt,tt,Lt,xt;if(!(t>=((n=r.midiLow)!=null?n:0)&&t<((a=r.midiHigh)!=null?a:127)+1)||!(o.velocity===void 0||o.velocity>=((s=r.velLow)!=null?s:0)&&o.velocity<=((l=r.velHigh)!=null?l:127)))return;if(r.seqLength){let St=e%r.seqLength,wt=((u=r.seqPosition)!=null?u:1)-1;if(St!==wt)return}let Rt=t-r.midiPitch,Vt=(m=o.velocity)!=null?m:i?.velocity,et=r.volume?Lh(r.volume):0,Ct=(f=(c=o.gainOffset)!=null?c:i?.gainOffset)!=null?f:0,ft=(h=o.detune)!=null?h:0;return{decayTime:(w=(b=o?.decayTime)!=null?b:(g=r.sample)==null?void 0:g.decayTime)!=null?w:i?.decayTime,detune:100*(Rt+((_=r.tune)!=null?_:0))+ft,duration:($=(E=o?.duration)!=null?E:(x=r.sample)==null?void 0:x.duration)!=null?$:i?.duration,gainOffset:Ct+et||void 0,loop:(G=(K=o?.loop)!=null?K:(O=r.sample)==null?void 0:O.loop)!=null?G:i?.loop,loopEnd:(H=(I=o?.loopEnd)!=null?I:(J=r.sample)==null?void 0:J.loopEnd)!=null?H:i?.loopEnd,loopStart:(pt=(it=o?.loopStart)!=null?it:(k=r.sample)==null?void 0:k.loopStart)!=null?pt:i?.loopStart,lpfCutoffHz:(xt=(Lt=o?.lpfCutoffHz)!=null?Lt:(tt=r.sample)==null?void 0:tt.lpfCutoffHz)!=null?xt:i?.lpfCutoffHz,name:r.sampleName,note:t,onEnded:o.onEnded,onStart:o.onStart,stopId:o.name,time:o.time,velocity:Vt??void 0}}var Mc=class{constructor(t,e){this.context=t,this.seqNum=0;let o=new kc(t,e);this.instrument=Wh(e),this.player=new xc(new Sc(t,uo(De({},e),{destination:o.input})),e),this.output=o}get buffers(){return this.player.buffers}start(t){let e=[],o=typeof t=="object"?t:{note:t};for(let r of this.instrument.groups){let i=Zh(r,o,this.seqNum);this.seqNum++;for(let n of i){let a=this.player.start(n);e.push(a)}}return r=>e.forEach(i=>i(r))}stop(t){if(t==null){this.player.stop();return}let e=typeof t=="object"?t:{stopId:t},o=hr(e.stopId);o&&(e.stopId=o,this.player.stop(e))}disconnect(){this.output.disconnect(),this.player.disconnect()}};function Yh(t,e){let o=Ih();return(r,i)=>jt(this,null,function*(){let n=yield fetch(t).then(l=>l.text());Qh(n,e.group).length;let s=new Set;return e.group.regions.forEach(l=>s.add(l.sampleName)),Promise.all(Array.from(s).map(l=>jt(this,null,function*(){let u=e.urlFromSampleName(l,o),m=yield Cs(r,u,i);e.buffers[l]=m}))).then(()=>e.group)})}function Qh(t,e){let o="global",r=t.split(`
`).map(rp).filter(s=>!!s),i=new ip,n=[];for(let s of r)switch(s.type){case"mode":n.push(i.closeScope(o,e)),o=s.value;break;case"prop:num":case"prop:str":case"prop:num_arr":i.push(s.key,s.value);break;case"unknown":break}return n.filter(s=>!!s);function a(s,l,u){}}var Jh=/^<([^>]+)>$/,tp=/^([^=]+)=([-\.\d]+)$/,ep=/^([^=]+)=(.+)$/,op=/^([^=]+)_(\d+)=(\d+)$/;function rp(t){if(t=t.trim(),t===""||t.startsWith("//"))return;let e=t.match(Jh);if(e)return{type:"mode",value:e[1]};let o=t.match(op);if(o)return{type:"prop:num_arr",key:o[1],value:[Number(o[2]),Number(o[3])]};let r=t.match(tp);if(r)return{type:"prop:num",key:r[1],value:Number(r[2])};let i=t.match(ep);return i?{type:"prop:str",key:i[1],value:i[2]}:{type:"unknown",value:t}}var Jr,en,ip=class{constructor(){Ot(this,Jr),this.values={},this.global={},this.group={}}closeScope(t,e){if(t==="global")No(this,Jr,en).call(this,this.global);else if(t==="group")this.group=No(this,Jr,en).call(this,{});else if(t==="region"){let o=No(this,Jr,en).call(this,De(De({sampleName:"",midiPitch:-1},this.global),this.group));if(o.sampleName==="")return"Missing sample name";if(o.midiPitch===-1)if(o.midiLow!==void 0)o.midiPitch=o.midiLow;else return"Missing pitch_keycenter";o.seqLength&&o.seqPosition===void 0&&(o.seqPosition=1),o.ampRelease&&(o.sample={decayTime:o.ampRelease},delete o.ampRelease),e.regions.push(o)}}get empty(){return Object.keys(this.values).length===0}get keys(){return Object.keys(this.values)}push(t,e){this.values[t]=e}popNum(t,e,o){return typeof this.values[t]!="number"?!1:(e[o]=this.values[t],delete this.values[t],!0)}popStr(t,e,o){return typeof this.values[t]!="string"?!1:(e[o]=this.values[t],delete this.values[t],!0)}popNumArr(t,e,o){return Array.isArray(this.values[t])?(e[o]=this.values[t],delete this.values[t],!0):!1}};Jr=new WeakSet;en=function(t){return this.popStr("sample",t,"sampleName"),this.popNum("pitch_keycenter",t,"midiPitch"),this.popNum("ampeg_attack",t,"ampAttack"),this.popNum("ampeg_release",t,"ampRelease"),this.popNum("bend_down",t,"bendDown"),this.popNum("bend_up",t,"bendUp"),this.popNum("group",t,"group"),this.popNum("hikey",t,"midiHigh"),this.popNum("hivel",t,"velHigh"),this.popNum("lokey",t,"midiLow"),this.popNum("offset",t,"offset"),this.popNum("lovel",t,"velLow"),this.popNum("off_by",t,"groupOffBy"),this.popNum("pitch_keytrack",t,"ignore"),this.popNum("seq_length",t,"seqLength"),this.popNum("seq_position",t,"seqPosition"),this.popNum("tune",t,"tune"),this.popNum("volume",t,"volume"),this.popNumArr("amp_velcurve",t,"ampVelCurve"),this.values={},t};var np="https://smpldsnds.github.io/sgossner-vcsl/";function sp(t){return np+t+".sfz"}function ap(t,e){let o=sp(t),i=`https://smpldsnds.github.io/sgossner-vcsl/${t.slice(0,t.lastIndexOf("/")+1)}`,n=qh();return Yh(o,{buffers:e,group:n,urlFromSampleName:(a,s)=>i+"/"+a.replace(".wav",s)})}var Lc=class{constructor(t,e={}){var o,r;this.config={instrument:(o=e.instrument)!=null?o:"Arco",storage:(r=e.storage)!=null?r:Ps},this.player=new Mc(t,e);let i=ap(this.config.instrument,this.player.buffers);this.load=i(t,this.config.storage).then(n=>(this.player.instrument.groups.push(n),this))}get output(){return this.player.output}get buffers(){return this.player.buffers}get context(){return this.player.context}start(t){return this.player.start(t)}stop(t){return this.player.stop(t)}disconnect(){this.player.disconnect()}};var lp,cp,up;lp=new WeakMap;cp=new WeakMap;up=new WeakMap;var dp;dp=new WeakMap;var hp;hp=new WeakMap;var on,sn=class{constructor(t,e){this.context=t,this.options=e,Ot(this,on,[]),this.player=new Mc(t,e),this.load=fp(e).then(o=>{this.soundfont=o,Et(this,on,o.instruments.map(r=>r.header.name))}).then(()=>this)}get instrumentNames(){return L(this,on)}loadInstrument(t){var e,o,r;let i=(e=this.soundfont)==null?void 0:e.instruments.find(l=>l.header.name===t);if(!i)return;let n=this.player.buffers,a={regions:[]};for(let l of i.zones){let u=l.sample,m=u.header,c=pp(this.context,u),f={sampleName:u.header.name,midiPitch:u.header.originalPitch,midiLow:(o=l.keyRange)==null?void 0:o.lo,midiHigh:(r=l.keyRange)==null?void 0:r.hi,sample:{loop:m.startLoop>=0&&m.endLoop>m.startLoop,loopStart:m.startLoop/m.sampleRate,loopEnd:m.endLoop/m.sampleRate}};a.regions.push(f),n[f.sampleName]=c}let s={groups:[a],options:this.options};return this.player.instrument=s,[s,n]}get output(){return this.player.output}start(t){return this.player.start(t)}stop(t){return this.player.stop(t)}disconnect(){this.player.disconnect()}};on=new WeakMap;function pp(t,e){let{header:o,data:r}=e,i=new Float32Array(r.length);for(let s=0;s<r.length;s++)i[s]=r[s]/32768;let n=t.createBuffer(1,i.length,o.sampleRate);return n.getChannelData(0).set(i),n}function fp(t){return jt(this,null,function*(){let e=yield fetch(t.url).then(r=>r.arrayBuffer()),o=new Uint8Array(e);return t.createSoundfont(o)})}var mp="https://danigb.github.io/samples/splendid-grand-piano",xs,$c,Dc=class{constructor(t,e){this.context=t,Ot(this,xs),this.options=Object.assign({baseUrl:mp,storage:Ps,detune:0,volume:100,velocity:100,decayTime:.5},e),this.player=new Ec(t,this.options);let o=bp(this.options.baseUrl,this.options.storage,this.options.notesToLoad);this.load=o(t,this.player.buffers).then(()=>this)}get output(){return this.player.output}get buffers(){return this.player.buffers}loaded(){return jt(this,null,function*(){return this.load})}start(t){var e,o;let r=typeof t=="object"?De({},t):{note:t},i=No(this,xs,$c).call(this,r);return i?(r.note=i[0],r.stopId=(e=r.stopId)!=null?e:i[1],r.detune=i[2]+((o=r.detune)!=null?o:this.options.detune),this.player.start(r)):()=>{}}stop(t){var e;if(typeof t=="string")return this.player.stop((e=hr(t))!=null?e:t);if(typeof t=="object"){let o=hr(t.stopId);return this.player.stop(o!==void 0?uo(De({},t),{stopId:o}):t)}else return this.player.stop(t)}};xs=new WeakSet;$c=function(t){var e;let o=hr(t.note);if(!o)return;let r=(e=t.velocity)!=null?e:this.options.velocity,i=rn.findIndex(a=>r>=a.vel_range[0]&&r<=a.vel_range[1]),n=rn[i];if(n)return gp(n.name,o,this.player.buffers)};function gp(t,e,o){let r=0;for(;o[t+(e+r)]===void 0&&r<128;)r>0?r=-r:r=-r+1;return r===127?[t+e,e,0]:[t+(e+r),e,-r*100]}function bp(t,e,o){var r;let i=(r=As(["ogg","m4a"]))!=null?r:"ogg",n=o?rn.filter(a=>a.vel_range[0]<=o.velocityRange[1]&&a.vel_range[1]>=o.velocityRange[0]):rn;return(a,s)=>jt(this,null,function*(){for(let l of n){let u=o?l.samples.filter(m=>o.notes.includes(m[0])):l.samples;yield Promise.all(u.map(m=>jt(this,[m],function*([c,f]){let h=`${t}/${f}.${i}`,g=yield Cs(a,h,e);g&&(s[l.name+c]=g)})))}})}var rn=[{name:"PPP",vel_range:[1,40],cutoff:1e3,samples:[[23,"PP-B-1"],[27,"PP-D#0"],[29,"PP-F0"],[31,"PP-G0"],[33,"PP-A0"],[35,"PP-B0"],[37,"PP-C#1"],[38,"PP-D1"],[40,"PP-E1"],[41,"PP-F1"],[43,"PP-G1"],[45,"PP-A1"],[47,"PP-B1"],[48,"PP-C2"],[50,"PP-D2"],[52,"PP-E2"],[53,"PP-F2"],[55,"PP-G2"],[56,"PP-G#2"],[57,"PP-A2"],[58,"PP-A#2"],[59,"PP-B2"],[60,"PP-C3"],[62,"PP-D3"],[64,"PP-E3"],[65,"PP-F3"],[67,"PP-G3"],[69,"PP-A3"],[71,"PP-B3"],[72,"PP-C4"],[74,"PP-D4"],[76,"PP-E4"],[77,"PP-F4"],[79,"PP-G4"],[80,"PP-G#4"],[81,"PP-A4"],[82,"PP-A#4"],[83,"PP-B4"],[85,"PP-C#5"],[86,"PP-D5"],[87,"PP-D#5"],[89,"PP-F5"],[90,"PP-F#5"],[91,"PP-G5"],[92,"PP-G#5"],[93,"PP-A5"],[94,"PP-A#5"],[95,"PP-B5"],[96,"PP-C6"],[97,"PP-C#6"],[98,"PP-D6"],[99,"PP-D#6"],[100,"PP-E6"],[101,"PP-F6"],[102,"PP-F#6"],[103,"PP-G6"],[104,"PP-G#6"],[105,"PP-A6"],[106,"PP-A#6"],[107,"PP-B6"],[108,"PP-C7"]]},{name:"PP",vel_range:[41,67],samples:[[23,"PP-B-1"],[27,"PP-D#0"],[29,"PP-F0"],[31,"PP-G0"],[33,"PP-A0"],[35,"PP-B0"],[37,"PP-C#1"],[38,"PP-D1"],[40,"PP-E1"],[41,"PP-F1"],[43,"PP-G1"],[45,"PP-A1"],[47,"PP-B1"],[48,"PP-C2"],[50,"PP-D2"],[52,"PP-E2"],[53,"PP-F2"],[55,"PP-G2"],[56,"PP-G#2"],[57,"PP-A2"],[58,"PP-A#2"],[59,"PP-B2"],[60,"PP-C3"],[62,"PP-D3"],[64,"PP-E3"],[65,"PP-F3"],[67,"PP-G3"],[69,"PP-A3"],[71,"PP-B3"],[72,"PP-C4"],[74,"PP-D4"],[76,"PP-E4"],[77,"PP-F4"],[79,"PP-G4"],[80,"PP-G#4"],[81,"PP-A4"],[82,"PP-A#4"],[83,"PP-B4"],[85,"PP-C#5"],[86,"PP-D5"],[87,"PP-D#5"],[89,"PP-F5"],[90,"PP-F#5"],[91,"PP-G5"],[92,"PP-G#5"],[93,"PP-A5"],[94,"PP-A#5"],[95,"PP-B5"],[96,"PP-C6"],[97,"PP-C#6"],[98,"PP-D6"],[99,"PP-D#6"],[100,"PP-E6"],[101,"PP-F6"],[102,"PP-F#6"],[103,"PP-G6"],[104,"PP-G#6"],[105,"PP-A6"],[106,"PP-A#6"],[107,"PP-B6"],[108,"PP-C7"]]},{name:"MP",vel_range:[68,84],samples:[[23,"Mp-B-1"],[27,"Mp-D#0"],[29,"Mp-F0"],[31,"Mp-G0"],[33,"Mp-A0"],[35,"Mp-B0"],[37,"Mp-C#1"],[38,"Mp-D1"],[40,"Mp-E1"],[41,"Mp-F1"],[43,"Mp-G1"],[45,"Mp-A1"],[47,"Mp-B1"],[48,"Mp-C2"],[50,"Mp-D2"],[52,"Mp-E2"],[53,"Mp-F2"],[55,"Mp-G2"],[56,"Mp-G#2"],[57,"Mp-A2"],[58,"Mp-A#2"],[59,"Mp-B2"],[60,"Mp-C3"],[62,"Mp-D3"],[64,"Mp-E3"],[65,"Mp-F3"],[67,"Mp-G3"],[69,"Mp-A3"],[71,"Mp-B3"],[72,"Mp-C4"],[74,"Mp-D4"],[76,"Mp-E4"],[77,"Mp-F4"],[79,"Mp-G4"],[80,"Mp-G#4"],[81,"Mp-A4"],[82,"Mp-A#4"],[83,"Mp-B4"],[85,"Mp-C#5"],[86,"Mp-D5"],[87,"Mp-D#5"],[88,"Mp-E5"],[89,"Mp-F5"],[90,"Mp-F#5"],[91,"Mp-G5"],[92,"Mp-G#5"],[93,"Mp-A5"],[94,"Mp-A#5"],[95,"Mp-B5"],[96,"Mp-C6"],[97,"Mp-C#6"],[98,"Mp-D6"],[99,"Mp-D#6"],[100,"PP-E6"],[101,"Mp-F6"],[102,"Mp-F#6"],[103,"Mp-G6"],[104,"Mp-G#6"],[105,"Mp-A6"],[106,"Mp-A#6"],[107,"PP-B6"],[108,"PP-C7"]]},{name:"MF",vel_range:[85,100],samples:[[23,"Mf-B-1"],[27,"Mf-D#0"],[29,"Mf-F0"],[31,"Mf-G0"],[33,"Mf-A0"],[35,"Mf-B0"],[37,"Mf-C#1"],[38,"Mf-D1"],[40,"Mf-E1"],[41,"Mf-F1"],[43,"Mf-G1"],[45,"Mf-A1"],[47,"Mf-B1"],[48,"Mf-C2"],[50,"Mf-D2"],[52,"Mf-E2"],[53,"Mf-F2"],[55,"Mf-G2"],[56,"Mf-G#2"],[57,"Mf-A2"],[58,"Mf-A#2"],[59,"Mf-B2"],[60,"Mf-C3"],[62,"Mf-D3"],[64,"Mf-E3"],[65,"Mf-F3"],[67,"Mf-G3"],[69,"Mf-A3"],[71,"Mf-B3"],[72,"Mf-C4"],[74,"Mf-D4"],[76,"Mf-E4"],[77,"Mf-F4"],[79,"Mf-G4"],[80,"Mf-G#4"],[81,"Mf-A4"],[82,"Mf-A#4"],[83,"Mf-B4"],[85,"Mf-C#5"],[86,"Mf-D5"],[87,"Mf-D#5"],[88,"Mf-E5"],[89,"Mf-F5"],[90,"Mf-F#5"],[91,"Mf-G5"],[92,"Mf-G#5"],[93,"Mf-A5"],[94,"Mf-A#5"],[95,"Mf-B5"],[96,"Mf-C6"],[97,"Mf-C#6"],[98,"Mf-D6"],[99,"Mf-D#6"],[100,"Mf-E6"],[101,"Mf-F6"],[102,"Mf-F#6"],[103,"Mf-G6"],[104,"Mf-G#6"],[105,"Mf-A6"],[106,"Mf-A#6"],[107,"Mf-B6"],[108,"PP-C7"]]},{name:"FF",vel_range:[101,127],samples:[[23,"FF-B-1"],[27,"FF-D#0"],[29,"FF-F0"],[31,"FF-G0"],[33,"FF-A0"],[35,"FF-B0"],[37,"FF-C#1"],[38,"FF-D1"],[40,"FF-E1"],[41,"FF-F1"],[43,"FF-G1"],[45,"FF-A1"],[47,"FF-B1"],[48,"FF-C2"],[50,"FF-D2"],[52,"FF-E2"],[53,"FF-F2"],[55,"FF-G2"],[56,"FF-G#2"],[57,"FF-A2"],[58,"FF-A#2"],[59,"FF-B2"],[60,"FF-C3"],[62,"FF-D3"],[64,"FF-E3"],[65,"FF-F3"],[67,"FF-G3"],[69,"FF-A3"],[71,"FF-B3"],[72,"FF-C4"],[74,"FF-D4"],[76,"FF-E4"],[77,"FF-F4"],[79,"FF-G4"],[80,"FF-G#4"],[81,"FF-A4"],[82,"FF-A#4"],[83,"FF-B4"],[85,"FF-C#5"],[86,"FF-D5"],[88,"FF-E5"],[89,"FF-F5"],[91,"FF-G5"],[93,"FF-A5"],[95,"Mf-B5"],[96,"Mf-C6"],[97,"Mf-C#6"],[98,"Mf-D6"],[99,"Mf-D#6"],[100,"Mf-E6"],[102,"Mf-F#6"],[103,"Mf-G6"],[104,"Mf-G#6"],[105,"Mf-A6"],[106,"Mf-A#6"],[107,"Mf-B6"],[108,"Mf-C7"]]}];var ti=Yu(Oc(),1),ln=null,Ms=class{loaded=!1;name="";default_vel=100;load(e,o,r){}unload(){}play(e,o=this.default_vel){}stop(e){}stopAll(){}},cn=class extends Ms{player=null;sfCreator=()=>{};instruments={apiano:{loader:Dc,options:{volume:90}},epiano1:{loader:nn,options:{instrument:"TX81Z",volume:127}},epiano2:{loader:nn,options:{instrument:"WurlitzerEP200",volume:70}},epiano3:{loader:nn,options:{instrument:"CP80",volume:70}},harpsi:{loader:Lc,options:{instrument:"Chordophones/Zithers/Harpsichord, Unk",volume:100}},organ1:{loader:sn,options:{createSoundfont:e=>new ti.SoundFont2(e),url:"assets/sf/organ.sf2",patch:"b3slow",volume:70}},organ2:{loader:sn,options:{createSoundfont:e=>new ti.SoundFont2(e),url:"assets/sf/organ.sf2",patch:"b3fast",volume:70}},organ3:{loader:sn,options:{createSoundfont:e=>new ti.SoundFont2(e),url:"assets/sf/organ.sf2",patch:"percorg",volume:60}}};cache=new Pc("sound_v1");play(e,o=this.default_vel){this.name=="epiano1"?e+=12:(this.name=="harpsi"||this.name.startsWith("organ"))&&(o=127),this.player?.start({note:e,velocity:o})}stop(e){this.name=="epiano1"&&(e+=12),this.player?.stop(e)}stopAll(){this.player?.stop()}unload(){this.stopAll(),this.player=null,this.name="",this.loaded=!1}load(e,o=null,r=null){if(this.stopAll(),!e)this.unload(),o("");else{if(!Object.hasOwn(this.instruments,e)){r(`Instrument ${e} not found.`);return}ln||(ln=new AudioContext);let i=this.instruments[e];i.storage=this.cache,this.loaded=!1,this.name=e,this.player=new i.loader(ln,i.options),this.player.load.then(()=>{Object.hasOwn(i.options,"patch")&&this.player.loadInstrument(i.options.patch),this.loaded=!0,ln.resume(),o(e)},n=>{this.player=null,this.name="",r(n)})}}};var vt={player:new cn,led:null,fail_alert:document.getElementById("alert-sound-connection-fail"),get type(){return this.player.name},get loaded(){return this.player.loaded},get loading(){return this.type&&!this.loaded},play(t,e=100){this.player.play(t+d.transpose,e)},stop(t,e){(e||!yp(t)&&!(this.type=="apiano"&&t+d.transpose>88))&&this.player.stop(t+d.transpose)},stopAll(t){if(t)this.player.stopAll();else for(let e=0;e<128;e++)this.stop(e,!1)},load(t){if(!t)this.player.unload(),this.led=0;else{this.led=1;let e=setInterval(()=>{this.led=this.led==0?1:0,It()},400),o=r=>{clearInterval(e),this.led=r?2:0,It(),un()};this.player.load(t,()=>{o(!0),nt(this.type)},r=>{o(!1),this.fail_alert.children[1].innerText=`Reason: ${r}`,this.fail_alert.toast()})}It(),un()}};function yp(t){return st.isNoteOn(t,"both")||Io.isNoteSustained(t)}function ei(){vt.stopAll(!0),vr.reset(),Y.reset(),Io.resetState(),Xe(),ho(),Ic()}function Wt(t={}){let e=d.transpose;if(t.reset&&(d.semitones=0,d.octaves=0),t.set)Object.hasOwn(t,"octaves")&&(d.octaves=Be(t.octaves,-2,2)),Object.hasOwn(t,"semitones")&&(d.semitones=Be(t.semitones,-11,11));else if(Object.hasOwn(t,"octaves")&&(d.octaves=Be(d.octaves+t.octaves,-2,2)),Object.hasOwn(t,"semitones")){for(d.semitones=d.semitones+t.semitones;d.semitones>11&&d.octaves<2;)d.octaves+=1,d.semitones-=12;for(;d.semitones<-11&&d.octaves>-2;)d.octaves-=1,d.semitones+=12;d.semitones=Be(d.semitones,-11,11)}e!=d.transpose&&vt.stopAll(!0),$s(),Mt(),Ls()}var pr=null;function Ho(){return!!pr}function po(){return pr==="label"}function fo(){return pr==="sticker"}function Ye(t){d.labels.type=t,Vo(),Mt(),nt()}function dn(t){pr=t||null,mo(),It()}function fr(t=void 0){t===void 0&&(t=pr!="label"),dn(t?"label":null),Vo()}function ze(t=void 0,e=d.stickers.color){t===void 0&&(t=pr!="sticker"||e!=d.stickers.color),d.stickers.color=e,dn(t?"sticker":null),gn()}function hn(){d.stickers.keys.clear(),Mt(),gn(),nt()}function pn(){d.labels.keys.clear(),Mt(),Vo(),nt()}function fn(t=void 0){d.labels.played=t===void 0?!d.labels.played:t,Vo(),Mt(),nt()}function mn(t=void 0){d.labels.octave=t===void 0?!d.labels.octave:t,Vo(),Mt(),nt()}var ee={en_main:["C","C\u266F","D","D\u266F","E","F","F\u266F","G","G\u266F","A","A\u266F","B"],en_alt:[,"D\u266D",,"E\u266D",,,"G\u266D",,"A\u266D",,"B\u266D"],en_oct:["\u208B\u2081","\u2080","\u2081","\u2082","\u2083","\u2084","\u2085","\u2086","\u2087","\u2088","\u2089"],ge_main:["C","Ces","D","Des","E","F","Fes","G","Ges","A","Aes","H"],ge_alt:[,"Dis",,"Eis",,,"Gis",,"Ais",,"B"],it_main:["do","do\u266F","re","re\u266F","mi","fa","fa\u266F","sol","sol\u266F","la","la\u266F","si"],it_alt:[,"re\u266D",,"mi\u266D",,,"sol\u266D",,"la\u266D",,"si\u266D"],it_oct_sup:["\u207B\xB2","\u207B\xB9","\xB9","\xB2","\xB3","\u2074","\u2075","\u2076","\u2077","\u2078","\u2079","\xB9\u2070"],it_oct_sub:["\u208B\u2082","\u208B\u2081","\u2081","\u2082","\u2083","\u2084","\u2085","\u2086","\u2087","\u2088","\u2089","\u2081\u2080"]};function Rc(t){let e=t%12,o=Math.trunc(t/12),r=d.labels.octave?ee.en_oct[o]:"";return qe(e)?`${ee.en_main[e]}${r}`:`${ee.en_alt[e]}
${ee.en_main[e]}
${r}`}function Bc(t){let e=t%12,o=Math.trunc(t/12);if(o>=4){let r=d.labels.octave?"\u2019".repeat(o-4):"";return qe(e)?`${ee.ge_main[e].toLowerCase()}${r}`:`${ee.ge_alt[e].toLowerCase()}
${ee.ge_main[e].toLowerCase()}`}else{let r=d.labels.octave?",".repeat(Math.abs(o-3)):"";return qe(e)?`${ee.ge_main[e]}${r}`:`${ee.ge_alt[e]}
${ee.ge_main[e]}`}}function Fc(t){let e=t%12,o=Math.trunc(t/12),r=d.labels.octave?qe(e)?ee.it_oct_sup[o-1]:ee.it_oct_sub[o-1]:"";return qe(e)?`${ee.it_main[e]}${r}`:`${ee.it_alt[e]}
${ee.it_main[e]}
${r}`}function zc(t){let e=Zs(Y.enabled?t+d.transpose:t);return`${e.toFixed(e<1e3?1:0)}`}function Nc(){window.addEventListener("keydown",vp)}function vp(t){if(t.repeat)return;if(t.key=="Alt"){let i=Ds();i&&(i.hide(),i.querySelector("sl-button[slot=trigger]").blur())}let e=new Map([["f2",fr],["f3",ze],["f9",ri],["escape",()=>{let i=Ds();i?(i.hide(),i.querySelector("sl-button[slot=trigger]").blur()):Ho()?dn(null):ei()}],["pageup",()=>Wt({semitones:1})],["pagedown",()=>Wt({semitones:-1})],["shift+pageup",()=>Wt({octaves:1})],["shift+pagedown",()=>Wt({octaves:-1})]]),o=[];t.ctrlKey&&o.push("ctrl"),t.altKey&&o.push("alt"),t.shiftKey&&o.push("shift"),o.push(t.key.toLowerCase());let r=o.join("+");e.has(r)&&(t.preventDefault(),e.get(r)())}var xe=null;function Hc(){xe=new Yi(document.getElementById("keyboard-navigator"),bn()),xe.onmenuenter=t=>{ht.setWatchdog(t=="Control"?oi:Go),xe.replaceStructure(bn())},xe.onoptionenter=()=>xe.replaceStructure(bn()),xe.onshow=()=>ht.setWatchdog(oi),xe.onhide=()=>ht.setWatchdog(Go)}function Vc(){xe.show()}function Gc(){xe.hide()}function Os(){xe?.replaceStructure(bn())}function Uc(){return xe?.visible??!1}function Kc(t){xe?.container.toggleAttribute("position-top",t)}function bn(){let t=()=>{let i=ht.ports.map(n=>[n.name,()=>mr(n.name,!0),{checked:d.device_name==n.name}]);return i.push(["Computer keyboard",()=>mr("pckbd",!0),{checked:d.pc_keyboard_connected}]),i.push(["Touch or mouse",()=>mr("touch",!0),{checked:Y.enabled}]),i},e=()=>{if(!d.transpose)return"not transposed";let i=`${d.semitones} semitone${d.semitones!=1?"s":""}`,n=`${d.octaves} octave${d.octaves!=1?"s":""}`;return`${i}, ${n}`},o=()=>d.height_factor==1?"Full":d.height_factor==.5?"1/2":"3/4",r=fo();return[["",[["&Control",t()],["&Transpose",[["[\u2191] Semitone up",()=>Wt({semitones:1}),{noindex:!0,key:"arrowup"}],["[\u2193] Semitone down",()=>Wt({semitones:-1}),{noindex:!0,key:"arrowdown"}],["[\u2192] Octave up",()=>Wt({octaves:1}),{noindex:!0,key:"arrowright"}],["[\u2190] Octave down",()=>Wt({octaves:-1}),{noindex:!0,key:"arrowleft"}],["&Reset",()=>Wt({reset:!0}),{noindex:!0}],[`State: ${e()}`,null]]],["&Size",[["&88 keys",()=>go(88),{noindex:!0,checked:d.number_of_keys==88}],["&61 keys",()=>go(61),{noindex:!0,checked:d.number_of_keys==61}],["&49 keys",()=>go(49),{noindex:!0,checked:d.number_of_keys==49}],["&37 keys",()=>go(37),{noindex:!0,checked:d.number_of_keys==37}],["&25 keys",()=>go(25),{noindex:!0,checked:d.number_of_keys==25}],[`Change key &depth (current: ${o()})`,()=>jc(),{noindex:!0}]]],["&Pedals",[["&Follow pedals",()=>Wc(),{checked:d.pedals}],["&Dim pedalized notes",()=>qc(),{checked:d.pedal_dim}]]],["&Labels",[["&Toggle Labeling mode (F2)",()=>fr(),{checked:po()}],["&Format",[["&English",()=>Ye("english"),{checked:d.labels.type=="english"}],["&German",()=>Ye("german"),{checked:d.labels.type=="german"}],["&Italian",()=>Ye("italian"),{checked:d.labels.type=="italian"}],["&Pitch-class",()=>Ye("pc"),{checked:d.labels.type=="pc"}],["&MIDI value",()=>Ye("midi"),{checked:d.labels.type=="midi"}],["&Frequency",()=>Ye("freq"),{checked:d.labels.type=="freq"}],["Show &octave",()=>mn(),{checked:d.labels.octave}]]],["&Show on played keys",()=>fn(),{checked:d.labels.played}],["&Clear",()=>pn()]]],["Stic&kers",[["&Red",()=>ze(void 0,"red"),{checked:r&&d.stickers.color=="red"}],["&Yellow",()=>ze(void 0,"yellow"),{checked:r&&d.stickers.color=="yellow"}],["&Green",()=>ze(void 0,"green"),{checked:r&&d.stickers.color=="green"}],["&Blue",()=>ze(void 0,"blue"),{checked:r&&d.stickers.color=="blue"}],["&Violet",()=>ze(void 0,"violet"),{checked:r&&d.stickers.color=="violet"}],["&Clear",()=>hn()]]],["Panic!",ei],[`${d.toolbar?"Hide":"Show"} toolbar [<u>F9</u>]`,ri,{key:"f9"}]]]]}var M={svg:document.querySelector("svg#piano"),container:document.getElementById("main-area"),first_key:null,last_key:null,keys:Array(128).fill(null),labels:Array(128).fill(null),marking_groups:Array(128).fill(null),loaded:!1,resize:{timeout:null,observer:null}},Nt={state:0,origin:{x:0,y:0},previous_offset:{x:0,y:0}},Y={enabled:!1,points:new Map,started(t=null){return t!==null?this.points.has(t):this.points.size>0},has_note(t){for(let e of this.points.values())if(e.has(t))return!0;return!1},add(t,e){this.points.has(t)&&(e=this.points.get(t).union(e)),this.points.set(t,e);for(let o of e.values())vt.play(o),Ne(o)},change(t,e){let o=0,r=new Set().union(this.points.get(t));this.points.set(t,e);for(let i of r.values())e.has(i)||(vt.stop(i),Ne(i),o=-1);for(let i of e.values())r.has(i)||(vt.play(i),Ne(i),o=1);return o},remove(t){let e=this.points.get(t);this.points.delete(t);for(let o of e.values())this.has_note(o)||vt.stop(o),Ne(o)},reset(){this.points.clear(),vt.stopAll()},enable(){this.enabled=!0,mo()},disable(){this.reset(),this.enabled=!1,mo()},last_vibration_time:0};function Xe(){let t=new Map([[88,["a0","c8"]],[61,["c2","c7"]],[49,["c2","c6"]],[37,["c3","c6"]],[25,["c3","c5"]],[20,["f3","c5"]]]).get(d.number_of_keys);M.first_key=to(t[0]),M.last_key=to(t[1]);let e={height_factor:d.height_factor,perspective:d.perspective,top_felt:d.top_felt,first_key:M.first_key,last_key:M.last_key};d.lowperf?cc(M.svg,M.keys,e):lc(M.svg,M.keys,e);for(let[o,r]of M.keys.entries())M.marking_groups[o]=r?.querySelector(".key-marker-group"),M.labels[o]=r?.querySelector(".key-label");M.loaded=!0,Rs()}function Is(){document.getElementById("top-felt")?.toggleAttribute("hidden",!d.top_felt)}function Ne(t){let e=M.keys[t];if(e){let o=t-d.transpose,i=Y.has_note(t)||vr.isKeyPressed(o)||Io.isNotePressed(o),n=i||vr.isNoteOn(o,d.pedals?"both":"none")||Io.isNoteSustained(o,d.pedals);e.classList.toggle("active",n),e.classList.toggle("pressed",i),e.classList.toggle("dim",d.pedal_dim&&n&&!i);let a=i?"d1":"d0";for(let s of e.children)s.hasAttribute(a)&&s.setAttribute("d",s.getAttribute(a));_p(t,n,i)}}function Mt(t){if(t)for(let e of t)Ne(e);else for(let e=0;e<128;e++)Ne(e)}function _p(t,e,o){let r=M.keys[t],i=M.marking_groups[t],n=M.labels[t];function a(){let s="";switch(d.labels.type){case"pc":s=`${t%12}`;break;case"english":s=Rc(t);break;case"german":s=Bc(t);break;case"italian":s=Fc(t);break;case"freq":s=zc(t);break;default:s=`${t}`}let l=s.split(`
`);for(let[u,m]of Array.from(n.children).entries())m.textContent=l[u]??""}if(r){let s=d.labels.keys.has(t),l=s||d.labels.played&&e,u=d.labels.played&&!s;a(),r.classList.toggle("label-visible",l),r.classList.toggle("has-fixed-label",s),r.classList.toggle("has-temporary-label",u),n.classList.toggle("rotated",d.labels.type=="freq");let m=d.stickers.keys.has(t),c=m?d.stickers.keys.get(t):null;r.classList.toggle("has-sticker",m),r.classList.toggle("has-sticker-red",c=="red"),r.classList.toggle("has-sticker-yellow",c=="yellow"),r.classList.toggle("has-sticker-green",c=="green"),r.classList.toggle("has-sticker-blue",c=="blue"),r.classList.toggle("has-sticker-violet",c=="violet"),o&&i.hasAttribute("press_transform")?i.style.setProperty("transform",i.getAttribute("press_transform")):i.style.removeProperty("transform")}}function mo(){M.svg.classList.toggle("touch-input",Y.enabled),M.svg.classList.toggle("grabbing",[1,2].includes(Nt.state)),M.svg.classList.toggle("marking-mode",Ho()),M.svg.classList.toggle("labeling-mode",po()),M.svg.classList.toggle("sticker-mode",fo())}function Rs(){Mt(),Is(),Qe(),mo()}function Qe(){let t=M.container.clientHeight/M.svg.clientHeight;d.zoom>1?(d.zoom>t&&(d.zoom=t),M.svg.style.transform=`scale(${d.zoom}, ${d.zoom})`):M.svg.style.removeProperty("transform");let e=M.svg.getBoundingClientRect(),o=M.container.getBoundingClientRect(),r=(o.height-e.height)*d.offset.y;M.svg.style.top=`${r}px`;let i=Math.round((e.width-o.width)*d.offset.x);M.container.scroll(i,0),Kc(d.offset.y>.5)}function vn(t){let e=t+d.transpose;e>=0&&e<128&&Ne(e)}M.svg.oncontextmenu=t=>{Nt.state>0&&t.preventDefault(),Nt.state=0};M.svg.addEventListener("pointerdown",t=>{v.dropdowns.closeAll(),(t.pointerType!="touch"&&t.button!=0||!Y.enabled)&&(!Ho()||t.button!=0)&&(Nt.state=1,Nt.origin.x=t.screenX,Nt.origin.y=t.screenY,Nt.previous_offset.x=d.offset.x,Nt.previous_offset.y=d.offset.y,M.svg.setPointerCapture(t.pointerId),mo())},{capture:!0,passive:!1});M.svg.addEventListener("pointerup",t=>{t.pointerType!="touch"&&Nt.state&&(Nt.state=Nt.state==2&&t.button==2?3:0,M.svg.releasePointerCapture(t.pointerId),Qe(),mo(),nt())},{capture:!0,passive:!1});M.svg.addEventListener("pointermove",t=>{if(t.pointerType!="touch"&&Nt.state){let o=M.svg.getBoundingClientRect(),r=M.container.getBoundingClientRect();Nt.state=2;let n=(t.screenX-Nt.origin.x)/(o.width-r.width);d.offset.x=Be(Nt.previous_offset.x-n,0,1);let a=M.container.clientHeight/M.svg.clientHeight;if(d.zoom<a-(a-1)/10){let l=(t.screenY-Nt.origin.y)/(r.height-o.height);d.offset.y=Be(Nt.previous_offset.y+l,0,1),t.ctrlKey||(d.offset.y<.06&&(d.offset.y=0),d.offset.y>1-.06&&(d.offset.y=1),Math.abs(.5-d.offset.y)<.06&&(d.offset.y=.5))}Qe(),mo()}},{capture:!1,passive:!0});M.container.addEventListener("wheel",t=>{if(!Nt.state&&!Y.started()&&!t.ctrlKey){let e=-t.deltaY/(t.deltaY<=0?1e3:500),o=M.container.clientHeight/M.svg.clientHeight,r=Be(d.zoom+e,1,o);if(d.zoom!=r){let n=M.svg.getBoundingClientRect(),a=M.container.getBoundingClientRect(),s=Math.round(a.width*r);d.offset.x=(t.clientX-(t.clientX-n.left)/n.width*s-a.left)/(a.width-s),d.zoom=r}let i=t.deltaX/1e3;i&&(d.offset.x=Be(d.offset.x-i,0,1)),Qe()}t.preventDefault()},{capture:!1,passive:!1});Dt||(yn=null,M.container.addEventListener("pointermove",t=>{t.pointerType!="touch"&&(yn&&clearTimeout(yn),v.buttons.show_toolbar.toggleAttribute("visible",!0),M.container.toggleAttribute("cursor-hidden",!1),M.svg.toggleAttribute("cursor-hidden",!1),yn=setTimeout(()=>{v.buttons.show_toolbar.toggleAttribute("visible",!1),Y.enabled||(M.container.toggleAttribute("cursor-hidden",!0),M.svg.toggleAttribute("cursor-hidden",!0))},4e3))},{capture:!1,passive:!0}));var yn;function bo(t,e){let o=document.elementFromPoint(t,e)?.parentElement;return o?.classList.contains("key")?parseInt(o.getAttribute("value")):null}function Yc(t,e,o,r,i){let n=ec(i),a=Math.sin(n),s=Math.cos(n);Ki&&(o/=10,r/=10);let[l,u]=o>=r?[t+o*s,e+o*a]:[t-r*a,e+r*s],[m,c]=o>=r?[t-o*s,e-o*a]:[t+r*a,e-r*s],[f,h]=o>=r?[t-r*a,e+r*s]:[t+o*s,e+o*a],[g,b]=o>=r?[t+r*a,e-r*s]:[t-o*s,e-o*a],w=bo(l,u),_=bo(m,c),x=bo(f,h),E=bo(g,b),$=new Set([w,_,x,E]),O=Math.min(w,_,x,E),K=Math.max(w,_,x,E),G=K-O;if(G>1){let[J,I]=O==w?[l,u]:O==_?[m,c]:O==x?[f,h]:[g,b],[H,k]=K==w?[l,u]:K==_?[m,c]:K==x?[f,h]:[g,b],it=(H-J)/G,pt=(k-I)/G;for(let tt=.5;tt<G;tt+=.5){let[Lt,xt]=[J+it*tt,I+pt*tt],Q=bo(Lt,xt);$.add(Q)}}return $.delete(null),$}function wp(t){if(v.dropdowns.closeAll(),t.pointerType!="touch"&&Y.enabled&&!Ho()&&t.button===0&&!Y.started(t.pointerId)){let e=bo(t.clientX,t.clientY);e&&(Y.add(t.pointerId,new Set([e])),t.preventDefault())}}function Zc(t){t.pointerType!="touch"&&Y.started(t.pointerId)&&t.button===0&&(t.preventDefault(),Y.remove(t.pointerId))}function kp(t){if(t.pointerType!="touch"&&Y.started(t.pointerId)){let e=bo(t.clientX,t.clientY);Y.change(t.pointerId,new Set([e])),t.preventDefault()}}function xp(t){if(Y.enabled&&!Ho()){for(let e of t.changedTouches)if(!Y.started(e.identifier)){let o=Yc(e.clientX,e.clientY,e.radiusX,e.radiusY,e.rotationAngle);o.size&&(Y.add(e.identifier,o),t.timeStamp-Y.last_vibration_time>40&&(navigator.vibrate(40),Y.last_vibration_time=t.timeStamp),t.preventDefault())}}}function Xc(t){for(let e of t.changedTouches)Y.started(e.identifier)&&(Y.remove(e.identifier),t.preventDefault())}function Sp(t){for(let e of t.changedTouches)if(Y.started(e.identifier)){let o=Yc(e.clientX,e.clientY,e.radiusX,e.radiusY,e.rotationAngle);Y.change(e.identifier,o)==1&&t.timeStamp-Y.last_vibration_time>40&&(navigator.vibrate(40),Y.last_vibration_time=t.timeStamp),t.preventDefault()}}function Ep(t){if(t.button===0){let e=bo(t.clientX,t.clientY);if(e){let o=t.ctrlKey?Array.from(Ql(e%12,128,12)):[e];if(po()){let r=o.some(i=>!d.labels.keys.has(i));for(let i of o)d.labels.toggle(i,r)}else if(fo()){let r=o.some(i=>!d.stickers.keys.has(i));for(let i of o)d.stickers.toggle(i,r)}}}}function Qc(){M.resize.timeout&&clearTimeout(M.resize.timeout),M.resize_timeout=setTimeout(()=>{Qe(),M.resize.timeout=null},d.lowperf?50:5)}function Bs(){M.svg.addEventListener("pointerdown",wp,{capture:!0,passive:!1}),M.svg.addEventListener("touchstart",xp,{capture:!0,passive:!1}),window.addEventListener("pointerup",Zc,{capture:!1,passive:!1}),window.addEventListener("pointercancel",Zc,{capture:!1,passive:!1}),window.addEventListener("touchend",Xc,{capture:!1,passive:!1}),window.addEventListener("touchcancel",Xc,{capture:!1,passive:!1}),window.addEventListener("pointermove",kp,{capture:!1,passive:!1}),window.addEventListener("touchmove",Sp,{capture:!1,passive:!1}),M.svg.addEventListener("click",Ep,{capture:!1,passive:!0})}var N=new qi("piano-projector"),gr=new Zi("piano-projector-session"),d={first_time:!0,lowperf:!1,number_of_keys:88,height_factor:1,device_name:null,sound:null,offset:{x:.5,y:.5},labels:{type:"english",octave:!0,played:!1,keys:new Set,toggle(t,e=void 0){e=e??!this.keys.has(t),e?this.keys.add(t):this.keys.delete(t),Ne(t),nt()},keysToStr(){return[...this.keys].join(",")},strToKeys(t){if(this.keys.clear(),t)for(let e of t.split(",")){let o=parseInt(e);Number.isInteger(o)&&this.keys.add(o)}},get type_badge(){return{english:"English",german:"German",italian:"Italian",pc:"Pitch-class",midi:"MIDI",freq:"Frequency"}[this.type]}},stickers:{color:"red",keys:new Map,toggle(t,e=void 0){e=e??!this.keys.has(t),e?this.keys.set(t,this.color):this.keys.delete(t),Ne(t),nt()},keysToStr(){let t=[];for(let[e,o]of this.keys.entries())t.push(`${e}:${o}`);return t.join(",")},strToKeys(t){if(this.keys.clear(),t)for(let e of t.split(",")){let[o,r]=e.split(":"),i=parseInt(o);Number.isInteger(i)&&this.keys.set(i,r)}}},zoom:1,pedals:!0,pedal_dim:!0,perspective:!0,top_felt:!0,toolbar:!0,semitones:0,octaves:0,get transpose(){return this.semitones+this.octaves*12},get highlight_opacity(){return getComputedStyle(document.documentElement).getPropertyValue("--highlight-opacity")},set highlight_opacity(t){document.documentElement.style.setProperty("--highlight-opacity",t)},get color_highlight(){return getComputedStyle(document.documentElement).getPropertyValue("--color-highlight")},set color_highlight(t){document.documentElement.style.setProperty("--color-highlight",t)},get color_white(){return getComputedStyle(document.documentElement).getPropertyValue("--color-white-key")},set color_white(t){document.documentElement.style.setProperty("--color-white-key",t)},get color_black(){return getComputedStyle(document.documentElement).getPropertyValue("--color-black-key")},set color_black(t){document.documentElement.style.setProperty("--color-black-key",t)},get color_top_felt(){return getComputedStyle(document.documentElement).getPropertyValue("--color-felt-top")},set color_top_felt(t){document.documentElement.style.setProperty("--color-felt-top",t)},get pc_keyboard_connected(){return this.device_name==="pckbd"}};function nt(t=null){N.writeBool("first-time",!1),N.writeNumber("height-factor",d.height_factor),N.writeNumber("number-of-keys",d.number_of_keys),N.writeString("color-pressed",d.color_highlight),N.writeString("color-white",d.color_white),N.writeString("color-black",d.color_black),N.writeString("labels-type",d.labels.type),N.writeBool("labels-octave",d.labels.octave),N.writeBool("labels-played",d.labels.played),N.writeString("labels-keys",d.labels.keysToStr()),N.writeString("sticker-color",d.stickers.color),N.writeString("stickers-keys",d.stickers.keysToStr()),N.writeBool("perspective",d.perspective),N.writeBool("top-felt",d.top_felt),N.writeString("highlight-opacity",d.highlight_opacity),N.writeBool("pedals",d.pedals),N.writeBool("pedal-dim",d.pedal_dim),N.writeNumber("offset-y",d.offset.y),d.device_name?N.writeString("device",d.device_name):N.remove("device"),t&&N.writeString("sound",t),Ls()}function Jc(){d.first_time=N.readBool("first-time",!0),d.lowperf=N.readBool("lowperf",d.lowperf),d.height_factor=N.readNumber("height-factor",Dt?.75:d.height_factor),d.number_of_keys=N.readNumber("number-of-keys",Dt?20:d.number_of_keys),d.color_white=N.readString("color-white",d.color_white),d.color_black=N.readString("color-black",d.color_black),d.color_highlight=N.readString("color-pressed",d.color_highlight),d.labels.type=N.readString("labels-type",d.labels.type),d.labels.octave=N.readBool("labels-octave",d.labels.octave),d.labels.played=N.readBool("labels-played",d.labels.played),d.labels.strToKeys(N.readString("labels-keys","")),d.stickers.color=N.readString("sticker-color",d.stickers.color),d.stickers.strToKeys(N.readString("stickers-keys","")),d.perspective=N.readBool("perspective",d.perspective),d.top_felt=N.readBool("top-felt",d.top_felt),d.highlight_opacity=N.readString("highlight-opacity",d.highlight_opacity),d.pedals=N.readBool("pedals",d.pedals),d.pedal_dim=N.readBool("pedal-dim",d.pedal_dim),d.offset.y=N.readNumber("offset-y",d.offset.y),d.device_name=N.readString("device",null),d.sound=N.readString("sound",""),Cp()}function Ls(){gr.writeNumber("semitones",d.semitones),gr.writeNumber("octaves",d.octaves),gr.writeBool("toolbar",d.toolbar)}function Cp(){d.semitones=gr.readNumber("semitones",0),d.octaves=gr.readNumber("octaves",0),d.toolbar=gr.readBool("toolbar",d.toolbar)}function go(t){d.number_of_keys=t,d.zoom=1,_n(),Xe(),nt()}function Fs(t){d.height_factor=t,_n(),Xe(),nt()}function jc(){Fs(Jl(d.height_factor,[1,.75,.5]))}function Wc(t=void 0){d.pedals=t===void 0?!d.pedals:t,wn(),Mt(),nt()}function qc(t=void 0){d.pedal_dim=t===void 0?!d.pedal_dim:t,wn(),Mt(),nt()}function zs(){let t=document.createElement("div");return t.classList.add("tg-dialog-dots"),t.id="tg-dialog-dots",t.outerHTML}var Ns=t=>{let e="";return t.tourSteps.length&&t.tourSteps.forEach((o,r)=>{let i=document.createElement("span");i.classList.add("tg-dot"),r===t.activeStep&&i.classList.add("tg-dot-active"),e+=i.outerHTML}),e};async function tu(){return this.dialog=document.createElement("div"),this.dialog.classList.add("tg-dialog"),await ii(this).then(t=>{this.dialog.innerHTML=t}),document.body.append(this.dialog),!0}async function ii(t){t.options.dialogClass&&t.dialog.classList.add(t.options.dialogClass),t.options.dialogZ&&(t.dialog.style.zIndex=String(t.options.dialogZ)),t.dialog.style.width=t.options.dialogWidth?t.options.dialogWidth+"px":"auto",t.options.dialogMaxWidth&&(t.dialog.style.maxWidth=t.options.dialogMaxWidth+"px");let e="";if(e+="<div class='tg-dialog-header'>",e+='<div class="tg-dialog-title" id="tg-dialog-title"><!-- JS rendered --></div>',t.options.closeButton&&(e+='<div class="tg-dialog-close-btn" id="tg-dialog-close-btn">',e+=' <svg width="12px" height="12px" id="Layer_1" version="1.1" viewBox="0 0 512 512" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><path d="M443.6,387.1L312.4,255.4l131.5-130c5.4-5.4,5.4-14.2,0-19.6l-37.4-37.6c-2.6-2.6-6.1-4-9.8-4c-3.7,0-7.2,1.5-9.8,4  L256,197.8L124.9,68.3c-2.6-2.6-6.1-4-9.8-4c-3.7,0-7.2,1.5-9.8,4L68,105.9c-5.4,5.4-5.4,14.2,0,19.6l131.5,130L68.4,387.1  c-2.6,2.6-4.1,6.1-4.1,9.8c0,3.7,1.4,7.2,4.1,9.8l37.4,37.6c2.7,2.7,6.2,4.1,9.8,4.1c3.5,0,7.1-1.3,9.8-4.1L256,313.1l130.7,131.1  c2.7,2.7,6.2,4.1,9.8,4.1c3.5,0,7.1-1.3,9.8-4.1l37.4-37.6c2.6-2.6,4.1-6.1,4.1-9.8C447.7,393.2,446.2,389.7,443.6,387.1z"/></svg>',e+="</div>"),e+='<div class="tg-dialog-spinner" id="tg-dialog-spinner">',e+='<svg fill="#000000" width="12" height="12" viewBox="0 0 20 20" stroke="#000000" stroke-width="0.8"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <path d="M10,1V3a7,7,0,1,1-7,7H1a9,9,0,1,0,9-9Z"></path> </g> </g></svg>',e+="</div>",e+="</div>",t.options.progressBar&&(e+='<div class="tg-dialog-progress-bar"><span class="tg-bar" id="tg-dialog-progbar"></span></div>'),e+='<div class="tg-dialog-body" id="tg-dialog-body"><!-- JS rendered --></div>',t.options.showStepDots&&t.options.stepDotsPlacement==="body"){let i=zs();i&&(e+=i)}e+='<div class="tg-dialog-footer">';let o="tg-dialog-btn",r="false";if(t.activeStep===0&&(r="true",o+=" disabled"),t.options.showButtons&&!t.options.hidePrev&&(e+='<button type="button" class="'+o+'" id="tg-dialog-prev-btn" disabled="'+r+`">${t.options.prevLabel}</button>`),e+='<div class="tg-dialog-footer-sup">',t.options.showStepDots&&t.options.stepDotsPlacement==="footer"){let i=zs();i&&(e+=i)}return t.options.showStepProgress&&(e+='<span class="tg-step-progress" id="tg-step-progress"><!-- JS rendered --></span>'),e+="</div>",t.options.showButtons&&!t.options.hideNext&&(e+=`<button type="button" class="tg-dialog-btn" id="tg-dialog-next-btn">${t.options.nextLabel}</button>`),e+="</div>",e+='<div id="tg-arrow" class="tg-arrow"></div><!-- end tour arrow -->',e}function yo(t){return new Promise((e,o)=>{let r=t.tourSteps[t.activeStep];r||o("No active step data");let i=document.getElementById("tg-dialog-title");i&&(i.innerHTML=r.title?r.title:"");let n=document.getElementById("tg-dialog-body");n&&r&&(typeof r.content=="string"?n.innerHTML=r.content?r.content:"":(n.innerHTML="",n.append(r.content)));let a=document.getElementById("tg-dialog-dots");a&&t.options.showStepDots&&Ns(t)&&(a.innerHTML=Ns(t));let s=document.getElementById("tg-dialog-prev-btn");s&&(t.activeStep===0?(s.classList.add("disabled"),s.setAttribute("disabled","true")):(s.classList.remove("disabled"),s.removeAttribute("disabled")));let l=document.getElementById("tg-dialog-next-btn");l&&(l.innerHTML=t.activeStep+1>=t.tourSteps.length?t.options.finishLabel:t.options.nextLabel);let u=document.getElementById("tg-step-progress");u&&(u.innerHTML=t.activeStep+1+"/"+t.tourSteps.length);let m=document.getElementById("tg-dialog-progbar");m&&(t.options.progressBar&&(m.style.backgroundColor=t.options.progressBar),m.style.width=(t.activeStep+1)/t.tourSteps.length*100+"%"),e(!0)})}function ni(t){return new Promise(async e=>{let o=document.querySelector("#tg-arrow"),r=t.tourSteps[t.activeStep].dialogTarget||t.tourSteps[t.activeStep].target;if(r===document.body)return Object.assign(t.dialog.style,{top:`${window.innerHeight/2.25-t.dialog.clientHeight/2}px`,left:`${window.innerWidth/2-t.dialog.clientWidth/2}px`,position:"fixed"}),t.dialog.classList.add("tg-dialog-fixed"),o&&(o.style.display="none"),e(!0);t.dialog.style.position="absolute",t.dialog.classList.remove("tg-dialog-fixed"),o&&(o.style.display="inline-block"),zi(r,t.dialog,{placement:t.options.dialogPlacement,middleware:[Tl({autoAlignment:!0,padding:5}),Bi({crossAxis:t.options.allowDialogOverlap,padding:15}),Fi({element:o}),Ri(20)]}).then(({x:i,y:n,placement:a,middlewareData:s})=>(Object.assign(t.dialog.style,{left:`${i}px`,top:`${n}px`}),s.arrow&&o&&Object.assign(o.style,Ap(s.arrow,a,t.dialog)),e(!0)))})}function Ap(t,e,o){let r=t?.x||0,i=t?.y||0,n=10,a={top:"bottom",right:"left",bottom:"top",left:"right"}[e.split("-")[0]],s=o.clientWidth-n,l=o.clientHeight-n,u=Math.abs(i-l)<=n,m=Math.abs(r-s)<=n,c=Math.abs(i)<=n,f=Math.abs(r)<=n,h=t?.centerOffset!==0||(f||m)&&(c||u);return{left:f?a==="right"?"":"0":m?`${s}px`:`${r}px`,top:c?a==="bottom"?"":"0":u?`${l}px`:`${i}px`,[a]:h?"0":`-${n/2}px`,transform:h?"none":"rotate(45deg)"}}function eu(){this.backdrop=document.createElement("div"),this.computeBackdropAttributes(),document.body.append(this.backdrop)}function ou(){this.options&&(this.backdrop.className="tg-backdrop",this.backdrop.style.boxShadow=this.options.backdropColor+" 0 0 1px 2px, "+this.options.backdropColor+" 0 0 0 1000vh",this.options.backdropClass&&this.backdrop.classList.add(this.options.backdropClass),this.options.dialogAnimate&&this.backdrop.classList.add("tg-backdrop-animate"),this.options.activeStepInteraction&&this.backdrop.classList.add("allow-interaction"))}function kn(t){return new Promise(async(e,o)=>{if(typeof t.options.targetPadding>"u")return o("Options failed to initialize");if(!t.backdrop)return o("No backdrop element initialized");let r=t.tourSteps[t.activeStep],i=r.target,n=i.getBoundingClientRect(),a=n.width+t.options.targetPadding>document.documentElement.clientWidth;i===document.body?(n.width=0,n.height=0,t.backdrop.style.position="fixed",t.backdrop.style.top=window.innerHeight/2.5+"px",t.backdrop.style.left=window.innerWidth/2+"px"):r.fixed?(t.backdrop.style.position="fixed",t.backdrop.style.top=n.top-t.options.targetPadding/2+"px",t.backdrop.style.left=(a?n.x:n.x-t.options.targetPadding/2)+"px"):(t.backdrop.style.position="absolute",t.backdrop.style.top=window.scrollY+n.top-t.options.targetPadding/2+"px",t.backdrop.style.left=(a?n.x:n.x-t.options.targetPadding/2)+"px"),t.backdrop.style.pointerEvents=r.propagateEvents?"none":"",t.backdrop.style.width=(a?n.width:n.width+t.options.targetPadding)+"px",t.backdrop.style.height=(n.height?n.height+t.options.targetPadding:n.height)+"px",e(!0)})}function Pp(){return new Promise(async t=>{this.backdrop.style.display="block",await kn(this),this.dialog.style.display="block",this.options.dialogAnimate&&this.isVisible&&this.dialog.classList.add("animate-position"),await ni(this),this.options.dialogAnimate&&setTimeout(()=>{this.dialog.classList.remove("animate-position")},300),this.isVisible=!0,setTimeout(()=>t(!0),300)})}var ru=Pp;function iu(t){if(typeof t=="function")this._globalFinishCallback=t;else throw new Error("Provided callback for onFinish was not a function")}function nu(t){if(typeof t=="function")this._globalBeforeExitCallback=t;else throw new Error("Provided callback for onBeforeExit was not a function")}function su(t){if(typeof t=="function")this._globalAfterExitCallback=t;else throw new Error("Provided callback for onAfterExit was not a function")}function au(t){if(typeof t=="function")this._globalBeforeChangeCallback=t;else throw new Error("Provided callback for onBeforeStepChange was not a function")}function lu(t){if(typeof t=="function")this._globalAfterChangeCallback=t;else throw new Error("Provided callback for onAfterStepChange was not a function")}var cu=async function(t){if(!(t.target instanceof Element))return;let e=this.backdrop.getBoundingClientRect();if(t.clientX>=e.x&&t.clientX<=e.x+e.width&&t.clientY>=e.y&&t.clientY<=e.y+e.height)return;let o=this.dialog.getBoundingClientRect();t.clientX>=o.x&&t.clientX<=o.x+o.width&&t.clientY>=o.y&&t.clientY<=o.y+o.height||this.dialog.contains(t.target)||(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),await this.exit())},uu=async function(t){if(t.key==="Escape"&&this.options.exitOnEscape){t.preventDefault(),await this.exit();return}if(t.key==="ArrowRight"&&this.options.keyboardControls){t.preventDefault(),this.visitStep("next").catch(e=>{this.options.debug});return}if(t.key==="ArrowLeft"&&this.options.keyboardControls){t.preventDefault(),this.visitStep("prev").catch(e=>{this.options.debug});return}};function du(){let t=()=>{let s=document.getElementById("tg-dialog-next-btn");!s||this._trackedEvents.nextBtnClickEvent.initialized||(s.addEventListener("click",this._trackedEvents.nextBtnClickEvent.fn),this._trackedEvents.nextBtnClickEvent.initialized=!0)},e=()=>{let s=document.getElementById("tg-dialog-prev-btn");!s||this._trackedEvents.prevBtnClickEvent.initialized||(s.addEventListener("click",this._trackedEvents.prevBtnClickEvent.fn),this._trackedEvents.prevBtnClickEvent.initialized=!0)},o=()=>{let s=document.getElementById("tg-dialog-close-btn");!s||this._trackedEvents.closeBtnClickEvent.initialized||(s.addEventListener("click",this._trackedEvents.closeBtnClickEvent.fn,!1),this._trackedEvents.closeBtnClickEvent.initialized=!0)},r=()=>{this._trackedEvents.outsideClickEvent.initialized||(document.body.addEventListener("click",this._trackedEvents.outsideClickEvent.fn,!1),this._trackedEvents.outsideClickEvent.initialized=!0)},i=()=>{this._trackedEvents.keyPressEvent.initialized||(window.addEventListener("keydown",this._trackedEvents.keyPressEvent.fn,!1),this._trackedEvents.keyPressEvent.initialized=!0)},n=()=>{this._trackedEvents.resizeEvent.initialized||(window.addEventListener("resize",this._trackedEvents.resizeEvent.fn,!1),this._trackedEvents.resizeEvent.initialized=!0)},a=()=>{this._trackedEvents.scrollEvent.initialized||(window.addEventListener("scroll",this._trackedEvents.scrollEvent.fn,!1),this._trackedEvents.scrollEvent.initialized=!0)};return new Promise(s=>(this.options.showButtons&&t(),this.options.showButtons&&e(),this.options.closeButton&&o(),this.options.exitOnClickOutside&&r(),(this.options.keyboardControls||this.options.exitOnEscape)&&i(),n(),a(),s(!0)))}function hu(){let t=()=>{let s=document.getElementById("tg-dialog-next-btn");s&&(s.removeEventListener("click",this._trackedEvents.nextBtnClickEvent.fn),this._trackedEvents.nextBtnClickEvent.initialized=!1)},e=()=>{let s=document.getElementById("tg-dialog-prev-btn");s&&(s.removeEventListener("click",this._trackedEvents.prevBtnClickEvent.fn),this._trackedEvents.prevBtnClickEvent.initialized=!1)},o=()=>{let s=document.getElementById("tg-dialog-close-btn");s&&(s.removeEventListener("click",this._trackedEvents.closeBtnClickEvent.fn,!1),this._trackedEvents.closeBtnClickEvent.initialized=!1)},r=()=>{document.body.removeEventListener("click",this._trackedEvents.outsideClickEvent.fn,!1),this._trackedEvents.outsideClickEvent.initialized=!1},i=()=>{window.removeEventListener("keydown",this._trackedEvents.keyPressEvent.fn,!1),this._trackedEvents.keyPressEvent.initialized=!1},n=()=>{window.removeEventListener("resize",this._trackedEvents.resizeEvent.fn,!1),this._trackedEvents.resizeEvent.initialized=!1},a=()=>{window.removeEventListener("scroll",this._trackedEvents.scrollEvent.fn,!1),this._trackedEvents.scrollEvent.initialized=!1};return new Promise(s=>(this.options.showButtons&&t(),this.options.showButtons&&e(),this.options.closeButton&&o(),this.options.exitOnClickOutside&&r(),(this.options.keyboardControls||this.options.exitOnEscape)&&i(),n(),a(),s(!0)))}var Tp=(t,e)=>{e.scrollIntoView({behavior:t.options.autoScrollSmooth?"smooth":"auto",block:"end",inline:"nearest"})},pu=Tp;async function Mp(t){return new Promise(async(e,o)=>{if(this._promiseWaiting)return o("Promise waiting");if(typeof t=="string"&&(t==="next"?t=this.activeStep+1:t=this.activeStep-1),t>=this.tourSteps.length){await this.finishTour(!0,this.group);return}return await Lp(this,t).catch(r=>o(r)),e(!0)})}async function fu(){return new Promise(async(t,e)=>{let o=this.activeStep+1;try{await this.visitStep(o)}catch(r){return e(r)}return t(!0)})}async function mu(){return new Promise(async(t,e)=>{let o=this.activeStep-1;try{await this.visitStep(o)}catch(r){return e(r)}return t(!0)})}function Lp(t,e){return new Promise(async(o,r)=>{if(e>=t.tourSteps.length)return r("End of tour steps");if(e<0)return r("Start of tour steps");let i=t.activeStep,n=t.tourSteps[i],a=t.tourSteps[e];if(!a||!n)return r("Step not found by index");if(n.target&&n.target.classList.remove("tg-active-element"),(t._globalBeforeChangeCallback&&e!==i||n.beforeLeave||a.beforeEnter)&&(t._promiseWaiting=!0,t.dialog.classList.add("tg-dialog-loading")),t._globalBeforeChangeCallback&&e!==i)try{await t._globalBeforeChangeCallback(i,e)}catch(s){return r(s)}if(e!==i&&n.beforeLeave)try{await n.beforeLeave(n,a)}catch(s){return r(s)}if(a.beforeEnter)try{await a.beforeEnter(n,a)}catch(s){return r(s)}return typeof a.target=="string"&&(t.tourSteps[e].target=document.querySelector(a.target)),(!a.target||!t.tourSteps[e].target)&&(t.tourSteps[e].target=document.body),t.activeStep=Number(e),await yo(t).catch(s=>{t.options.debug,r(s)}),t.options.autoScroll&&a.target!==document.body&&pu(t,a.target),await t.updatePositions(),t.options.activeStepInteraction&&a.target.classList.add("tg-active-element"),e!==i&&n.afterLeave&&await n.afterLeave(n,a),a.afterEnter&&await a.afterEnter(n,a),t._globalAfterChangeCallback&&e!==i&&await t._globalAfterChangeCallback(i,e),t._promiseWaiting=!1,t.dialog.classList.remove("tg-dialog-loading"),o(!0)})}var gu=Mp;async function $p(t){return new Promise(async(e,o)=>{let r=[];t.options.steps&&t.options.steps.length&&(r=t.options.steps.map(n=>{if(typeof n.target=="string"){let a=document.querySelector(n.target);a&&(n.target=a,t.options.targetPadding&&t.options.autoScrollOffset?a.style.scrollMargin=t.options.autoScrollOffset+t.options.targetPadding+"px 0":a.style.scrollMargin="30px 0")}if(n.target||(n.target=document.body),typeof n.dialogTarget=="string"){let a=document.querySelector(n.dialogTarget);a?n.dialogTarget=a:n.dialogTarget=void 0}return n}));let i=document.querySelectorAll("[data-tg-tour]");return i&&i.forEach(n=>{let a=n.getAttribute("data-tg-title"),s=n.getAttribute("data-tg-tour"),l=n.getAttribute("data-tg-group"),u=n.getAttribute("data-tg-order"),m=n.getAttribute("data-tg-fixed"),c=n.getAttribute("data-tg-margin"),f=n.getAttribute("data-tg-dialog-target"),h=n.getAttribute("data-tg-propagate-events");t.options.targetPadding&&t.options.autoScrollOffset?n.style.scrollMargin=(c?c+t.options.targetPadding:t.options.autoScrollOffset+t.options.targetPadding)+"px 0":n.style.scrollMargin=(c||"30")+"px 0",r.push({title:a||void 0,order:u?Number(u):999,target:n,dialogTarget:f?document.querySelector(f):void 0,content:s||void 0,fixed:m!==null&&m!=="false",group:l||void 0,propagateEvents:h!==null&&h!=="false"})}),t.group&&(r=r.filter(n=>n.group===t.group)),r.forEach((n,a)=>n._index=a),r.sort(function(n,a){return n.order==a.order?(n._index??0)-(a._index??0):(n.order??0)-(a.order??0)}),t.tourSteps=r,t.tourSteps.length?e(!0):o("No tour steps detected"+(t.group?" in group: "+t.group:""))})}var br=$p;function Dp(t){return new Promise(e=>{if(document.querySelector(t))return e(document.querySelector(t));let o=new MutationObserver(()=>{document.querySelector(t)&&(e(document.querySelector(t)),o.disconnect())});o.observe(document.body,{childList:!0,subtree:!0})})}var vo=Dp;async function Op(t){this.options.steps&&(this.options.steps.push(...t),await br(this),this.isVisible&&await yo(this).catch(e=>{this.options.debug}),this.isVisible&&this.updatePositions().catch(e=>{this.options.debug}),this.isVisible&&await vo(".tg-dialog").then(async()=>(await this.destroyListeners(),await this.initListeners(),!0)))}var bu=Op;async function Ip(t){return new Promise(async(e,o)=>{if(this.isVisible)return this.options.debug,o("Tour already active");t&&(this.group=t),this.options.debug;let r=this;try{await br(r)}catch(i){return this.options.debug,o(i)}return await r.visitStep(this.activeStep).catch(i=>(this.options.debug,o(i))),await vo(".tg-dialog").then(async()=>{await this.initListeners(),this.options.dialogAnimate&&this.dialog.classList.add("animate-position"),this.options.exitOnClickOutside||document.body.classList.add("tg-no-interaction")}),e(!0)})}var yu=Ip;async function Rp(t){if(t)return Object.assign(this.options,t),this.computeBackdropAttributes(),await ii(this).then(e=>{e&&(this.dialog.innerHTML=e)}).catch(e=>{this.options.debug}),await yo(this).catch(e=>{this.options.debug}),this.isVisible&&await vo(".tg-dialog").then(async()=>(await this.destroyListeners(),await this.initListeners(),!0)),this}var vu=Rp;async function Bp(){return new Promise(async(t,e)=>{if(this._promiseWaiting)return e("Promise waiting");if(this._promiseWaiting=!0,this._globalBeforeExitCallback)try{await this._globalBeforeExitCallback()}catch(o){return e(o)}return this.dialog.style.display="none",this.backdrop.style.display="none",this.isVisible=!1,this.options.rememberStep||(this.activeStep=0),this.options.debug,document.body.classList.remove("tg-no-interaction"),await this.destroyListeners(),setTimeout(()=>{this._globalAfterExitCallback&&this._globalAfterExitCallback()},0),this._promiseWaiting=!1,t(!0)})}var _u=Bp;async function Fp(){return new Promise(async(t,e)=>(await br(this).catch(o=>e(o)),this.computeBackdropAttributes(),await this.refreshDialog().catch(o=>e(o)),t(!0)))}async function wu(){return new Promise(async(t,e)=>(await ii(this).then(o=>{o&&(this.dialog.innerHTML=o)}).catch(o=>{this.options.debug}),await yo(this).catch(o=>{this.options.debug,e(o)}),await this.updatePositions(),this.isVisible&&await vo(".tg-dialog").then(async()=>(await this.destroyListeners(),await this.initListeners(),!0)),t(!0)))}var ku=Fp;async function zp(t=!0,e="tour"){if(this._globalFinishCallback)try{await this._globalFinishCallback()}catch{return!1}if(this.options.completeOnFinish){if(!localStorage.tg_tours_complete){localStorage.tg_tours_complete=[e],t&&await this.exit(),this.activeStep=0;return}let o=localStorage.tg_tours_complete.split(",");o.includes(e)||(o.push(e),localStorage.tg_tours_complete=o)}return t&&await this.exit(),this.activeStep=0,this._promiseWaiting=!1,!0}function xu(t="tour"){return localStorage.tg_tours_complete?localStorage.tg_tours_complete.split(",").includes(t):!1}function Su(t="tour"){if(t==="all"){localStorage.tg_tours_complete=null;return}let e=localStorage.tg_tours_complete.split(",");localStorage.tg_tours_complete=e.filter(o=>o!==t)}var Eu=zp;var Np={nextLabel:"Next",prevLabel:"Back",finishLabel:"Finish",hidePrev:!1,hideNext:!1,dialogClass:"",allowDialogOverlap:!1,dialogZ:999,dialogWidth:0,dialogMaxWidth:340,dialogAnimate:!0,dialogPlacement:void 0,backdropClass:"",backdropColor:"rgba(20,20,21,0.84)",backdropAnimate:!0,targetPadding:30,completeOnFinish:!0,showStepDots:!0,stepDotsPlacement:"footer",showButtons:!0,showStepProgress:!0,progressBar:"",keyboardControls:!0,exitOnEscape:!0,exitOnClickOutside:!0,autoScroll:!0,autoScrollSmooth:!0,autoScrollOffset:20,closeButton:!0,rememberStep:!1,debug:!0,steps:[],activeStepInteraction:!0},Hs=Np;var xn=class{backdrop;dialog;group="";isVisible=!1;activeStep=0;tourSteps=[];options=Hs;isFinished=xu;_promiseWaiting=!1;constructor(e){this.dialog=document.createElement("div"),this.backdrop=document.createElement("div"),this.options=Hs,e&&Object.assign(this.options,e),this.createTourGuideDialog().catch(o=>{this.options.debug}),this.createTourGuideBackdrop()}createTourGuideBackdrop=eu;computeBackdropAttributes=ou;createTourGuideDialog=tu;start=yu;visitStep=gu;addSteps=bu;nextStep=fu;prevStep=mu;exit=_u;refresh=ku;refreshDialog=wu;finishTour=Eu;updatePositions=ru;deleteFinishedTour=Su;setOptions=vu;initListeners=du;destroyListeners=hu;_trackedEvents={nextBtnClickEvent:{initialized:!1,fn:this.nextStep.bind(this)},prevBtnClickEvent:{initialized:!1,fn:this.prevStep.bind(this)},closeBtnClickEvent:{initialized:!1,fn:this.exit.bind(this)},keyPressEvent:{initialized:!1,fn:uu.bind(this)},outsideClickEvent:{initialized:!1,fn:cu.bind(this)},resizeEvent:{initialized:!1,fn:async function(){await kn(this),await ni(this)}.bind(this)},scrollEvent:{initialized:!1,fn:async function(){await ni(this)}.bind(this)}};_globalFinishCallback;_globalBeforeExitCallback;_globalAfterExitCallback;_globalBeforeChangeCallback;_globalAfterChangeCallback;onFinish=iu;onBeforeExit=nu;onAfterExit=su;onBeforeStepChange=au;onAfterStepChange=lu};var _o=new xn({completeOnFinish:!0,exitOnEscape:!0,exitOnClickOutside:!1,hidePrev:!0,activeStepInteraction:!1,allowDialogOverlap:!0});function Cu(){_o.addSteps([{group:"main",order:0,content:"This short tour will help you learn how to use the app. Follow the steps to get started.",title:"Welcome to Piano Projector!",target:document.body},{group:"main",order:1,content:"<p>Click the Control button to choose how you want to play the piano. You can use a MIDI keyboard, your mouse or touch screen, or your computer keyboard.</p><p>The first time you click this button, your browser will ask for permission to access MIDI devices. After permission is granted and the connection is successful, a green light will turn on.</p>",title:"Control button",target:v.buttons.connect},{group:"main",order:2,content:"Click the Sound button to choose a sound for the piano. If you prefer a silent keyboard, or if you already have sound on your controller, you can leave this turned off.",title:"Sound button",target:v.buttons.sound},{group:"main",order:3,content:"<p>Click the Transpose button to transpose by semitones or octaves. You can also use Page Up and Page Down; hold Shift to transpose by octaves.</p><p>When transposed, a yellow light will turn on.</p>",title:"Transpose button",target:v.buttons.transpose},{group:"main",order:4,content:"Click the Size button to change how many keys are shown on the screen or how tall the keys appear.",title:"Size button",target:v.buttons.size},{group:"main",order:5,content:"Click the Appearance button to change the colors of the keys and other visual details.",title:"Appearance button",target:v.buttons.colors},{group:"main",order:6,content:"Click the Pedals button to control how the app reacts to pedal input. The app supports both sustain and sostenuto pedals.",title:"Pedals button",target:v.buttons.pedals},{group:"main",order:7,content:"<p>Click the Labels button (or press F2) to turn on Labeling mode. Then click any key to show or hide its label.</p><p>Hold Ctrl while clicking to apply the label to that same note in all octaves.</p><p>Use the menu next to the button to choose from several label formats, such as English, German, Italian, pitch class, MIDI note number, or frequency.</p>",title:"Labels button",target:v.buttons.labels_group},{group:"main",order:8,content:"<p>Click the Stickers button (or press F3) to turn on Sticker mode. Then click a key to place or remove a colored sticker. Hold Ctrl while clicking to apply a sticker to that same note in all octaves.</p><p>Use the menu next to the button to choose the sticker color.</p>",title:"Stickers button",target:v.buttons.stickers_group},{group:"main",order:9,content:"If a key seems stuck or a note keeps sounding, click the Panic button (or press Esc). This will reset the keyboard.",title:"Panic button",target:v.buttons.panic},{group:"main",order:10,content:"You can hide the top toolbar by clicking the small button on its right side or by pressing F9. To show it again, move the mouse to the top-right corner of the screen.",title:"Hide toolbar button",target:v.buttons.hide_toolbar},{group:"main",order:11,content:"<p>This is the piano projection area. When connected to a MIDI controller, the keys you play are highlighted here.</p><p>Click and drag the piano up or down to change its position on the screen. If you are using Touch control mode, you can still move the keyboard with the middle or right mouse button.</p><p>Use the mouse wheel to zoom in or out.</p>",title:"Piano projection",target:M.svg},{group:"main",order:12,content:"<p>Hold the Alt key to show the keyboard navigation bar. This lets you move through the app's functionality using your computer keyboard.</p>",title:"Keyboard navigation",target:document.getElementById("keyboard-navigator")}])}function Au(t={}){t.force||!_o.isFinished("main")?(t.onFinish&&_o.onAfterExit(t.onFinish),t.onStepChange&&_o.onAfterStepChange(()=>t.onStepChange(_o.activeStep)),_o.start("main")):t.onFinish()}function Pu(){_o.isVisible&&_o.updatePositions()}Cr("assets/shoelace");var v={self:document.getElementById("top-toolbar"),title:document.getElementById("toolbar-title"),dropdowns:{connect:document.getElementById("dropdown-connect"),sound:document.getElementById("dropdown-sound"),transpose:document.getElementById("dropdown-transpose"),size:document.getElementById("dropdown-size"),colors:document.getElementById("dropdown-colors"),pedals:document.getElementById("dropdown-pedals"),labels:document.getElementById("dropdown-labels"),stickers:document.getElementById("dropdown-stickers"),get all(){return[this.connect,this.sound,this.transpose,this.size,this.colors,this.pedals,this.labels,this.stickers]},closeAll(){for(let t of this.all)t.hide()},getOpen(){return this.all.find(t=>t.open)??null}},buttons:{connect:document.getElementById("btn-connect"),sound:document.getElementById("btn-sound"),transpose:document.getElementById("btn-transpose"),size:document.getElementById("btn-size"),colors:document.getElementById("btn-colors"),pedals:document.getElementById("btn-pedals"),labels_group:document.getElementById("btn-labels-group"),labels_left:document.getElementById("btn-labels-switch"),labels_right:document.getElementById("btn-labels-dropdown"),stickers_group:document.getElementById("btn-stickers-group"),stickers_left:document.getElementById("btn-stickers-switch"),stickers_right:document.getElementById("btn-stickers-dropdown"),panic:document.getElementById("btn-panic"),hide_toolbar:document.getElementById("btn-hide-toolbar"),show_toolbar:document.getElementById("btn-show-toolbar")},menus:{connect:{top:document.getElementById("midi-connection-menu"),divider:document.querySelector("#midi-connection-menu sl-divider"),denied:document.getElementById("menu-connect-item-midi-denied"),unavailable:document.getElementById("menu-connect-item-midi-unavailable"),prompt:document.getElementById("menu-connect-item-midi-prompt"),kbd:document.getElementById("menu-connect-item-computer-keyboard"),touch:document.getElementById("menu-connect-item-touch"),template:document.getElementById("menu-connect-item-midi-port-template"),getMidiItems:()=>Array.from(v.menus.connect.top.querySelectorAll(".menu-connect-item-midi-input"))},sound:{top:document.getElementById("menu-sound"),items:Array.from(document.querySelectorAll(".menu-sound-item"))},transpose:{top:document.getElementById("menu-transpose"),semitones:{input:document.getElementById("input-semitones"),btn_minus:document.getElementById("btn-semitone-minus"),btn_plus:document.getElementById("btn-semitone-plus")},octaves:{input:document.getElementById("input-octaves"),btn_minus:document.getElementById("btn-octave-minus"),btn_plus:document.getElementById("btn-octave-plus")},item_reset:document.getElementById("reset-transpose")},size:document.getElementById("menu-size"),colors:{top:document.getElementById("menu-colors"),highlight_opacity:document.getElementById("menu-highlight-opacity"),picker_color_white:document.getElementById("color-white"),picker_color_black:document.getElementById("color-black"),picker_color_pressed:document.getElementById("color-pressed"),item_perspective:document.getElementById("menu-perspective"),item_top_felt:document.getElementById("menu-top-felt")},labels:{top:document.getElementById("menu-labels-top"),labeling_mode:document.getElementById("menu-labeling-mode"),played:document.getElementById("menu-labels-played-keys"),type:document.getElementById("menu-labels-type"),octave:document.getElementById("menu-item-labels-octave"),clear:document.getElementById("menu-labels-clear")},stickers:{top:document.getElementById("menu-stickers-top"),clear:document.getElementById("menu-stickers-clear")},pedals:{top:document.getElementById("pedal-menu"),item_follow:document.getElementById("menu-pedal-follow"),item_dim:document.getElementById("menu-pedal-dim")}},leds:{control:document.getElementById("connection-power-icon"),transpose:document.getElementById("transpose-power-icon"),sound:document.getElementById("sound-power-icon"),labels:document.getElementById("labels-power-icon"),stickers:document.getElementById("stickers-power-icon"),pedal_r:document.getElementById("pedr"),pedal_m:document.getElementById("pedm"),pedal_l:document.getElementById("pedl")},resize:{observer:null,timeout:null}},Tu=[{elm:v.title,action:"hide-elm"},{elm:v.buttons.sound,action:"hide-label"},{elm:v.buttons.connect,action:"hide-label"},{elm:v.buttons.pedals,action:"hide-label"},{elm:v.buttons.transpose,action:"hide-label"},{elm:v.buttons.stickers_left,action:"hide-label"},{elm:v.buttons.labels_left,action:"hide-label"},{elm:v.dropdowns.colors,action:"hide-elm"},{elm:v.dropdowns.size,action:"hide-elm"},{elm:v.dropdowns.sound,action:"hide-elm"},{elm:v.dropdowns.pedals,action:"hide-elm"},{elm:v.buttons.stickers_group,action:"hide-elm"},{elm:v.buttons.labels_group,action:"hide-elm"},{elm:v.buttons.panic,action:"hide-elm"},{elm:v.self,action:"hide-elm"}];function It(){Je(v.leds.control,d.pc_keyboard_connected||Y.enabled||d.device_name&&st.getConnectedPort()),Je(v.leds.transpose,d.transpose!=0),Je(v.leds.sound,vt.led,vt.led==1?"red":null),Je(v.leds.labels,po()),Je(v.leds.stickers,fo(),{red:"red",yellow:"yellow",green:"#0b0",blue:"blue",violet:"violet"}[d.stickers.color]),Le(v.self,!d.toolbar),Le(v.buttons.show_toolbar,d.toolbar),Le(v.dropdowns.pedals,Y.enabled),ho()}function Vs(){for(let t of Tu)t.action=="hide-elm"?t.elm.classList.toggle("condensed-toolbar-hidden-elm",!1):t.action=="hide-label"&&t.elm.classList.toggle("condensed-toolbar-hidden-label",!1);for(let t of Tu){if(v.self.scrollWidth<=v.self.clientWidth)break;t.action=="hide-elm"?t.elm.classList.toggle("condensed-toolbar-hidden-elm",!0):t.action=="hide-label"&&t.elm.classList.toggle("condensed-toolbar-hidden-label",!0)}}function wo(){if(Le(v.menus.connect.denied,ht.access!="denied"),Le(v.menus.connect.unavailable,Dt||ht.access!="unavailable"),Le(v.menus.connect.prompt,ht.access!="prompt"),Le(v.menus.connect.divider,ht.access=="granted"&&!ht.ports?.length||Dt&&ht.access=="unavailable"),ji(v.menus.connect.kbd,d.pc_keyboard_connected),ji(v.menus.connect.touch,Y.enabled),ht.access!="granted"){ht.clearMenuItems();return}for(let t of ht.ports??[])if(!ht.menu_items.some(e=>t.name==e.value)){let e=oc(v.menus.connect.template,{value:t.name},t.name);e.addEventListener("click",o=>{mr(o.currentTarget.value,!0)}),v.menus.connect.top.insertBefore(e,v.menus.connect.divider)}for(let t of ht.menu_items??[])ht.ports.some(e=>t.value==e.name)?ji(t,t.value==ht.connected_port?.name):t.remove()}function un(){if(vt.loading)for(let t of v.menus.sound.items){let e=t.getAttribute("value")==vt.type;_s(t,e),Fe(t,!e),t.checked=!1}else for(let t of v.menus.sound.items){let e=t.getAttribute("value")==vt.type;t.checked=e,_s(t,!1),Fe(t,!1)}}function _n(){for(let t of v.dropdowns.size.querySelectorAll(".btn-number-of-keys")){let e=parseInt(t.value)==d.number_of_keys;t.variant=e?"neutral":null}for(let t of v.dropdowns.size.querySelectorAll(".btn-key-depth")){let e=parseFloat(t.value)==d.height_factor;t.variant=e?"neutral":null}}function Mu(){v.menus.colors.picker_color_white.value=d.color_white,v.menus.colors.picker_color_black.value=d.color_black,v.menus.colors.picker_color_pressed.value=d.color_highlight,v.menus.colors.item_perspective.checked=d.perspective,v.menus.colors.item_perspective.hidden=d.lowperf,v.menus.colors.item_top_felt.checked=d.top_felt;for(let t of v.menus.colors.highlight_opacity.children)t.checked=t.value==d.highlight_opacity.toString()}function wn(){v.menus.pedals.item_follow.checked=d.pedals,v.menus.pedals.item_dim.checked=d.pedal_dim,Fe(v.menus.pedals.item_dim,!d.pedals)}function ho(){Je(v.leds.pedal_r,te.isSustainActive()||st.sustain_pedal_value/127),Je(v.leds.pedal_m,st.sostenuto_pedal_value/127),Je(v.leds.pedal_l,st.soft_pedal_value/127)}function Vo(){v.menus.labels.labeling_mode.checked=po(),v.menus.labels.played.checked=d.labels.played;for(let t of v.menus.labels.type.children)t.value!="octave"&&(t.checked=t.value===d.labels.type);v.menus.labels.type.nextElementSibling.innerText=d.labels.type_badge,v.menus.labels.octave.disabled=["pc","midi","freq"].includes(d.labels.type),v.menus.labels.octave.checked=d.labels.octave,v.menus.labels.clear.disabled=d.labels.keys.size==0}function gn(){let t=fo();for(let e of v.menus.stickers.top.children)if(e.getAttribute("type")=="checkbox"){let o=e.value==d.stickers.color;e.checked=t&&o,e.querySelector(".menu-keyboard-shortcut").classList.toggle("invisible",!o)}v.menus.stickers.clear.disabled=d.stickers.keys.size==0}function $s(){v.menus.transpose.semitones.input.value=d.semitones,v.menus.transpose.octaves.input.value=d.octaves,Fe(v.menus.transpose.item_reset,d.transpose==0),Je(v.leds.transpose,d.transpose!=0)}function ri(){d.toolbar=!d.toolbar,It(),Qe(),nt()}function Lu(t=!0){Le(v.menus.size.querySelector('.btn-number-of-keys[value="20"]'),!t)}function Ds(){return v.dropdowns.getOpen()}function Ic(){v.buttons.panic.setAttribute("variant","danger"),setTimeout(()=>{v.buttons.panic.removeAttribute("variant")},1e3)}function $u(){v.resize.timeout&&clearTimeout(v.resize.timeout),v.resize_timeout=setTimeout(()=>{Vs(),Pu(),v.resize.timeout=null},d.lowperf?50:5)}function Je(t,e,o=null){t.classList.toggle("active",e),e&&o?t.style.color=o:t.style.removeProperty("color"),t.style.setProperty("--led-intensity",`${e*100}%`)}v.dropdowns.connect.addEventListener("sl-show",()=>{wo(),ht.setWatchdog(oi),ht.queryAccess(t=>{t!="granted"&&wo(),["granted","prompt"].includes(t)&&ht.requestAccess(e=>{wo(),e&&ht.requestPorts(wo)})})});v.dropdowns.connect.addEventListener("sl-hide",()=>{ht.setWatchdog(Go),It()});v.dropdowns.sound.addEventListener("sl-show",un);v.dropdowns.size.addEventListener("sl-show",_n);v.dropdowns.colors.addEventListener("sl-show",Mu);v.dropdowns.pedals.addEventListener("sl-show",wn);v.dropdowns.labels.addEventListener("sl-show",Vo);v.dropdowns.stickers.addEventListener("sl-show",gn);v.dropdowns.transpose.addEventListener("sl-show",$s);var Hp=t=>{t.currentTarget.querySelector("sl-button").setAttribute("variant","neutral")},Vp=t=>{let e=t.currentTarget.querySelector("sl-button");e.setAttribute("variant","default"),e.blur()};for(let t of v.dropdowns.all)t.addEventListener("sl-show",Hp),t.addEventListener("sl-hide",Vp);v.menus.connect.kbd.addEventListener("click",()=>{Du(),nt()});v.menus.connect.touch.addEventListener("click",()=>{Ou(),nt()});v.menus.sound.top.addEventListener("sl-select",t=>{vt.load(t.detail.item.value),nt()});var Gp=t=>{go(parseInt(t.currentTarget.value)),Dt&&v.dropdowns.size.hide()};v.dropdowns.size.querySelectorAll(".btn-number-of-keys").forEach(t=>{t.addEventListener("click",Gp)});var Up=t=>{Fs(parseFloat(t.currentTarget.value)),Dt&&v.dropdowns.size.hide()};v.dropdowns.size.querySelectorAll(".btn-key-depth").forEach(t=>{t.addEventListener("click",Up)});v.menus.colors.highlight_opacity.addEventListener("sl-select",t=>{d.highlight_opacity=t.detail.item.value,nt(),Mu()});v.menus.colors.item_perspective.addEventListener("click",()=>{d.perspective=!d.perspective,Xe(),nt(),Dt&&v.dropdowns.colors.hide()});v.menus.colors.item_top_felt.addEventListener("click",()=>{d.top_felt=!d.top_felt,Is(),nt(),Dt&&v.dropdowns.colors.hide()});v.menus.colors.picker_color_white.addEventListener("sl-change",t=>{d.color_white=t.target.value,nt()});v.menus.colors.picker_color_black.addEventListener("sl-change",t=>{d.color_black=t.target.value,nt()});v.menus.colors.picker_color_pressed.addEventListener("sl-change",t=>{d.color_highlight=t.target.value,nt()});v.menus.labels.type.addEventListener("sl-select",t=>{t.detail.item.value==v.menus.labels.octave.value?mn(t.detail.item.checked):Ye(t.detail.item.value),Dt&&v.dropdowns.labels.hide()});v.menus.labels.top.addEventListener("sl-select",t=>{t.detail.item.id==v.menus.labels.labeling_mode.id?(fr(t.detail.item.checked),v.dropdowns.labels.hide()):t.detail.item.id==v.menus.labels.played.id&&(fn(t.detail.item.checked),Dt&&v.dropdowns.labels.hide())});v.buttons.labels_left.addEventListener("click",()=>{fr()});v.menus.stickers.top.addEventListener("sl-select",t=>{t.detail.item.getAttribute("type")=="checkbox"&&(ze(void 0,t.detail.item.value),v.dropdowns.stickers.hide()),nt()});v.buttons.stickers_left.addEventListener("click",()=>{ze()});v.menus.stickers.clear.addEventListener("click",()=>{hn()});v.menus.labels.clear.addEventListener("click",()=>{pn()});v.menus.pedals.top.addEventListener("sl-select",t=>{let e=t.detail.item;switch(e.id){case"menu-pedal-follow":d.pedals=e.checked;break;case"menu-pedal-dim":d.pedal_dim=e.checked;break}Fe(v.menus.pedals.item_dim,!d.pedals),ho(),Mt(),nt(),Dt&&v.dropdowns.pedals.hide()});v.menus.transpose.semitones.btn_plus.addEventListener("click",()=>Wt({semitones:1}));v.menus.transpose.semitones.btn_minus.addEventListener("click",()=>Wt({semitones:-1}));v.menus.transpose.octaves.btn_plus.addEventListener("click",()=>Wt({octaves:1}));v.menus.transpose.octaves.btn_minus.addEventListener("click",()=>Wt({octaves:-1}));v.menus.transpose.item_reset.addEventListener("click",()=>{Wt({reset:!0}),Dt&&v.dropdowns.transpose.hide()});v.buttons.panic.addEventListener("click",ei);v.buttons.hide_toolbar.addEventListener("click",ri);v.buttons.show_toolbar.addEventListener("click",ri);v.title.addEventListener("click",()=>document.getElementById("dialog-about").show());var oi=500,Go=2e3,ht={ports:[],get menu_items(){return v.menus.connect.getMidiItems()},get connected_port(){return st.getConnectedPort()},access:"unavailable",queryAccess(t=null){st.queryMidiAccess(e=>{this.access=e,t?.(this.access)})},requestAccess(t=null){st.requestMidiAccess(()=>{this.access="granted",t?.(!0)},()=>{this.access="denied",t?.(!1)})},requestPorts(t=null){st.requestInputPortList(e=>{this.ports=e,t?.(e)},()=>{this.ports=null,t?.(null)})},clearMenuItems(){for(let t of this.menu_items)t.remove()},watchdog_id:null,setWatchdog(t){this.watchdog_id&&clearInterval(this.watchdog_id),this.watchdog_id=setInterval(Us,t)}};function Du(t=null){t===null&&(t=!d.pc_keyboard_connected),t?Uo("pckbd"):Gs()}function Ou(t=null){t===null&&(t=!Y.enabled),t?Uo("touch"):Gs()}function Uo(t,e=!1){switch(st.disconnect(),vt.stopAll(),t){case"pckbd":te.enable(),Y.disable(),d.device_name="pckbd",It(),Rs(),e&&nt();break;case"touch":te.disable(),Y.enable(),d.device_name="touch",It(),Mt(),e&&nt();break;default:te.disable(),Y.disable(),d.device_name=null,It(),Mt(),st.connectByPortName(t,()=>{d.device_name=t,It(),Os(),e&&nt()})}}function Gs(t=!1){st.disconnect(),te.disable(),Y.disable(),d.device_name=null,It(),Mt(),t&&nt()}function mr(t,e=!1){t&&d.device_name!=t?Uo(d.device_name==t?"":t,e):Gs(e)}function Iu(t,e){vn(t),vt.play(t,e)}function Ru(t,e,o){o&&o<100?setTimeout(()=>vn(t),100-o):vn(t),vt.stop(t,!1)}function Kp(){Mt(),vt.stopAll(!1),ho()}function jp(t){t>63&&t<68&&(Mt(),vt.stopAll(!1),ho())}function Wp(){Mt(),vt.stopAll(!0),ho()}st.onConnectionChange=()=>{Mt(),It()};st.onKeyPress=Iu;st.onKeyRelease=Ru;st.onControlChange=jp;te.onKeyPress=Iu;te.onKeyRelease=Ru;te.onSustain=Kp;te.onReset=Wp;function Us(){let t=v.dropdowns.connect.open;ht.queryAccess(e=>{e=="granted"?(Uc()&&Os(),ht.requestPorts(o=>{if(ht.ports=o,d.device_name&&d.device_name!="pckbd"&&d.device_name!="touch"){if(!st.getConnectedPort()){let i=o.find(n=>n.name==d.device_name);i&&st.connect(i,()=>{It(),t&&wo()})}It()}t&&wo()})):(st.disconnect(),It(),t&&wo())})}Promise.allSettled([customElements.whenDefined("sl-dropdown"),customElements.whenDefined("sl-button"),customElements.whenDefined("sl-button-group"),customElements.whenDefined("sl-icon"),customElements.whenDefined("sl-menu"),customElements.whenDefined("sl-menu-item")]).finally(qp);function qp(){if(Jc(),Zp(),document.body.classList.add("ready"),Dt&&(document.documentElement.classList.add("mobile"),v.buttons.show_toolbar.classList.add("mobile"),Fe(v.buttons.panic.parentElement),Fe(v.buttons.hide_toolbar.parentElement),Fe(v.buttons.show_toolbar.parentElement),Lu()),Ki?Le(v.dropdowns.sound):(document.getElementById("menu-sound-item-unavailable").hidden=!0,v.menus.sound.items.forEach(e=>{e.hidden=!1}),Dt&&d.sound&&vt.load(d.sound)),It(),Xe(),Cu(),d.device_name)["pckbd","touch"].includes(d.device_name)?Uo(d.device_name):ht.queryAccess(e=>{e=="granted"&&Uo(d.device_name)});else{let e=document.getElementById("dropdown-connect-tooltip");Dt&&(Uo("touch",!0),e.setAttribute("content","Play your keyboard using your fingers! Or change the input method by tapping this button."))}let t=()=>{Vs(),v.resize.observer=new ResizeObserver($u),v.resize.observer.observe(v.self),Qe(),M.resize.observer=new ResizeObserver(Qc),M.resize.observer.observe(M.container),Dt?Bs():(Hc(),Au({onStepChange:e=>{switch(e){case 11:Vc(),document.getElementById("keyboard-navigator").style.visibility="hidden";break;case 12:document.getElementById("keyboard-navigator").style.removeProperty("visibility")}},onFinish:()=>{Gc(),Nc(),Bs()}}))};document.readyState!="complete"?window.addEventListener("load",t,{once:!0}):t(),Us(),ht.setWatchdog(Go)}function Zp(){let t=tc("mode").toLowerCase();["lp","lowperf"].includes(t)?(d.lowperf=!0,N.writeBool("lowperf",!0)):["hp","highperf"].includes(t)&&(d.lowperf=!1,N.writeBool("lowperf",!1))}
/*! Bundled license information:

@lit/reactive-element/css-tag.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/reactive-element.js:
lit-html/lit-html.js:
lit-element/lit-element.js:
@lit/reactive-element/decorators/custom-element.js:
@lit/reactive-element/decorators/property.js:
@lit/reactive-element/decorators/state.js:
@lit/reactive-element/decorators/event-options.js:
@lit/reactive-element/decorators/base.js:
@lit/reactive-element/decorators/query.js:
@lit/reactive-element/decorators/query-all.js:
@lit/reactive-element/decorators/query-async.js:
@lit/reactive-element/decorators/query-assigned-nodes.js:
lit-html/directive.js:
lit-html/async-directive.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/is-server.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/query-assigned-elements.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directive-helpers.js:
lit-html/static.js:
lit-html/directives/live.js:
lit-html/directives/ref.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directives/class-map.js:
lit-html/directives/if-defined.js:
lit-html/directives/style-map.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)
*/
